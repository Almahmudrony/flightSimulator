var Hi=function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=10)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(14);t.GameScenes=n.GameScenes;var s=i(4);t.ModuleName=s.ModuleName;var o=i(15);t.WeatherState=o.WeatherState;var a=i(16);t.AssetsManager=a.AssetsManager;var r=i(3);t.GuiManager=r.GuiManager;var c=i(2);t.SceneManager=c.SceneManager;var l=i(7);t.GlobalManager=l.GlobalManager;var h=i(17);t.AnimationCon=h.AnimationCon;var u=i(6);t.AnimationGui=u.AnimationGui;var p=i(18);t.particleCon=p.particleCon;var d=i(19);t.GuiCreate=d.GuiCreate;var m=i(20);t.Panels=m.Panels;var f=i(1);t.Module=f.Module;var g=i(21);t.Guis=g.Guis;var y=i(22);t.StartGui=y.StartGui;var b=i(23);t.GameSceneGui=b.GameSceneGui;var B=i(5);t.DisplayPool=B.DisplayPool;var x=i(24);t.Func=x.Func},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.initUI=function(){},e.prototype.show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addEvent()},e.prototype.hide=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isInit||(this.initUI(),this.isInit=!0)},e.prototype.addClick=function(e,t){return e.onPointerUpObservable.add(t)},e.prototype.removeClick=function(e,t){e.onPointerUpObservable.remove(t)},e.prototype.delayEnable=function(e,t){e.mouseEnable=e.mouseChildren=!1,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){this.timeoutId=0,e.mouseEnable=e.mouseChildren=!0},t||500)},e.prototype.dispose=function(){},e}();t.Module=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._canvas=document.querySelector("#renderCanvas"),this._engine=new BABYLON.Engine(this._canvas,!0,{deterministicLockstep:!0,lockstepMaxSteps:4});var e=function(){var e=new BABYLON.Scene(this._engine),t=e._onPointerUp,i=e._onPointerDown,n=e._onPointerMove,s=BABYLON.Tools.GetPointerPrefix();return this._canvas.removeEventListener(s+"move",n),this._canvas.removeEventListener(s+"down",i),window.removeEventListener(s+"up",t),e._onPointerUp=function(e){void 0!==e.pointerId&&t(e)},e._onPointerDown=function(e){void 0!==e.pointerId&&i(e)},e._onPointerMove=function(e){void 0!==e.pointerId&&n(e)},this._canvas.addEventListener(s+"move",e._onPointerMove,!1),this._canvas.addEventListener(s+"down",e._onPointerDown,!1),window.addEventListener(s+"up",e._onPointerUp,!1),new BABYLON.FreeCamera("baseCamera",new BABYLON.Vector3(0,0,0),e),e}.bind(this);this._scene=e(),this._engine.runRenderLoop(function(){this._scene.render(),TWEEN.update()}.bind(this)),window.addEventListener("resize",function(){this._engine.resize()}.bind(this))}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e.prototype.change=function(e){},e}();t.SceneManager=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.guiPoll={},this._lastGui=null,this._fullscreenUI=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI")}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.changeGui=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=this._fullscreenUI.rootContainer.children.length,s=0;s<n;s++)this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0]);this._fullscreenUI.addControl(e),this._lastGui=e},e.prototype.appendGui=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this._fullscreenUI.addControl(e),this._lastGui=e},e.prototype.removeGui=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this._fullscreenUI.removeControl(this._lastGui)},e.prototype.removeAll=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=this._fullscreenUI.rootContainer.children.length,s=0;s<n;s++)this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])},e.prototype.openPanel=function(e){},e.prototype.closePanel=function(e){},Object.defineProperty(e.prototype,"fullscreenUI",{get:function(){return this._fullscreenUI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastGui",{get:function(){return this._lastGui},enumerable:!0,configurable:!0}),e}();t.GuiManager=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LOADING_GUI="LoadingScene",e.WAITING_PANEL="WaitingPanel",e.MSG_PANEL="MsgPanel",e.RULE_PANEL="RulePanel",e.LOSE_PANEL="LosePanel",e.GAME_START_GUI="GameStartScene",e.GAME_PLAY_SCENE="GamePlayScene",e.GAME_PLAY_GUI="GamePlayGui"}(t.ModuleName||(t.ModuleName={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.displayPool={}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e}();t.DisplayPool=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){this.show=function(e,t,i){var n=[];n.push({frame:0,value:.1}),n.push({frame:10,value:1});var s=new BABYLON.Animation("","scaleX",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);s.setKeys(n);var o=new BABYLON.Animation("","scaleY",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);o.setKeys(n),e.animations=[],e.animations.push(s,o),this.advancedTexture.addControl(e),t&&t(),this.scene.beginAnimation(e,0,10,!1,2,function(){i&&i()})},this.hide=function(e,t,i){var n=this,s=[];s.push({frame:0,value:1}),s.push({frame:10,value:.1});var o=new BABYLON.Animation("","scaleX",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);o.setKeys(s);var a=new BABYLON.Animation("","scaleY",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);a.setKeys(s),e.animations=[],e.animations.push(o,a),t&&t(),this.scene.beginAnimation(e,0,10,!1,2,function(){n.advancedTexture.removeControl(e),i&&i()})},this.scene=e,this.advancedTexture=t};t.AnimationGui=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(5),s=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.openModule=function(e){for(var t,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];(t=n.DisplayPool.ins.displayPool[e]).show.apply(t,i)},e}();t.GlobalManager=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=i(0),o=i(0),a=i(0),r=i(25),c=i(0),l=i(26),h=i(27),u=i(29),p=i(30),d=i(9),m=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.importMeshes=[],t}return n(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){o.DisplayPool.ins.displayPool[a.ModuleName.GAME_PLAY_SCENE]=this},t.prototype.resetGame=function(){var e=this;r.ExGameScene.ins.creatScene();var t=s.SceneManager.ins.scene;this.scene=s.SceneManager.ins.scene,this.display=r.ExGameScene.ins.display,localStorage.language="chinese",setTimeout(function(){localStorage.msg=d.Language.ins.languageList.indexTips[localStorage.language];var e=new SpeechSynthesisUtterance(localStorage.msg);"chinese"!=localStorage.language&&(e.lang="en"),window.speechSynthesis.speak(e)},1e3),s.SceneManager.ins.engine.displayLoadingUI(),s.SceneManager.ins.engine.loadingUIText="Initializing...",s.SceneManager.ins.engine.hideLoadingUI(),console.log("Pilot Head"),console.log(this.scene.getMaterialByName("Pilot Head"));var i=!0;setInterval(function(){i=!i,e.scene.getMaterialByName("Pilot Head").emissiveColor=i?new BABYLON.Color3(.2,.2,.2):new BABYLON.Color3(.3,.3,.3)},10),setInterval(function(){e.scene.getMeshByName("灯").getChildMeshes(!1,function(e){e.isVisible=!0}),setTimeout(function(){e.scene.getMeshByName("灯").getChildMeshes(!1,function(e){e.isVisible=!1})},50)},1e3),this.scene.getMeshByName("气流1").material.backFaceCulling=!1,this.scene.getMeshByName("气流2").material.backFaceCulling=!1,this.scene.collisionsEnabled=!1,h.FlyCon.ins.init(this.display),l.FireCon.ins.init(this.display),u.HotDecoyFlareCon.ins.init(this.display),p.MissileCon.ins.init(this.display),this.scene.meshes.forEach(function(e){e.checkCollisions=!1});var n=new BABYLON.ReflectionProbe("main",60,this.scene);n.renderList.push(this.scene.getMeshByName("default")),n.renderList.push(this.scene.getMeshByName("skySphere")),n.attachToMesh(this.display.cameraBox);var o=new BABYLON.RenderTargetTexture("tex",512,t);o.activeCamera=this.display.camera4,o.vScale=18,o.uScale=8,o.uOffset=1,o.vOffset=-.85,this.scene.meshes.forEach(function(e){o.renderList.push(e)}),t.registerBeforeRender(function(){o.render()}),s.AssetsManager.ins.resourceObject.cubeTextures.gameScene.skybox,this.scene.getMeshByName("__root__").getChildMeshes(!1,function(t){console.log(t),console.log(t.name),t.isPickable=!1,e.display.shadowGenerator.getShadowMap().renderList.push(t),t.receiveShadows=!0,"Glass"==t.name?t.isBlocker=!1:t.isBlocker=!0,t.material&&(t.material.backFaceCulling=!1,console.log("mesh.material"),console.log(t.material),t.material.reflectionTexture=n.cubeTexture,console.log("mesh.material.reflectionTexture"),console.log(t.material.reflectionTexture),"Glass"==t.name?t.material.reflectionTexture.level=1:t.material.reflectionTexture.level=.3)}),this.scene.getMeshByName("__root__").parent=this.display.cameraBox,this.scene.getMeshByName("__root__").rotation.y=1*-Math.PI,this.scene.getMeshByName("__root__").position.y=-0,this.display.cameraBox.scaling=new BABYLON.Vector3(10,10,10),this.scene.getMeshByName("default").isPickable=!0,this.scene.getMeshByName("default").isBlocker=!0,this.scene.getMeshByName("default").scaling=new BABYLON.Vector3(40,40,40),this.scene.getMeshByName("default").material.diffuseTexture.uScale=4,this.scene.getMeshByName("default").material.diffuseTexture.vScale=4,this.display.cameraBox.position.y=-10;var a=new BABYLON.StandardMaterial("jingzi",t);a.emissiveTexture=o,a.disableLighting=!0,a.backFaceCulling=!1,this.scene.getMeshByName("jinzi").material=a,this.display.jingzi.material=a,console.log("this.display.jingzi.material")},t.prototype.addEvent=function(){var e=this;this.doEvents.BeforeRender=s.SceneManager.ins.scene.onBeforeRenderObservable.add(function(){e.beforeRender()})},t.prototype.beforeRender=function(){if(!h.FlyCon.ins.flyLife)return!1;this.times=60/s.SceneManager.ins.engine.getFps(),l.FireCon.ins.update(this.times),h.FlyCon.ins.update(this.times),u.HotDecoyFlareCon.ins.update(this.times),p.MissileCon.ins.update(this.times),this.display.lens3.isOccluded},t}(c.GameScenes);t.ExGameSceneCon=m},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.languageList={dmzj:{chinese:"注意地面撞击，距离${0} 米；",english:"Warning, Bottom collision，${0} metres away"},dbzj:{chinese:"注意上方撞击，距离${0} 米；",english:"Warning, Top collision，${0} metres away"},qfzj:{chinese:"注意前方撞击，距离${0} 米；",english:"Warning, Front collision，${0} metres away"},zfzj:{chinese:"注意左方撞击，距离${0} 米；",english:"Warning, Left collision，${0} metres away"},yfzj:{chinese:"注意右方撞击，距离${0} 米；",english:"Warning, Right collision，${0} metres away"},indexTips:{chinese:"你好，欢迎驾驶台风战机。\n您可以通过鼠标左键进行射击，右键切换第一人称和第三人称视角，\n通过长按空格键并拖动鼠标进行自由视角观察,\nQ键为导弹，E键为干扰弹，R为放下起落架。",english:"Hello, Welcome to fly the Typhoon fighter. \n You can shoot by the left button of the mouse,\n Change the view by right button, \nand control the flight by dragging the mouse. \n \nYou can press the space bar and drag the mouse to view the free view.\n You can release the jammer by pressing the 'E' key."}}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e}();t.Language=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(11);window.addEventListener("load",function(){var e=navigator.userAgent,t=!e.match(/(iPad).*OS\s([\d_]+)/)&&e.match(/(iPhone\sOS)\s([\d_]+)/),i=e.match(/(Android)\s+([\d.]+)/);t||i?document.body.innerHTML='\n    <style>\n        body{\n        text-align: center;\n        font-size: 1rem;\n        color: #349ccd;\n        }\n\n    h1{\n    margin-top: 10rem;\n    }\n    </style> \n    <h1>Hi!</h1>\n    Please access through PC, mobile phone temporarily not supported!" <br>(请通过PC访问，手机暂时不支持！)':n.Before.ins.update()})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(12),s=i(13),o=i(0),a=i(0),r=i(0),c=i(0),l=i(0),h=i(8),u=i(31),p=i(33),d=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.update=function(){var e=this;o.AssetsManager.ins.resourceData=n.ResourceCon.ins.resource,o.AssetsManager.ins.loadFile(["gameScene"],a.SceneManager.ins.scene,function(){e.initModule(),console.log(c.DisplayPool.ins.displayPool),r.GlobalManager.ins.openModule(l.ModuleName.GAME_START_GUI),s.SceneBeforeCall.ins.musicLoop()},function(e,t){console.log(e.loadCount),console.log(e),console.log(t),a.SceneManager.ins.engine.loadingUIText="loading:"+parseInt((100*e.loadCount).toString())+"%<br><br>("+(e.totalTasksCount-e.waitingTasksCount)+"/"+e.totalTasksCount+")"})},e.prototype.addEvent=function(){},e.prototype.initModule=function(){h.ExGameSceneCon.ins.init(),p.ExStartGuiCon.ins.init(),u.ExGameSceneGuiCon.ins.init()},e}();t.Before=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){var e;this.pathFirst=window.resPath,e={binarys:[{name:"zhanji",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"zhanji4.mp3"},{name:"qiang",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"qiang7.mp3"},{name:"daodan",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"daodan.mp3"},{name:"dan",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"qiang2.mp3"},{name:"win",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"mu_2.mp3"},{name:"win2",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"mu_1.mp3"},{name:"boom",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"boom.mp3"}],images:[{name:"after",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"after.jpg"},{name:"night",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"night.jpg"},{name:"rain",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"rain.jpg"},{name:"sun",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"sun.jpg"},{name:"map1",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_1.jpg"},{name:"map2",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_2.jpg"},{name:"map3",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_3.jpg"},{name:"logo",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"logo.png"},{name:"jiantou",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"jiantou.png"},{name:"jiantou2",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"jiantou4.png"},{name:"jiantou3",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"jiantou3.png"},{name:"lensdirt",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"lensdirt.jpg"},{name:"lens2",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"lens4.jpg"},{name:"ico_b",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"ico_b.png"},{name:"ico_bg",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"ico_bg.png"},{name:"boom3",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"boom3.png"}],models:[{name:"map3",filePath:this.pathFirst+"src/Resource/gameScene/models/height_m2/",fileName:"height_m22.babylon"},{name:"sm14",filePath:this.pathFirst+"src/Resource/gameScene/models/sm14/",fileName:"sm108.glb"}],textures:[{name:"grass",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"grass.png"},{name:"boom",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"boom.jpg"},{name:"grass2",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"grass.jpg"},{name:"skybox13",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"skybox6.png"},{name:"ground",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"ground.jpg"},{name:"maptr",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"maptr.jpg"},{name:"maptr2",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"maptr5.jpg"},{name:"stainedGlass",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"stainedGlass.png"},{name:"waterbump",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"waterbump.png"},{name:"yu",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"yu.png"},{name:"lighting",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"lighting4.png"},{name:"flare",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"flare.png"},{name:"yun",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"yun.png"}],cubeTextures:[{name:"skybox",filePath:this.pathFirst+"src/Resource/gameScene/cubeTextures/skybox/",fileName:"skybox"}]},this._resource={gameScene:e}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),e}();t.ResourceCon=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.musicLoop=function(){},e}();t.SceneBeforeCall=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),o=i(2),a=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.dispose=function(){var e;for(e in this.display)console.log(this.display[e]),this.display[e]&&this.display[e].dispose()},t.prototype.show=function(e){this.resetGame(),o.SceneManager.ins.change(this.display),this.addEvent()},t.prototype.resetGame=function(){},t.prototype.gameOver=function(){this.removeEvent()},t}(s.Module);t.GameScenes=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SUNNY_DAY=0]="SUNNY_DAY",e[e.RAIN_DAY=1]="RAIN_DAY",e[e.AFTERNOON_DAY=2]="AFTERNOON_DAY",e[e.NIGHT_DAY=3]="NIGHT_DAY"}(t.WeatherState||(t.WeatherState={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._resourceObject={binarys:{},images:{},models:{},textures:{},cubeTextures:{}},BABYLON.SceneLoader.OnPluginActivatedObservable.add(function(e){"gltf"===e.name&&e instanceof BABYLON.GLTFFileLoader&&(e.animationStartMode=BABYLON.GLTFLoaderAnimationStartMode.NONE,e.compileMaterials=!0)})}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceData",{set:function(e){this._resourceData=e},enumerable:!0,configurable:!0}),e.prototype.loadFile=function(e,t,i,n){var s=new BABYLON.AssetsManager(t);e.forEach(function(e){var t={};this._resourceData[e].models.forEach(function(i,n){s.addMeshTask("skull task","",i.filePath,i.fileName).onSuccess=function(n){console.log("meshTask"),console.log(n);var s=n;t[i.name]=s,this._resourceObject.models[e]=t}.bind(this)}.bind(this));var i={};this._resourceData[e].images.forEach(function(t){s.addImageTask("image task",t.filePath+t.fileName).onSuccess=function(n){i[t.name]=n.image,this._resourceObject.images[e]=i}.bind(this)}.bind(this));var n={};this._resourceData[e].textures.forEach(function(t){s.addTextureTask("texture task",t.filePath+t.fileName).onSuccess=function(i){n[t.name]=i.texture,this._resourceObject.textures[e]=n}.bind(this)}.bind(this));var o={};this._resourceData[e].binarys.forEach(function(t){s.addBinaryFileTask("binary task",t.filePath+t.fileName).onSuccess=function(i){console.log(6666677),o[t.name]=i.data,o[t.name].url=i.url,o[t.name].rootUrl=t.filePath,o[t.name].sceneFilename=t.fileName,this._resourceObject.binarys[e]=o,console.log(o[t.name])}.bind(this)}.bind(this));var a={};this._resourceData[e].cubeTextures.forEach(function(t){s.addCubeTextureTask("cubeTexture task",t.filePath+t.fileName).onSuccess=function(i){a[t.name]=i.texture,this._resourceObject.cubeTextures[e]=a}.bind(this)}.bind(this))}.bind(this)),s.load(),s.onProgress=function(e){var t={totalTasksCount:s._totalTasksCount,waitingTasksCount:s._waitingTasksCount,loadCount:(s._totalTasksCount-s._waitingTasksCount)/s._totalTasksCount};n(t,s)}.bind(this),s.onFinish=function(e){i()}.bind(this)},Object.defineProperty(e.prototype,"resourceObject",{get:function(){return this._resourceObject},enumerable:!0,configurable:!0}),e}();t.AssetsManager=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.animationBody=function(e,t){var i,n,s,o,a,r,c,l;i=null!=e.endattr?e.endattr:BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE,null!=e.mesh?n=e.mesh:(n=null,console.error("动画对象不能为空！")),null!=e.attr?s=e.attr:(s=null,console.error("动画对象属性不能为空！")),o=null!=e.speed?e.speed:10,a=null!=e.keys?e.keys:[],r=null!=e.endCall?e.endCall:function(){},c=null!=e.typeData?e.typedata:BABYLON.Animation.ANIMATIONTYPE_FLOAT,l=null!=e.loop&&e.loop;var h,u=new BABYLON.Animation("myAnimation",s,o,c,i);h=a,u.setKeys(h),n.animations.push(u),this.setbeginAnimation=t.beginAnimation(n,0,a[a.length-1].frame,l),this.setbeginAnimation.onAnimationEnd=function(){r()}},e.prototype.Pause=function(){this.setbeginAnimation.pause()},e.prototype.Reset=function(){this.setbeginAnimation.reset()},e.prototype.Speed=function(e){this.setbeginAnimation.speedRatio=e},e}();t.AnimationCon=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,i){this.fountain=BABYLON.Mesh.CreateBox("fountain",1,t),this.fountain.isPickable=!1,this.fountain.visibility=0,this.fountain.rotation.x=.9*Math.PI,this.particleSystem=i,this.particleSystem.emitter=this.fountain,this.particleSystem.stop(),this.fountain.position=e}return e.prototype.start=function(){this.particleSystem.start()},e.prototype.stop=function(){this.particleSystem.stop()},e.prototype.Position=function(e){this.fountain.position=e},e.prototype.Parent=function(e){this.fountain.parent=e},e}();t.particleCon=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),s=function(){function e(){this.panelOut=new BABYLON.GUI.StackPanel}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.createList=function(e,t,i){var n,s=this,o=new BABYLON.GUI.Rectangle;for(var a in o.thickness=0,o.isPointerBlocker=!0,o.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,o.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t)o[a]&&(o[a]=t[a]);return t&&t.isVertical?(this.panelOut.horizontalAlignment=2,this.panelOut.verticalAlignment=0,this.panelOut.isVertical=!0,(n={up:0,down:0}).up=parseInt(this.panelOut.top.toString()),o.onPointerDownObservable.add(function(e){n.down=e.y}),o.onPointerUpObservable.add(function(e){var t=parseInt(s.panelOut.top.toString());if(n.up=t,t>0)s.panelOut.top="0px",n.up=0;else if(parseInt(s.panelOut.top.toString())<parseInt(o.height.toString())-parseInt(s.panelOut.height.toString())){var a=(parseInt(o.height.toString())-parseInt(s.panelOut.height.toString()))*i;s.panelOut.top=a.toString()+"px",n.up=parseInt(s.panelOut.top)}}),o.onPointerMoveObservable.add(function(e){var t=e.y-n.down,o=(n.up+t)*i;s.panelOut.top=o.toString()+"px"})):(this.panelOut.horizontalAlignment=0,this.panelOut.verticalAlignment=2,this.panelOut.isVertical=!1,(n={up:0,down:0}).up=parseInt(this.panelOut.left.toString()),o.onPointerDownObservable.add(function(e){n.down=e.x}),o.onPointerUpObservable.add(function(e){var t=parseInt(s.panelOut.left.toString());if(n.up=t,t>0)s.panelOut.left="0px",n.up=0;else if(parseInt(s.panelOut.left.toString())<parseInt(o.width.toString())-parseInt(s.panelOut.width.toString())){var a=(parseInt(o.width.toString())-parseInt(s.panelOut.width.toString()))*i;s.panelOut.left=a.toString()+"px",n.up=parseInt(s.panelOut.left)}}),o.onPointerMoveObservable.add(function(e){var t=e.x-n.down,s=(n.up+t)*i;this.panelOut.left=s.toString()+"px"})),o.addControl(this.panelOut),o},e.prototype.optionsListCon=function(e,t,i){var s=this,o=n.GuiManager.ins.fullscreenUI.idealWidth/document.getElementById("renderCanvas").offsetWidth,a=this.createList("list",{width:e.bodyWidth,height:e.bodyHeight,top:e.bodyTop,left:e.bodyLeft,isVertical:e.isVertical},o),r=this.panelOut.children.length;if(r>0)for(var c=0;c<r;c++)this.panelOut.removeControl(this.panelOut.children[0]);return t.optionList.forEach(function(t){var n=i(e,t);s.panelOut.addControl(n)}),a},e}();t.GuiCreate=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=i(2),o=i(3),a=i(1),r=i(6),c=function(e){function t(){var t=e.call(this)||this;return t.panelsAn=new r.AnimationGui(s.SceneManager.ins.scene,o.GuiManager.ins.fullscreenUI),t}return n(t,e),t.prototype.show=function(e,t){this.addEvent(),this.panelsAn.show(this.view,e,t)},t.prototype.hide=function(e,t){this.removeEvent(),this.panelsAn.hide(this.view,e,t)},t}(a.Module);t.Panels=c},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){function t(){return e.call(this)||this}return n(t,e),t}(i(1).Module);t.Guis=s},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),o=i(6),a=i(2),r=i(3),c=i(5),l=i(4),h=i(7),u=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.panelsAn=new o.AnimationGui(a.SceneManager.ins.scene,r.GuiManager.ins.fullscreenUI),t.initUI(),t}return n(t,e),t.prototype.show=function(e){this.removeEvent(),this.updateData(),this.addEvent(),r.GuiManager.ins.changeGui(this.parent)},t.prototype.hide=function(){var e=this;this.removeEvent(),this.panelsAn.hide(this.view,function(){e.onClose()},function(){e.onClosed()})},t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onOpened=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){c.DisplayPool.ins.displayPool[l.ModuleName.GAME_START_GUI]=this},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.onClick_ruleBtn=function(){},t.prototype.onClick_optionBtn=function(){},t.prototype.onClick_startBtn=function(){h.GlobalManager.ins.openModule(l.ModuleName.GAME_PLAY_GUI)},t.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isInit||(this.initUI(),this.isInit=!0)},t.prototype.onClose=function(){this.removeHtml()},t.prototype.removeHtml=function(){this.section&&document.body.removeChild(this.section)},t.prototype.onClosed=function(){this.removeEvent()},t}(s.Module);t.StartGui=u},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=i(1),o=i(6),a=i(2),r=i(3),c=i(4),l=i(5),h=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.panelsAn=new o.AnimationGui(a.SceneManager.ins.scene,r.GuiManager.ins.fullscreenUI),t.initUI(),t}return n(t,e),t.prototype.show=function(e){this.updateData(),this.addEvent(),r.GuiManager.ins.changeGui(this.parent)},t.prototype.hide=function(){},t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onOpened=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){l.DisplayPool.ins.displayPool[c.ModuleName.GAME_PLAY_GUI]=this},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvent(),this.isInit||(this.initUI(),this.isInit=!0)},t.prototype.onClose=function(){},t.prototype.onClosed=function(){this.removeEvent()},t}(s.Module);t.GameSceneGui=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.replace=function(e,t){for(var i=t.length,n=0;n<i;n++)e=e.replace("{"+n+"}",t[n]);return e},e.prototype.toInt=function(e){return e>>0},e.prototype.isIOS=function(){return navigator.userAgent.match(/iphone|ipod|ipad/gi)},e.prototype.randomArr=function(e){for(var t=e.length,i=0;i<t;i++){var n=this.random(0,e.length,!0),s=e[n];e[n]=e[i],e[i]=s}return e},e.prototype.random=function(e,t,i){var n;return n=void 0!==e&&void 0!==t?Math.min(e,t)+Math.random()*Math.max(e,t):Math.random(),i&&(n=this.toInt(n)),n},e.prototype.getDistance=function(e,t,i,n,s,o){var a=Math.abs(e-n),r=Math.abs(t-s),c=Math.abs(i-o);return Math.sqrt(a*a+r*r+c*c)},e.prototype.vecToLocal=function(e,t){var i=t.getWorldMatrix();return BABYLON.Vector3.TransformCoordinates(e,i)},e}();t.Func=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(0),o=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatScene=function(){this.scene=s.SceneManager.ins.scene,this.scene.clearColor=new BABYLON.Color4(52/255,156/255,1);var e=BABYLON.MeshBuilder.CreateBox("camera2Box",{height:.5,width:.5,depth:.5},this.scene);e.isVisible=!1,e.isPickable=!1,e.rotation=new BABYLON.Vector3(0,0,0);var t=BABYLON.MeshBuilder.CreateBox("camera2Box",{height:.5,width:.5,depth:.5},this.scene);t.isVisible=!1,t.isPickable=!1,t.rotation=new BABYLON.Vector3(0,0,0);var i=BABYLON.MeshBuilder.CreateBox("pickMesh",{height:.5,width:.5,depth:.5},this.scene);i.position=new BABYLON.Vector3(0,0,3e3),i.isPickable=!1,i.parent=e,i.isVisible=!1;var o=BABYLON.MeshBuilder.CreateBox("camera2Box",{height:.5,width:.5,depth:.5},this.scene);o.position=new BABYLON.Vector3(0,.5,-3),o.isVisible=!1,o.rotation=new BABYLON.Vector3(0,0,0),o.parent=e;var a=BABYLON.MeshBuilder.CreateBox("steering",{height:2e3,width:2e3,depth:2e3},this.scene);a.visibility=0,a.scaling=new BABYLON.Vector3(.001,.001,.001),a.rotation=new BABYLON.Vector3(0,.3,.5*Math.PI);var r=new BABYLON.UniversalCamera("UniversalCamera",new BABYLON.Vector3(0,.112,.31),this.scene);r.speed=40,r.inertia=0,r.rotation.y=2*-Math.PI,r.fov=1.6,r.attachControl(s.SceneManager.ins.canvas),r.detachControl(s.SceneManager.ins.canvas),r.minZ=-5,r.maxZ=2e6,r.parent=e;var c=new BABYLON.StandardMaterial("skyBox",this.scene);c.backFaceCulling=!1,c.diffuseTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.skybox13.clone(),c.emissiveTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.skybox13.clone(),c.specularColor=new BABYLON.Color3(0,0,0),c.emissiveColor=new BABYLON.Color3(0,0,0),c.disableLighting=!1;var l=BABYLON.MeshBuilder.CreateSphere("skySphere",{diameter:1e5},this.scene);l.rotation.x=Math.PI,l.position.y=1e4,l.material=c,l.applyFog=!1;var h=new BABYLON.FollowCamera("FollowCam",new BABYLON.Vector3(200,-300,150),this.scene);h.radius=-10,console.log("camera"),h.heightOffset=5,h.rotationOffset=0,h.cameraAcceleration=.8,h.maxCameraSpeed=300,h.noRotationConstraint=!1,h.fov=1.3,h.detachControl(s.SceneManager.ins.canvas),h.update(),h.maxZ=2e6,h.layerMask=1,this.scene.activeCamera=h;var u=new BABYLON.UniversalCamera("UniversalCamera",new BABYLON.Vector3(0,.112,.2),this.scene);u.rotation.y=1*-Math.PI,u.rotation.z=1*-Math.PI,u.position.x=0,u.fov=1,u.detachControl(s.SceneManager.ins.canvas),u.minZ=-5,u.maxZ=2e6,u.parent=e;var p=new BABYLON.ArcRotateCamera("Camera",0,0,10,new BABYLON.Vector3(0,0,0),this.scene);p.upperRadiusLimit=3e3,p.lowerRadiusLimit=10,p.fov=1,p.detachControl(s.SceneManager.ins.canvas),p.minZ=-5,p.maxZ=2e6;var d=BABYLON.MeshBuilder.CreatePlane("myPlane",{width:5,height:5},this.scene);d.position=new BABYLON.Vector3(0,0,3),d.isPickable=!1,d.parent=e,d.isVisible=!1,this.scene.activeCamera=h,this.scene.cameraToUseForPointers=h,h.lockedTarget=e;var m=new BABYLON.StandardMaterial("free",this.scene);console.log("freeMateial"),console.log(m),m.emissiveColor=new BABYLON.Color3(1,1,1),m.diffuseColor=new BABYLON.Color3(0,0,0),m.emissiveTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.boom;var f=new BABYLON.StandardMaterial("boom",this.scene);console.log("boomMateial"),console.log(f),f.disableLighting=!0,f.emissiveColor=new BABYLON.Color3(1,1,1),f.diffuseColor=new BABYLON.Color3(0,0,0),f.emissiveTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.boom;var g=new BABYLON.HemisphericLight("HemiLight",new BABYLON.Vector3(0,10,0),this.scene);g.intensity=.4,g.diffuse=new BABYLON.Color3(1,1,1),g.groundColor=new BABYLON.Color3(1,1,1);var y=new BABYLON.DirectionalLight("DirectionalLight",new BABYLON.Vector3(.2,-.3,.2),this.scene);y.intensity=3,y.shadowFrustumSize=50,y.shadowMinZ=-50,y.shadowMaxZ=50,setInterval(function(){y.position=new BABYLON.Vector3(e.position.x,e.position.y+1,e.position.z-0)},50);var b=new BABYLON.ShadowGenerator(2048,y);b.bias=4e-4,b.usePercentageCloserFiltering=!0,b.filteringQuality=.1,b.forceBackFacesOnly=!0;var B=new BABYLON.TerrainMaterial("terrainMaterial",this.scene);B.mixTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.maptr2.clone(),new BABYLON.GlowLayer("glow",this.scene).intensity=1,B.diffuseTexture1=n.AssetsManager.ins.resourceObject.textures.gameScene.grass.clone(),B.diffuseTexture1.uScale=20,B.diffuseTexture1.vScale=20,B.diffuseTexture2=n.AssetsManager.ins.resourceObject.textures.gameScene.grass.clone(),B.diffuseTexture2.uScale=20,B.diffuseTexture2.vScale=20,B.diffuseTexture3=n.AssetsManager.ins.resourceObject.textures.gameScene.ground.clone(),B.diffuseTexture3.uScale=20,B.diffuseTexture3.vScale=20;var x=BABYLON.Mesh.CreateSphere("centerHidenPick",16,1,this.scene);x.occlusionType=BABYLON.AbstractMesh.OCCLUSION_TYPE_OPTIMISTIC,x.occlusionQueryAlgorithmType=BABYLON.AbstractMesh.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE,x.isOccluded=!0,x.position=new BABYLON.Vector3(-3e4,4e3,0);var v=new BABYLON.LensFlareSystem("lensFlareSystem",x,this.scene);v.isBlocker=!0,new BABYLON.LensFlare(2.6,0,new BABYLON.Color3(1,1,1),n.AssetsManager.ins.resourceObject.images.gameScene.lensdirt.src,v),new BABYLON.LensFlare(1.6,1,new BABYLON.Color3(.5,.5,.5),n.AssetsManager.ins.resourceObject.images.gameScene.lens2.src,v);var O=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");O.layer.layerMask=1,this.scene.fogMode=BABYLON.Scene.FOGMODE_EXP,this.scene.fogDensity=5e-5,this.scene.fogColor=new BABYLON.Color3(.8,.8,.8),this.display={camera2:r,camera3:h,camera4:u,camera5:p,light:g,light3:y,cameraBox:e,camera2Box:o,steering:a,terrainMaterial:B,shadowGenerator:b,freeMateial:m,boomMateial:f,lensFlareSystem3:v,pickMesh:i,advancedTexture:O,lens3:x,jingzi:d,npcBox:t},console.log(this.display)},e}();t.ExGameScene=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(0),o=i(0),a=function(){function e(){this.bullets=[],this.booms=[],this.fireSpeed=30}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatMusic=function(){this.musics={qiang:new BABYLON.Sound("qiang",[n.AssetsManager.ins.resourceObject.binarys.gameScene.qiang.url],this.scene,function(){},{loop:!1})}},e.prototype.creatUI=function(){this.starUi=new BABYLON.GUI.Rectangle,this.starUi.width="30px",this.starUi.height="30px",this.starUi.alpha=.8,this.starUi.thickness=0,this.display.advancedTexture.addControl(this.starUi),this.image2=new BABYLON.GUI.Image("but",n.AssetsManager.ins.resourceObject.images.gameScene.jiantou3.src),this.starUi.addControl(this.image2)},e.prototype.init=function(e){this.scene=s.SceneManager.ins.scene,this.display=e,this.boomSprite=new BABYLON.SpriteManager("treesManager",n.AssetsManager.ins.resourceObject.images.gameScene.boom3.src,160,{width:200,height:200},this.scene),this.creatUI(),this.addEvent(),this.creatMusic();for(var t=0;t<=160;t++)this.bullets[t]=BABYLON.MeshBuilder.CreateSphere("frees",{diameterX:.5,diameterY:.5,diameterZ:80},this.scene),this.bullets[t].lifeState=!1,this.bullets[t].isPickable=!1,this.bullets[t].material=this.display.freeMateial,this.bullets[t].checkCollisions=!1;for(t=0;t<=160;t++)this.booms[t]=new BABYLON.Sprite("player",this.boomSprite),this.booms[t].lifeState=!1,this.booms[t].isPickable=!1,this.booms[t].size=0,this.bullets[t].checkCollisions=!1;var i=this.display.cameraBox.position,a=new BABYLON.Vector3(0,0,1),r=(a=o.Func.ins.vecToLocal(a,this.display.cameraBox)).subtract(i);r=BABYLON.Vector3.Normalize(r),this.ray=new BABYLON.Ray(i,r,3e3)},e.prototype.addEvent=function(){var e=this;this.freeState=!1,document.addEventListener("mousedown",function(t){0==t.button&&(e.freeState=!0)}),document.addEventListener("mouseup",function(t){0==t.button&&(e.freeState=!1)}),setInterval(function(){if(e.freeState){e.musics.qiang.play();var t=Math.random()/100;e.j<=e.bullets.length-1?(e.bullets[e.j].position=new BABYLON.Vector3(e.display.cameraBox.absolutePosition.x+t,e.display.cameraBox.absolutePosition.y+t,e.display.cameraBox.absolutePosition.z),e.bullets[e.j].rotation=new BABYLON.Vector3(e.display.cameraBox.rotation.x+t,e.display.cameraBox.rotation.y+t,e.display.cameraBox.rotation.z),e.bullets[e.j].lifeState=!0,e.j++):(e.j=0,e.bullets[e.j].position=new BABYLON.Vector3(e.display.cameraBox.absolutePosition.x,e.display.cameraBox.absolutePosition.y,e.display.cameraBox.absolutePosition.z),e.bullets[e.j].rotation=new BABYLON.Vector3(e.display.cameraBox.rotation.x,e.display.cameraBox.rotation.y,e.display.cameraBox.rotation.z),e.bullets[e.j].lifeState=!0)}},100)},e.prototype.boom=function(e,t){var i=this;this.booms[e].isVisible=!0,this.booms[e].position=new BABYLON.Vector3(t.position.x,t.position.y,t.position.z),this.booms[e].size=60,this.booms[e].playAnimation(0,36,!1,60,function(){i.booms[e].size=0,i.booms[e].isVisible=!0})},e.prototype.update=function(e){var t=this;this.times=e;var i=this.display.cameraBox.position,n=new BABYLON.Vector3(0,0,1e3),s=(n=o.Func.ins.vecToLocal(n,this.display.cameraBox)).subtract(i);s=BABYLON.Vector3.Normalize(s),this.ray.origin=i,this.ray.direction=s,this.hit=this.scene.pickWithRay(this.ray),Math.random,this.hit.pickedMesh?this.starUi.moveToVector3(this.hit.pickedPoint,this.scene):this.starUi.linkWithMesh(this.display.pickMesh),this.bullets.forEach(function(e,i){if(1==e.lifeState){var n=new BABYLON.Vector3(e.forward.x*t.times*t.fireSpeed,e.forward.y*t.times*t.fireSpeed,e.forward.z*t.times*t.fireSpeed);e.moveWithCollisions(n),e.isVisible=!0,t.hit.pickedMesh&&(e.boomPosition||(e.boomPosition=new BABYLON.Vector3(t.hit.pickedPoint.x,t.hit.pickedPoint.y,t.hit.pickedPoint.z))),e.boomPosition&&o.Func.ins.getDistance(e.position.x,e.position.y,e.position.z,e.boomPosition.x,e.boomPosition.y,e.boomPosition.z)<=50&&(e.lifeState=!1,t.boom(i,e),e.boomPosition=null),o.Func.ins.getDistance(e.position.x,e.position.y,e.position.z,t.display.cameraBox.position.x,t.display.cameraBox.position.y,t.display.cameraBox.position.z)>=3e3&&(e.lifeState=!1,e.boomPosition=null,t.boom(i,e))}else e.isVisible=!1})},e}();t.FireCon=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(0),o=i(0),a=i(28),r=i(9),c=function(){function e(){this.viewState=!0,this.flySpeed=2,this.flyLife=!0,this.obstacleCount=0,this.warningText="",this.warnings=[0,0,0,0,0],this._s=0,this._s_y=0,this.moveX=0,this.moveY=0,this.leftState=!1,this.rightState=!1,this.flayState=[]}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatMusic=function(){var e=this;this.musics={zhanji:new BABYLON.Sound("zhanji",[n.AssetsManager.ins.resourceObject.binarys.gameScene.zhanji.url],this.scene,function(){e.musics.zhanji.play()},{loop:!0}),win:new BABYLON.Sound("zhanji",[n.AssetsManager.ins.resourceObject.binarys.gameScene.win.url],this.scene,function(){e.musics.win.play()},{loop:!0}),win2:new BABYLON.Sound("zhanji",[n.AssetsManager.ins.resourceObject.binarys.gameScene.win2.url],this.scene,function(){e.musics.win2.play()},{loop:!0})}},e.prototype.creatUI=function(){this.rect2=new BABYLON.GUI.Rectangle,this.rect2.scaleX=.7,this.rect2.scaleY=.7,this.rect2.alpha=.8,this.rect2.width="700px",this.rect2.height="400px",this.rect2.color="#009855",this.rect2.thickness=0,this.rect3=new BABYLON.GUI.Rectangle,this.rect3.width="300px",this.rect3.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,this.rect3.height="10800px",this.rect3.top="0",this.rect3.left="10px",this.rect3.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,this.rect3.thickness=0,this.rect2.addControl(this.rect3),this.image=new BABYLON.GUI.Image("but",n.AssetsManager.ins.resourceObject.images.gameScene.jiantou.src),this.image.width="30px",this.image.height="15px",this.image.scaleX=-1,this.image.top="192px",this.image.left="110px",this.image.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,this.image.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,this.rect2.addControl(this.image);for(var e=[],t=[],i=360,s=new BABYLON.GUI.Image("but",n.AssetsManager.ins.resourceObject.images.gameScene.jiantou2.src),o=0;o<=36;o++)(i-=30)<=0&&(i=360),e[o]=new BABYLON.GUI.Rectangle,e[o].verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,e[o].horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,e[o].top=50*o*3,e[o].left="-5px",e[o].width="300px",e[o].height="40px",e[o].thickness=0,this.rect3.addControl(e[o]),t[o]=new BABYLON.GUI.TextBlock,0==i||360==i?(t[o].text="0°",t[o].color="#ffffff"):(t[o].text=i+"°",t[o].color="#129604"),t[o].textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,t[o].fontSize="18px",e[o].addControl(t[o]),e[o].addControl(s);this.tipsBg=new BABYLON.GUI.Rectangle,this.tipsBg.alpha=.8,this.tipsBg.width="620px",this.tipsBg.height="140px",this.tipsBg.color="#009855",this.tipsBg.background="#444444",this.tipsBg.alpha=.2,this.tipsBg.top="20px",this.tipsBg.thickness=1,this.tipsBg.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,this.tipsBg.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,this.tipsText=new BABYLON.GUI.TextBlock,this.tipsText.width="600px",this.tipsText.height="140px",this.tipsText.color="#ffffff",this.tipsText.fontSize="14px",this.tipsText.text="提示",this.tipsText.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,this.tipsText.top="20px",this.tipsText.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,this.ico_bg=new BABYLON.GUI.Image("ico_bg",n.AssetsManager.ins.resourceObject.images.gameScene.ico_bg.src),this.ico_bg.width="200px",this.ico_bg.height="200px",this.ico_bg.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,this.ico_bg.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,this.ico_b=new BABYLON.GUI.Image("ico_b",n.AssetsManager.ins.resourceObject.images.gameScene.ico_b.src),this.ico_b.width="90px",this.ico_b.height="90px",this.ico_b.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_CENTER,this.ico_b.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;var a=new BABYLON.GUI.Rectangle;a.top="30%",a.left="30%",a.alpha=.9,a.thickness=0,a.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM,a.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,a.addControl(this.ico_bg),a.addControl(this.ico_b),this.display.advancedTexture.addControl(this.rect2),this.display.advancedTexture.addControl(this.tipsBg),this.display.advancedTexture.addControl(this.tipsText),this.display.advancedTexture.addControl(a)},e.prototype.init=function(e){this.scene=s.SceneManager.ins.scene,this.display=e,this.creatUI(),this.addEvent(),this.creatMusic(),a.BoomCon.ins.init(this.display);var t=this.display.cameraBox.position,i=new BABYLON.Vector3(0,0,1),n=(i=o.Func.ins.vecToLocal(i,this.display.cameraBox)).subtract(t);n=BABYLON.Vector3.Normalize(n),this.ray=new BABYLON.Ray(t,n,300)},e.prototype.addEvent=function(){var e=this;this.freeView=!1,document.addEventListener("keydown",function(t){t.keyCode,32==t.keyCode&&(e.freeView=!0)}),document.addEventListener("keyup",function(t){32==t.keyCode&&(e.freeView=!1)}),this.keyevent()},e.prototype.update=function(e){this.rect2.linkWithMesh(this.display.pickMesh),this.times=e,this._s=this.moveX,0==this.freeView?(this.display.cameraBox.rotation.z=.001*-this.moveX,this.display.camera2.rotation=new BABYLON.Vector3(.3,2*-Math.PI,0),(this.moveY>=50||this.moveY<=-50)&&(this.display.cameraBox.rotation.x>=.5*Math.PI?this.display.cameraBox.rotation.x=.5*Math.PI-1e-9:this.display.cameraBox.rotation.x<=.5*-Math.PI?this.display.cameraBox.rotation.x=.5*-Math.PI+1e-9:this.display.cameraBox.rotation.x-=this.moveY/8e4*this.times,this.musics.zhanji.setPlaybackRate(this.display.cameraBox.rotation.x/10+1)),this.display.cameraBox.rotation.x>2*Math.PI&&(this.display.cameraBox.rotation.x=0),this.display.cameraBox.rotation.x<=2*-Math.PI&&(this.display.cameraBox.rotation.x=0),this.display.camera2.detachControl(s.SceneManager.ins.canvas),this.display.camera5.detachControl(s.SceneManager.ins.canvas),1==this.viewState&&(this.scene.activeCamera=this.display.camera3)):(this.display.camera2.attachControl(s.SceneManager.ins.canvas),1==this.viewState&&(this.display.camera5.target=this.display.cameraBox.position,this.display.camera5.attachControl(s.SceneManager.ins.canvas),this.display.camera5.radius=20,this.scene.activeCamera=this.display.camera5)),this.character=this.display.cameraBox,this.canardUpdate(),this.empennageUpdate(),this.wingsUpdate(),this.airflowUpdate(),this.rect2.rotation=-this.display.cameraBox.rotation.z,this.moveX/8e4>=.05?this.display.cameraBox.rotation.y+=.05*this.times:this.moveX/8e4<=-.05?this.display.cameraBox.rotation.y+=-.05*this.times:this.display.cameraBox.rotation.y+=this.moveX/8e4*this.times,this.rect3.top=-1460-1800*this.display.cameraBox.rotation.x/(2*Math.PI)+"px",this.display.cameraBox.rotation.z;var t=new BABYLON.Vector3(2*this.character.forward.x*this.times*this.flySpeed,2*this.character.forward.y*this.times*this.flySpeed,2*this.character.forward.z*this.times*this.flySpeed);this.character.moveWithCollisions(t),this.obstacleDetection()},e.prototype.obstacleDetection=function(){var e=this,t=this.display.cameraBox.position;if(this.obstacleCount>=5&&(this.obstacleCount=0),0==this.obstacleCount)var i=new BABYLON.Vector3(0,-1e3,0);1==this.obstacleCount&&(i=new BABYLON.Vector3(0,1e3,0)),2==this.obstacleCount&&(i=new BABYLON.Vector3(0,0,1e3)),3==this.obstacleCount&&(i=new BABYLON.Vector3(-1e3,0,0)),4==this.obstacleCount&&(i=new BABYLON.Vector3(1e3,0,0));var n=(i=o.Func.ins.vecToLocal(i,this.display.cameraBox)).subtract(t);n=BABYLON.Vector3.Normalize(n),this.ray.origin=t,this.ray.direction=n,this.hit=this.scene.pickWithRay(this.ray),0==this.obstacleCount&&this.pickCall(function(t){e.warnings[0]=1,e.warningText=r.Language.ins.languageList.dmzj[localStorage.language].replace("${0}",parseInt(t.toString()))},function(){e.warnings[0]=0},this.obstacleCount),1==this.obstacleCount&&this.pickCall(function(t){e.warnings[1]=1,e.warningText=r.Language.ins.languageList.dbzj[localStorage.language].replace("${0}",parseInt(t.toString()))},function(){e.warnings[1]=0},this.obstacleCount),2==this.obstacleCount&&this.pickCall(function(t){e.warnings[2]=1,e.warningText=r.Language.ins.languageList.qfzj[localStorage.language].replace("${0}",parseInt(t.toString()))},function(){e.warnings[2]=0},this.obstacleCount),3==this.obstacleCount&&this.pickCall(function(t){e.warnings[3]=1,e.warningText=r.Language.ins.languageList.zfzj[localStorage.language].replace("${0}",parseInt(t.toString()))},function(){e.warnings[3]=0},this.obstacleCount),4==this.obstacleCount&&this.pickCall(function(t){e.warnings[4]=1,e.warningText=r.Language.ins.languageList.yfzj[localStorage.language].replace("${0}",parseInt(t.toString()))},function(){e.warnings[4]=0},this.obstacleCount),this.obstacleCount++,this.warnings.some(function(e){return 1===e})?(this.jl>50?(this.musics.win.setVolume(0),this.musics.win2.setVolume(2)):(this.musics.win.setVolume(2),this.musics.win2.setVolume(0)),this.jl<=10&&(this.flyLife=!1,a.BoomCon.ins.boom(this.display.cameraBox.position),this.musics.win.setVolume(0),this.musics.win2.setVolume(0),this.scene.getMeshByName("__root__").scaling=new BABYLON.Vector3(0,0,0))):(this.musics.win.setVolume(0),this.musics.win2.setVolume(0)),this.sayWarning()},e.prototype.pickCall=function(e,t,i){if(this.hit.pickedMesh){var n=o.Func.ins.getDistance(this.hit.pickedPoint.x,this.hit.pickedPoint.y,this.hit.pickedPoint.z,this.display.cameraBox.position.x,this.display.cameraBox.position.y,this.display.cameraBox.position.z);n<=100?(e(n),this.jl=n):(t(),this.warningText="")}else t(),this.warningText=""},e.prototype.sayWarning=function(){if(0==window.speechSynthesis.speaking){if(localStorage.msg=this.warningText,""!=this.warningText){var e=new SpeechSynthesisUtterance(this.warningText);"chinese"!=localStorage.language&&(e.lang="en"),window.speechSynthesis.speak(e)}this.tipsText.text=localStorage.msg}else this.tipsText.text=localStorage.msg;""==this.tipsText.text?this.tipsBg.alpha=0:this.tipsBg.alpha=.4},e.prototype.keyevent=function(){var e=this;document.addEventListener("click",function(t){2==t.button&&e.viewCtrl()});var t=!0;if(this.scene.beginAnimation(this.scene.getMeshByName("前轮"),0,.7916666865348816,!1),this.scene.beginAnimation(this.scene.getMeshByName("后轮"),0,.7916666865348816,!1),this.scene.beginAnimation(this.scene.getMeshByName("后轮.001"),0,.7916666865348816,!1),document.addEventListener("keydown",function(i){82==i.keyCode&&((t=!t)?(e.scene.beginAnimation(e.scene.getMeshByName("前轮"),0,.7916666865348816,!1),e.scene.beginAnimation(e.scene.getMeshByName("后轮"),0,.7916666865348816,!1),e.scene.beginAnimation(e.scene.getMeshByName("后轮.001"),0,.7916666865348816,!1)):(e.scene.beginAnimation(e.scene.getMeshByName("前轮"),.7916666865348816,1.625,!1),e.scene.beginAnimation(e.scene.getMeshByName("后轮"),.7916666865348816,1.625,!1),e.scene.beginAnimation(e.scene.getMeshByName("后轮.001"),.7916666865348816,1.625,!1))),65==i.keyCode&&(e.leftState=!0,e.rightState=!1),68==i.keyCode&&(e.leftState=!1,e.rightState=!0)}),document.addEventListener("keyup",function(t){65==t.keyCode&&(e.leftState=!1),68==t.keyCode&&(e.rightState=!1)}),this.eleImage=document.getElementById("renderCanvas"),this.eleImage){var i=function(t){if(0==e.freeView){var i=e.moveX+t.movementX,n=e.moveY+t.movementY;i>=2e3||i<=-2e3?(e.moveX=e.moveX,i=e.moveX):e.moveX=i,e.moveX=i,n>=1500||n<=-1500?(e.moveY=e.moveY,n=e.moveY):e.moveY=n,.001*e.moveX>2*Math.PI&&(e.moveX=0),.001*e.moveX<=2*-Math.PI&&(e.moveX=0),e.ico_b.top=e.moveY/30,e.ico_b.left=e.moveX/30}};this.eleImage.addEventListener("click",function(t){e.eleImage.requestPointerLock()}),document.addEventListener("pointerlockchange",function(){document.pointerLockElement==e.eleImage?document.addEventListener("mousemove",i,!1):document.removeEventListener("mousemove",i,!1)},!1)}},e.prototype.setMeshVal=function(e,t,i){var n=[];n["up-go"+e.name]=this.scene.beginWeightedAnimation(e,0,.7916666865348816*i,0,!1),n["up-back"+e.name]=this.scene.beginWeightedAnimation(e,.7916666865348816,1.625*i,0,!1),n["down-go"+e.name]=this.scene.beginWeightedAnimation(e,1.625,2.4583332538604736*i,0,!1),n["down-back"+e.name]=this.scene.beginWeightedAnimation(e,2.4583332538604736,3.2916667461395264*i,0,!1),n["back"+e.name]=this.scene.beginWeightedAnimation(e,3*i,3.2916667461395264*i,0,!1),this.flayState[e.name]=t,"up-go"==t&&(n["up-go"+e.name].weight=1,n["up-back"+e.name].weight=0,n["down-go"+e.name].weight=0,n["down-go"+e.name].weight=0,n["back"+e.name].weight=0),"up-back"==t&&(n["up-go"+e.name].weight=0,n["up-back"+e.name].weight=1,n["down-go"+e.name].weight=0,n["down-go"+e.name].weight=0,n["back"+e.name].weight=0),"down-go"==t&&(n["up-go"+e.name].weight=0,n["up-back"+e.name].weight=0,n["down-go"+e.name].weight=1,n["down-back"+e.name].weight=0,n["back"+e.name].weight=0),"down-back"==t&&(n["up-go"+e.name].weight=0,n["up-back"+e.name].weight=0,n["down-go"+e.name].weight=0,n["down-back"+e.name].weight=1,n["back"+e.name].weight=0),"back"==t&&(n["up-go"+e.name].weight=0,n["up-back"+e.name].weight=0,n["down-go"+e.name].weight=0,n["down-back"+e.name].weight=0,n["back"+e.name].weight=1)},e.prototype.canardUpdate=function(){this.display.cameraBox.rotation.x>.1&&("up-go"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"up-go",1),"up-go"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"up-go",1)),this.display.cameraBox.rotation.x<-.1&&("down-go"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"down-go",1),"down-go"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"down-go",1)),this.display.cameraBox.rotation.x>=-.1&&this.display.cameraBox.rotation.x<=.1&&("down-go"==this.flayState["鸭翼左"]&&"down-back"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"down-back",1),"up-go"==this.flayState["鸭翼左"]&&"up-back"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"up-back",1),"down-go"==this.flayState["鸭翼右"]&&"down-back"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"down-back",1),"up-go"==this.flayState["鸭翼右"]&&"up-back"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"up-back",1))},e.prototype.empennageUpdate=function(){this.display.cameraBox.rotation.z>.3&&"up-go"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"up-go",1),this.display.cameraBox.rotation.z<-.3&&"down-go"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"down-go",1),this.display.cameraBox.rotation.z>=-.3&&this.display.cameraBox.rotation.z<=.3&&("down-go"==this.flayState["尾翼"]&&"down-back"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"down-back",1),"up-go"==this.flayState["尾翼"]&&"up-back"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"up-back",1))},e.prototype.wingsUpdate=function(){this._s>this.moveX&&("up-go"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"up-go",1),"down-go"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"down-go",1)),this._s<this.moveX&&("down-go"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"down-go",1),"up-go"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"up-go",1)),this._s==this.moveX&&("down-go"==this.flayState["右翼"]&&"down-back"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"down-back",1),"up-go"==this.flayState["右翼"]&&"up-back"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"up-back",1),"down-go"==this.flayState["左翼"]&&"down-back"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"down-back",1),"up-go"==this.flayState["左翼"]&&"up-back"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"up-back",1))},e.prototype.airflowUpdate=function(){this.display.cameraBox.rotation.x>.1&&this.airflowCon(!1),this.display.cameraBox.rotation.x<-.1&&this.airflowCon(!0),this.display.cameraBox.rotation.x>=-.1&&this.display.cameraBox.rotation.x<=.1&&this.airflowCon(!1)},e.prototype.airflowCon=function(e){var t=this;this.airflowConState!=e&&(clearInterval(this.airflowConTime),e?this.airflowConTime=setInterval(function(){t.scene.getMeshByName("气流1").isVisible=!t.scene.getMeshByName("气流1").isVisible,t.scene.getMeshByName("气流2").isVisible=!t.scene.getMeshByName("气流2").isVisible},30):(this.scene.getMeshByName("气流1").isVisible=!1,this.scene.getMeshByName("气流2").isVisible=!1),this.airflowConState=e)},e.prototype.viewCtrl=function(){this.viewState=!this.viewState,1==this.viewState?(this.scene.activeCamera=this.display.camera3,this.scene.getMeshByName("驾驶员头").isVisible=!0,this.musics.zhanji.setVolume(1)):(this.scene.activeCamera=this.display.camera2,this.musics.zhanji.setVolume(.5),this.scene.getMeshByName("驾驶员头").isVisible=!1)},e}();t.FlyCon=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(0),o=i(0),a=function(){function e(){this.bullets=[],this.booms=[],this.fireSpeed=6,this.particleeExhausts=[],this.tailFlowers=[],this.ij=0}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatMusic=function(){this.musics={qiang:new BABYLON.Sound("daodan",[n.AssetsManager.ins.resourceObject.binarys.gameScene.boom.url],this.scene,function(){},{loop:!1})}},e.prototype.creatUI=function(){},e.prototype.init=function(e){this.scene=s.SceneManager.ins.scene,this.display=e,this.creatUI(),this.creatMusic(),this.particleeExhaust=BABYLON.ParticleHelper.CreateDefault(new BABYLON.Vector3(0,0,0),100),this.particleeExhaust.emitRate=500,this.particleeExhaust.minSize=6,this.particleeExhaust.maxSize=24,this.particleeExhaust.minLifeTime=1,this.particleeExhaust.maxLifeTime=3,this.particleeExhaust.minEmitPower=30,this.particleeExhaust.maxEmitPower=110,this.particleeExhaust.addLimitVelocityGradient(0,40),this.particleeExhaust.addLimitVelocityGradient(.12,12.983),this.particleeExhaust.addLimitVelocityGradient(.445,1.78),this.particleeExhaust.addLimitVelocityGradient(.691,.502),this.particleeExhaust.addLimitVelocityGradient(.93,.05),this.particleeExhaust.addLimitVelocityGradient(1,0),this.particleeExhaust.limitVelocityDamping=.9,this.particleeExhaust.minInitialRotation=-Math.PI/2,this.particleeExhaust.maxInitialRotation=Math.PI/2,this.particleeExhaust.particleTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.yun,this.particleeExhaust.blendMode=BABYLON.ParticleSystem.BLENDMODE_MULTIPLYADD,this.particleeExhaust.addColorGradient(0,new BABYLON.Color4(1,1,1,0)),this.particleeExhaust.addColorGradient(.1,new BABYLON.Color4(1,1,1,1)),this.particleeExhaust.addColorGradient(.9,new BABYLON.Color4(1,1,1,1)),this.particleeExhaust.addColorGradient(1,new BABYLON.Color4(1,1,1,0)),this.particleeExhaust.addRampGradient(0,new BABYLON.Color3(1,1,1)),this.particleeExhaust.addRampGradient(.09,new BABYLON.Color3(209/255,.8,15/255)),this.particleeExhaust.addRampGradient(.18,new BABYLON.Color3(221/255,120/255,14/255)),this.particleeExhaust.addRampGradient(.28,new BABYLON.Color3(200/255,43/255,18/255)),this.particleeExhaust.addRampGradient(.47,new BABYLON.Color3(115/255,22/255,15/255)),this.particleeExhaust.addRampGradient(.88,new BABYLON.Color3(14/255,14/255,14/255)),this.particleeExhaust.addRampGradient(1,new BABYLON.Color3(14/255,14/255,14/255)),this.particleeExhaust.useRampGradients=!0,this.particleeExhaust.addColorRemapGradient(0,0,.1),this.particleeExhaust.addColorRemapGradient(.2,.1,.8),this.particleeExhaust.addColorRemapGradient(.3,.2,.85),this.particleeExhaust.addColorRemapGradient(.35,.4,.85),this.particleeExhaust.addColorRemapGradient(.4,.5,.9),this.particleeExhaust.addColorRemapGradient(.5,.95,1),this.particleeExhaust.addColorRemapGradient(1,.95,1),this.particleeExhaust.start(10),this.particleeExhaust.targetStopDuration=.4,this.particleeExhaust.updateSpeed=1/60,this.particleeExhaust.renderingGroupId=1;for(var t=0;t<=10;t++)this.particleeExhausts[t]=this.particleeExhaust.clone("s",1),this.tailFlowers[t]=new o.particleCon(new BABYLON.Vector3(0,0,0),s.SceneManager.ins.scene,this.particleeExhausts[t]),this.tailFlowers[t].Position(new BABYLON.Vector3(0,0,0))},e.prototype.boom=function(e){var t=this;this.tailFlowers[this.ij].Position(e),this.tailFlowers[this.ij].start(),this.musics.qiang.play(),console.log("爆炸前");var i=this.ij;setTimeout(function(){t.tailFlowers[i].stop()},2e3),this.ij<10?this.ij++:this.ij=0},e}();t.BoomCon=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(0),o=i(0),a=function(){function e(){this.bullets=[],this.booms=[],this.fireSpeed=3,this.particleeExhausts=[],this.tailFlowers=[]}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatMusic=function(){this.musics={qiang:new BABYLON.Sound("daodan",[n.AssetsManager.ins.resourceObject.binarys.gameScene.dan.url],this.scene,function(){},{loop:!1})}},e.prototype.creatUI=function(){},e.prototype.init=function(e){this.scene=s.SceneManager.ins.scene,this.display=e,this.creatUI(),this.addEvent(),this.creatMusic(),this.particleeExhaust=new BABYLON.ParticleSystem("particles",100,this.scene),this.particleeExhaust.particleTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.yun,this.particleeExhaust.minEmitBox=new BABYLON.Vector3(0,0,0),this.particleeExhaust.maxEmitBox=new BABYLON.Vector3(-0,-0,-0),this.particleeExhaust.color1=new BABYLON.Color4(100/255,100/255,100/255,.5),this.particleeExhaust.color2=new BABYLON.Color4(100/255,100/255,100/255,.5),this.particleeExhaust.colorDead=new BABYLON.Color4(0,0,0,0),this.particleeExhaust.minSize=1,this.particleeExhaust.maxSize=3,this.particleeExhaust.minLifeTime=10,this.particleeExhaust.maxLifeTime=10,this.particleeExhaust.emitRate=10,this.particleeExhaust.blendMode=BABYLON.ParticleSystem.BLENDMODE_MULTIPLYADD,this.particleeExhaust.direction1=new BABYLON.Vector3(-.4,.3,-1),this.particleeExhaust.direction2=new BABYLON.Vector3(.4,.3,-1),this.particleeExhaust.minEmitPower=.5,this.particleeExhaust.maxEmitPower=.5,this.particleeExhaust.updateSpeed=.5;for(var t=0;t<=10;t++)this.bullets[t]=BABYLON.MeshBuilder.CreateSphere("frees",{diameterX:1,diameterY:1,diameterZ:1},this.scene),this.bullets[t].lifeState=!1,this.bullets[t].isPickable=!1,this.bullets[t].material=this.display.freeMateial,this.bullets[t].checkCollisions=!1,this.particleeExhausts[t]=this.particleeExhaust.clone("s",1),this.tailFlowers[t]=new n.particleCon(new BABYLON.Vector3(0,0,0),s.SceneManager.ins.scene,this.particleeExhausts[t]),this.tailFlowers[t].Position(new BABYLON.Vector3(0,0,-.6)),this.tailFlowers[t].Parent(this.bullets[t])},e.prototype.addEvent=function(){var e,t=this;this.freeState=!1,document.addEventListener("mousedown",function(e){0==e.button&&(t.freeState=!0)}),document.addEventListener("mouseup",function(e){0==e.button&&(t.freeState=!1)}),document.addEventListener("keydown",function(i){document.addEventListener("keydown",function(i){if(69==i.keyCode){clearInterval(e);var n=0;e=setInterval(function(){t.musics.qiang.play();var i=Math.random()/100;t.j<=t.bullets.length-1?(t.tailFlowers[t.j].start(),t.bullets[t.j].position=new BABYLON.Vector3(t.display.cameraBox.absolutePosition.x+i,t.display.cameraBox.absolutePosition.y+i-2,t.display.cameraBox.absolutePosition.z),t.bullets[t.j].rotation=new BABYLON.Vector3(t.display.cameraBox.rotation.x+i,t.display.cameraBox.rotation.y+i,t.display.cameraBox.rotation.z),t.bullets[t.j].lifeState=!0,t.j++):(t.j=0,t.tailFlowers[t.j].start(),t.bullets[t.j].position=new BABYLON.Vector3(t.display.cameraBox.absolutePosition.x,t.display.cameraBox.absolutePosition.y-2,t.display.cameraBox.absolutePosition.z),t.bullets[t.j].rotation=new BABYLON.Vector3(t.display.cameraBox.rotation.x,t.display.cameraBox.rotation.y,t.display.cameraBox.rotation.z),t.bullets[t.j].lifeState=!0),++n>=10&&clearInterval(e)},150)}})})},e.prototype.boom=function(e,t){var i=this;this.booms[e].position=new BABYLON.Vector3(t.position.x,t.position.y,t.position.z),this.booms[e].scaling.x=10,this.booms[e].scaling.y=10,this.booms[e].scaling.z=10,this.booms[e].boom.to({x:1,y:1,z:1},1e3),this.booms[e].boom.start(),this.booms[e].boom.onComplete(function(){i.booms[e].scaling.x=0,i.booms[e].scaling.y=0,i.booms[e].scaling.z=0})},e.prototype.update=function(e){var t=this;this.times=e,Math.random,this.bullets.forEach(function(e,i){if(1==e.lifeState){var n=new BABYLON.Vector3(e.forward.x*t.times*t.fireSpeed,e.forward.y*t.times*t.fireSpeed,e.forward.z*t.times*t.fireSpeed);e.moveWithCollisions(n),e.isVisible=!0,e.boomPosition&&o.Func.ins.getDistance(e.position.x,e.position.y,e.position.z,e.boomPosition.x,e.boomPosition.y,e.boomPosition.z)<=50&&(e.lifeState=!1,t.tailFlowers[i].stop(),e.boomPosition=null),o.Func.ins.getDistance(e.position.x,e.position.y,e.position.z,t.display.cameraBox.position.x,t.display.cameraBox.position.y,t.display.cameraBox.position.z)>=3e3&&(e.lifeState=!1,e.boomPosition=null,t.tailFlowers[i].stop())}else e.isVisible=!1})},e}();t.HotDecoyFlareCon=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),s=i(0),o=i(0),a=function(){function e(){this.bullets=[],this.booms=[],this.fireSpeed=6,this.particleeExhausts=[],this.tailFlowers=[]}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatMusic=function(){this.musics={qiang:new BABYLON.Sound("daodan",[n.AssetsManager.ins.resourceObject.binarys.gameScene.daodan.url],this.scene,function(){},{loop:!1})}},e.prototype.creatUI=function(){this.starUi=new BABYLON.GUI.Rectangle,this.starUi.width="30px",this.starUi.height="30px",this.starUi.alpha=.8,this.starUi.thickness=0,this.display.advancedTexture.addControl(this.starUi),this.image2=new BABYLON.GUI.Image("but",n.AssetsManager.ins.resourceObject.images.gameScene.jiantou3.src),this.starUi.addControl(this.image2)},e.prototype.init=function(e){this.scene=s.SceneManager.ins.scene,this.display=e,this.creatUI(),this.addEvent(),this.creatMusic(),this.scene.getMeshByName("导弹").isVisible=!1,this.particleeExhaust=new BABYLON.ParticleSystem("particles",2e3,this.scene),this.particleeExhaust.particleTexture=n.AssetsManager.ins.resourceObject.textures.gameScene.yun,this.particleeExhaust.minEmitBox=new BABYLON.Vector3(0,0,0),this.particleeExhaust.maxEmitBox=new BABYLON.Vector3(-0,-0,-0),this.particleeExhaust.color1=new BABYLON.Color4(100/255,100/255,100/255,.5),this.particleeExhaust.color2=new BABYLON.Color4(100/255,100/255,100/255,.5),this.particleeExhaust.colorDead=new BABYLON.Color4(0,0,0,0),this.particleeExhaust.minSize=2,this.particleeExhaust.maxSize=5,this.particleeExhaust.minLifeTime=50,this.particleeExhaust.maxLifeTime=50,this.particleeExhaust.emitRate=10,this.particleeExhaust.blendMode=BABYLON.ParticleSystem.BLENDMODE_MULTIPLYADD,this.particleeExhaust.direction1=new BABYLON.Vector3(-.4,3,-10.5),this.particleeExhaust.direction2=new BABYLON.Vector3(.4,3,-10.5),this.particleeExhaust.minEmitPower=.5,this.particleeExhaust.maxEmitPower=.5,this.particleeExhaust.updateSpeed=.5,this.boomSprite=new BABYLON.SpriteManager("treesManager",n.AssetsManager.ins.resourceObject.images.gameScene.boom3.src,10,{width:200,height:200},this.scene);for(var t=0;t<=10;t++){this.bullets[t]=BABYLON.MeshBuilder.CreateSphere("frees",{diameterX:1,diameterY:1,diameterZ:30},this.scene),this.bullets[t].lifeState=!1,this.bullets[t].isPickable=!1,this.bullets[t].material=this.display.freeMateial,this.bullets[t].checkCollisions=!1;var i=this.scene.getMeshByName("导弹").clone();i.parent=this.bullets[t],i.position=new BABYLON.Vector3(0,0,16),i.rotation=new BABYLON.Vector3(0,1*-Math.PI,0),i.isPickable=!1,i.isVisible=!0,i.checkCollisions=!1,i.scaling=new BABYLON.Vector3(2,2,2),this.particleeExhausts[t]=this.particleeExhaust.clone("s",1),this.tailFlowers[t]=new o.particleCon(new BABYLON.Vector3(0,0,0),s.SceneManager.ins.scene,this.particleeExhausts[t]),this.tailFlowers[t].Position(new BABYLON.Vector3(0,0,-.6)),this.tailFlowers[t].Parent(this.bullets[t])}for(t=0;t<=10;t++)this.booms[t]=new BABYLON.Sprite("player",this.boomSprite),this.booms[t].lifeState=!1,this.booms[t].isPickable=!1,this.booms[t].size=0,this.bullets[t].checkCollisions=!1;var a=this.display.cameraBox.position,r=new BABYLON.Vector3(0,0,1),c=(r=o.Func.ins.vecToLocal(r,this.display.cameraBox)).subtract(a);c=BABYLON.Vector3.Normalize(c),this.ray=new BABYLON.Ray(a,c,3e3)},e.prototype.addEvent=function(){var e=this;this.freeState=!1,document.addEventListener("mousedown",function(t){0==t.button&&(e.freeState=!0)}),document.addEventListener("mouseup",function(t){0==t.button&&(e.freeState=!1)}),document.addEventListener("keyup",function(t){81==t.keyCode&&(e.musics.qiang.play(),e.j<=e.bullets.length-1?(e.tailFlowers[e.j].start(),e.bullets[e.j].position=new BABYLON.Vector3(e.display.cameraBox.absolutePosition.x+0,e.display.cameraBox.absolutePosition.y+0,e.display.cameraBox.absolutePosition.z),e.bullets[e.j].rotation=new BABYLON.Vector3(e.display.cameraBox.rotation.x+0,e.display.cameraBox.rotation.y+0,e.display.cameraBox.rotation.z),e.bullets[e.j].lifeState=!0,e.j++):(e.j=0,e.tailFlowers[e.j].start(),e.bullets[e.j].position=new BABYLON.Vector3(e.display.cameraBox.absolutePosition.x,e.display.cameraBox.absolutePosition.y,e.display.cameraBox.absolutePosition.z),e.bullets[e.j].rotation=new BABYLON.Vector3(e.display.cameraBox.rotation.x,e.display.cameraBox.rotation.y,e.display.cameraBox.rotation.z),e.bullets[e.j].lifeState=!0))})},e.prototype.boom=function(e,t){var i=this;this.booms[e].isVisible=!0,this.booms[e].position=new BABYLON.Vector3(t.position.x,t.position.y,t.position.z),this.booms[e].size=160,this.booms[e].playAnimation(0,36,!1,10,function(){i.booms[e].size=0,i.booms[e].isVisible=!0})},e.prototype.update=function(e){var t=this;this.times=e;var i=this.display.cameraBox.position,n=new BABYLON.Vector3(0,0,1e3),s=(n=o.Func.ins.vecToLocal(n,this.display.cameraBox)).subtract(i);s=BABYLON.Vector3.Normalize(s),this.ray.origin=i,this.ray.direction=s,this.hit=this.scene.pickWithRay(this.ray),Math.random,this.hit.pickedMesh?this.starUi.moveToVector3(this.hit.pickedPoint,this.scene):this.starUi.linkWithMesh(this.display.pickMesh),this.bullets.forEach(function(e,i){if(1==e.lifeState){var n=new BABYLON.Vector3(e.forward.x*t.times*t.fireSpeed,e.forward.y*t.times*t.fireSpeed,e.forward.z*t.times*t.fireSpeed);e.moveWithCollisions(n),e.isVisible=!0,t.hit.pickedMesh&&(e.boomPosition||(e.boomPosition=new BABYLON.Vector3(t.hit.pickedPoint.x,t.hit.pickedPoint.y,t.hit.pickedPoint.z))),e.boomPosition&&o.Func.ins.getDistance(e.position.x,e.position.y,e.position.z,e.boomPosition.x,e.boomPosition.y,e.boomPosition.z)<=50&&(e.lifeState=!1,t.boom(i,e),t.tailFlowers[i].stop(),e.boomPosition=null),o.Func.ins.getDistance(e.position.x,e.position.y,e.position.z,t.display.cameraBox.position.x,t.display.cameraBox.position.y,t.display.cameraBox.position.z)>=3e3&&(e.lifeState=!1,e.boomPosition=null,t.boom(i,e),t.tailFlowers[i].stop())}else e.isVisible=!1})},e}();t.MissileCon=a},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=i(32),o=function(e){function t(){var t=e.call(this)||this;return t.scene=s.ExGameSceneGui.ins.guiObject.sceneChild,t.parent=s.ExGameSceneGui.ins.guiObject,t}return n(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){console.log("按键事件"),console.log(this.scene.btnLeft),document.body.appendChild(this.scene.viewNode),this.doEvents.viewReset=document.getElementById("button_reset").addEventListener("click",function(){location.reload()})},t.prototype.removeEvent=function(){if(document.getElementById("viewNode"))try{document.body.removeChild(this.scene.viewNode)}catch(e){console.log(e)}},t}(i(0).GameSceneGui);t.ExGameSceneGuiCon=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.creatUI()}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatUI=function(){this.parent=new BABYLON.GUI.Rectangle;var e='\n            <style>\n            .button-view{\n                position: fixed;\n                top: 20px;\n                left:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .button-view:active{\n              transform: scale(0.8);\n            }\n            .button-reset{\n                position: fixed;\n                top: 20px;\n                right:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .about-btn{\n                position: fixed;\n                bottom: 20px;\n                right:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            button:active{\n              transform: scale(0.8);\n            }\n            </style>\n            <button class="button-reset" id="button_reset">Back</button>\n            <div>\n            <button class="about-btn" onclick="window.location.href=\'https://github.com/renjianfeng/flightSimulator\'">About The Author And Github</button>\n            </div>\n        ',t=document.createElement("div");t.id="viewNode",t.innerHTML=e,this.parent.sceneChild={viewHtml:e,viewNode:t}},Object.defineProperty(e.prototype,"guiObject",{get:function(){return this.parent},enumerable:!0,configurable:!0}),e}();t.ExGameSceneGui=n},function(e,t,i){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var s=i(34),o=i(0),a=i(0),r=i(8),c=i(4),l=i(7),h=function(e){function t(){var t=e.call(this)||this;return t.scene=s.ExStartGui.ins.guiObject.sceneChild,t.parent=s.ExStartGui.ins.guiObject,t.gameSceneObject=r.ExGameSceneCon.ins,t}return n(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){localStorage.weatherState=a.WeatherState.RAIN_DAY,document.body.appendChild(this.scene.viewNode),this.doEvents.viewPlay=document.getElementById("button_play").addEventListener("click",this.onClick_startBtn.bind(this)),this.mapReset()},t.prototype.mapReset=function(){console.log(localStorage)},t.prototype.onClick_startBtn=function(){e.prototype.onClick_startBtn.call(this),l.GlobalManager.ins.openModule(c.ModuleName.GAME_PLAY_SCENE),this.removeEvent()},t.prototype.removeEvent=function(){if(e.prototype.removeEvent.call(this),document.getElementById("startNode"))try{document.body.removeChild(this.scene.viewNode)}catch(e){console.log(e)}},t}(o.StartGui);t.ExStartGuiCon=h},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.creatUI()}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatUI=function(){this.parent=new BABYLON.GUI.Rectangle;var e='\n            <style>\n            .button-play{\n                position: fixed;\n                top: 50%;\n                left:50%;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 42px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n                width: 200px;\n                height: 80px;\n                margin-left: -100px;\n                margin-top: 200px;\n            }\n            .button-play:active{\n              transform: scale(0.8);\n            }\n            .weather-config{\n                position: fixed;\n                top: 50%;\n                left:50%;\n                display: block;\n                background: #ffffff;\n                color: #82bab3;\n                border: 0px solid ;\n                font-size: 24px;\n                border-radius: 5px;\n                transform: scale(1);\n                width: 1000px;\n                height: 260px;\n                margin-left: -500px;\n                margin-top: -200px;\n                text-align: center;\n               \n            }\n            .weather-config ul li{\n                display: inline-block;\n                height: 200px;\n                width: 200px;\n                margin: 0px 5px;\n                border: 1px solid #cccccc;\n                cursor: pointer;\n                background-size: 100% 100%;\n                text-shadow: 0px 0px 5px #444;\n            }\n            \n            .weather-config ul li:hover{\n                border: 1px solid royalblue;\n            }\n            .we-active{\n                border: 3px solid #000 !important;\n                opacity: 0.8;\n            }\n            .yw-text{\n              font-size: 14px;\n            }\n            .box-tip{\n            margin-top: 60px;\n            }\n            \n            .map-list{\n                margin-top:-30px;\n                position: relative;\n                top: -30px;\n            }\n            .map-list select{\n                background: transparent;\n                padding: 7px;\n                color: #82bab3;\n                position: relative;\n                top: -2px;\n                font-size: 18px;\n                border-radius: 5px;\n                border: 1px solid #82bab3;\n            }\n            .box-tip{\n                background: rgba(0,0,0,0.2);\n                color: #ffffff;\n                padding: 10px;\n                font-size: 16px;\n                letter-spacing: 3px;\n                position: fixed;\n                bottom: 30px;\n                width:100%;\n                padding-left:20px;\n                text-align: center;\n            }\n\n            .about-btn{\n                position: fixed;\n                top: 20px;\n                left:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .game-bg{\n                position: fixed;\n                top: 0;\n                left:0;\n                width:100%;\n                height:100%;\n               // background-color: #349ccd;\n                background-size:100% 100%;\n            }\n            .logo{\n                position: fixed;\n                top: 5%;\n                left:50%;\n                width:500px;\n                height:160px;\n                margin-left:-250px;\n               \n                background-size:100% 100%;\n            }\n\n            </style>\n        \n            <div class="game-bg" id="GAME_BG">\n            <div>\n            <button class="about-btn" onclick="window.location.href=\'https://github.com/renjianfeng/flightSimulator\'">About The Author And Github</button>\n            </div>\n            \n            <button class="button-play" id="button_play">Play</button>\n           \n            </div>\n           \n        ',t=document.createElement("div");t.id="startNode",t.innerHTML=e,document.title="FlightSimulator(台风战机模拟驾驶)",this.parent.sceneChild={viewHtml:e,viewNode:t}},Object.defineProperty(e.prototype,"guiObject",{get:function(){return this.parent},enumerable:!0,configurable:!0}),e}();t.ExStartGui=n}]);
//# sourceMappingURL=hi.js.map