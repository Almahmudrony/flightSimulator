var Hi=function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(13);t.GameScenes=i.GameScenes;var o=n(4);t.ModuleName=o.ModuleName;var a=n(14);t.WeatherState=a.WeatherState;var s=n(15);t.AssetsManager=s.AssetsManager;var r=n(3);t.GuiManager=r.GuiManager;var c=n(2);t.SceneManager=c.SceneManager;var l=n(7);t.GlobalManager=l.GlobalManager;var u=n(16);t.AnimationCon=u.AnimationCon;var h=n(6);t.AnimationGui=h.AnimationGui;var p=n(17);t.particleCon=p.particleCon;var f=n(18);t.GuiCreate=f.GuiCreate;var d=n(19);t.Panels=d.Panels;var m=n(1);t.Module=m.Module;var g=n(20);t.Guis=g.Guis;var y=n(21);t.StartGui=y.StartGui;var b=n(22);t.GameSceneGui=b.GameSceneGui;var v=n(5);t.DisplayPool=v.DisplayPool},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.initUI=function(){},e.prototype.show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addEvent()},e.prototype.hide=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvent()},e.prototype.addEvent=function(){},e.prototype.removeEvent=function(){},e.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isInit||(this.initUI(),this.isInit=!0)},e.prototype.addClick=function(e,t){return e.onPointerUpObservable.add(t)},e.prototype.removeClick=function(e,t){e.onPointerUpObservable.remove(t)},e.prototype.delayEnable=function(e,t){e.mouseEnable=e.mouseChildren=!1,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(function(){this.timeoutId=0,e.mouseEnable=e.mouseChildren=!0},t||500)},e.prototype.dispose=function(){},e}();t.Module=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._canvas=document.querySelector("#renderCanvas"),this._engine=new BABYLON.Engine(this._canvas,!0,{deterministicLockstep:!0,lockstepMaxSteps:4});var e=function(){var e=new BABYLON.Scene(this._engine),t=e._onPointerUp,n=e._onPointerDown,i=e._onPointerMove,o=BABYLON.Tools.GetPointerPrefix();return this._canvas.removeEventListener(o+"move",i),this._canvas.removeEventListener(o+"down",n),window.removeEventListener(o+"up",t),e._onPointerUp=function(e){void 0!==e.pointerId&&t(e)},e._onPointerDown=function(e){void 0!==e.pointerId&&n(e)},e._onPointerMove=function(e){void 0!==e.pointerId&&i(e)},this._canvas.addEventListener(o+"move",e._onPointerMove,!1),this._canvas.addEventListener(o+"down",e._onPointerDown,!1),window.addEventListener(o+"up",e._onPointerUp,!1),new BABYLON.FreeCamera("baseCamera",new BABYLON.Vector3(0,0,0),e),e}.bind(this);this._scene=e(),this._engine.runRenderLoop(function(){this._scene.render(),TWEEN.update()}.bind(this)),window.addEventListener("resize",function(){this._engine.resize()}.bind(this))}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvas",{get:function(){return this._canvas},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"engine",{get:function(){return this._engine},enumerable:!0,configurable:!0}),e.prototype.change=function(e){},e}();t.SceneManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.guiPoll={},this._lastGui=null,this._fullscreenUI=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("GUI")}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.changeGui=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=this._fullscreenUI.rootContainer.children.length,o=0;o<i;o++)this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0]);this._fullscreenUI.addControl(e),this._lastGui=e},e.prototype.appendGui=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._fullscreenUI.addControl(e),this._lastGui=e},e.prototype.removeGui=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this._fullscreenUI.removeControl(this._lastGui)},e.prototype.removeAll=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=this._fullscreenUI.rootContainer.children.length,o=0;o<i;o++)this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])},e.prototype.openPanel=function(e){},e.prototype.closePanel=function(e){},Object.defineProperty(e.prototype,"fullscreenUI",{get:function(){return this._fullscreenUI},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastGui",{get:function(){return this._lastGui},enumerable:!0,configurable:!0}),e}();t.GuiManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.LOADING_GUI="LoadingScene",e.WAITING_PANEL="WaitingPanel",e.MSG_PANEL="MsgPanel",e.RULE_PANEL="RulePanel",e.LOSE_PANEL="LosePanel",e.GAME_START_GUI="GameStartScene",e.GAME_PLAY_SCENE="GamePlayScene",e.GAME_PLAY_GUI="GamePlayGui"}(t.ModuleName||(t.ModuleName={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.displayPool={}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e}();t.DisplayPool=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){this.show=function(e,t,n){var i=[];i.push({frame:0,value:.1}),i.push({frame:10,value:1});var o=new BABYLON.Animation("","scaleX",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);o.setKeys(i);var a=new BABYLON.Animation("","scaleY",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);a.setKeys(i),e.animations=[],e.animations.push(o,a),this.advancedTexture.addControl(e),t&&t(),this.scene.beginAnimation(e,0,10,!1,2,function(){n&&n()})},this.hide=function(e,t,n){var i=this,o=[];o.push({frame:0,value:1}),o.push({frame:10,value:.1});var a=new BABYLON.Animation("","scaleX",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);a.setKeys(o);var s=new BABYLON.Animation("","scaleY",30,BABYLON.Animation.ANIMATIONTYPE_FLOAT,BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);s.setKeys(o),e.animations=[],e.animations.push(a,s),t&&t(),this.scene.beginAnimation(e,0,10,!1,2,function(){i.advancedTexture.removeControl(e),n&&n()})},this.scene=e,this.advancedTexture=t};t.AnimationGui=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.openModule=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(t=i.DisplayPool.ins.displayPool[e]).show.apply(t,n)},e}();t.GlobalManager=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),a=n(0),s=n(0),r=n(23),c=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.importMeshes=[],t.frees=[],t.booms=[],t.viewState=!0,t.freeView=!1,t.moveForward=!1,t.moveBackward=!1,t.moveLeft=!1,t.moveRight=!1,t.canJump=!1,t.speedCharacter=-.5,t._s=0,t._s_y=0,t.moveX=0,t.moveY=0,t.flayState=[],t}return i(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.init=function(){a.DisplayPool.ins.displayPool[s.ModuleName.GAME_PLAY_SCENE]=this},t.prototype.resetGame=function(){var e=this;r.ExGameScene.ins.creatScene(),o.SceneManager.ins.scene,this.scene=o.SceneManager.ins.scene,this.display=r.ExGameScene.ins.display,o.SceneManager.ins.engine.displayLoadingUI(),o.SceneManager.ins.engine.loadingUIText="Initializing...",o.SceneManager.ins.engine.hideLoadingUI(),console.log("Pilot Head"),console.log(this.scene.getMaterialByName("Pilot Head"));var t=!0;setInterval(function(){(t=!t)?(e.scene.getMaterialByName("Pilot Head").emissiveColor=new BABYLON.Color3(.2,.2,.2),e.image.alpha=0):(e.scene.getMaterialByName("Pilot Head").emissiveColor=new BABYLON.Color3(.3,.3,.3),e.image.alpha=1)},10),setInterval(function(){e.scene.getMeshByName("灯").getChildMeshes(!1,function(e){e.isVisible=!0}),setTimeout(function(){e.scene.getMeshByName("灯").getChildMeshes(!1,function(e){e.isVisible=!1})},50)},1e3);var n=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI("UI");this.rect1=new BABYLON.GUI.Rectangle,this.rect1.width="90px",this.rect1.height="90px",this.rect1.alpha=.4,this.rect1.thickness=0,n.addControl(this.rect1),this.rect2=new BABYLON.GUI.Rectangle,this.rect2.alpha=.8,this.rect2.width="700px",this.rect2.height="400px",this.rect2.color="#009855",this.rect2.thickness=0,console.log(this.rect2),console.log("this.rect2"),this.rect3=new BABYLON.GUI.Rectangle,this.rect3.width="300px",this.rect3.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,this.rect3.height="10800px",this.rect3.top="0",this.rect3.left="10px",this.rect3.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER,this.rect3.thickness=0,this.rect2.addControl(this.rect3),this.image=new BABYLON.GUI.Image("but",o.AssetsManager.ins.resourceObject.images.gameScene.jiantou.src),this.image.width="30px",console.log("this.image"),console.log(this.image),this.image.height="15px",this.image.scaleX=-1,this.image.top="192px",this.image.left="110px",this.image.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,this.image.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,this.rect2.addControl(this.image);for(var i=[],a=[],s=[],c=0,l=0;l<=36;l++)console.log(l),(c+=30)>=360&&(c=0),i[l]=new BABYLON.GUI.Rectangle,i[l].verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,i[l].horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,i[l].top=50*l*3,i[l].width="300px",i[l].height="20px",i[l].thickness=0,this.rect3.addControl(i[l]),s[l]=new BABYLON.GUI.TextBlock,s[l].text=0==c?"水平："+c+"°":c+"°",s[l].color="#86a5ff",s[l].textHorizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,s[l].fontSize="14px",i[l].addControl(s[l]),a[l]=new BABYLON.GUI.Rectangle,a[l].horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,0==c?(a[l].left="80px",a[l].width="50px"):(a[l].left="50px",a[l].width="30px"),a[l].height="3px",a[l].background="#86a5ff",a[l].thickness=0,i[l].addControl(a[l]);n.addControl(this.rect2);var u=new BABYLON.GUI.Rectangle;u.width="90px",u.height="2px",u.background="#009855",u.thickness=0,this.rect1.addControl(u);var h=new BABYLON.GUI.Rectangle;h.width="2px",h.height="90px",h.background="#009855",h.thickness=0,this.rect1.addControl(h);var p=new BABYLON.GUI.Rectangle;for(p.width="40px",p.height="40px",p.color="#009855",p.thickness=2,this.rect1.addControl(p),this.scene.getMeshByName("气流1").material.backFaceCulling=!1,this.scene.getMeshByName("气流2").material.backFaceCulling=!1,this.scene.collisionsEnabled=!1,l=0;l<=60;l++)this.frees[l]=BABYLON.MeshBuilder.CreateBox("frees",{height:.2,width:.2,depth:5},this.scene),this.frees[l].lifeState=!1,this.frees[l].isPickable=!1,this.frees[l].material=this.display.freeMateial,this.frees[l].checkCollisions=!1;for(l=0;l<=60;l++)this.booms[l]=BABYLON.MeshBuilder.CreateSphere("boom",{diameter:10},this.scene),this.booms[l].lifeState=!1,this.booms[l].isPickable=!1,this.booms[l].material=this.display.boomMateial,this.frees[l].checkCollisions=!1;this.scene.meshes.forEach(function(e){e.checkCollisions=!1}),this.scene.fogMode=BABYLON.Scene.FOGMODE_EXP,this.scene.fogDensity=2e-4,this.scene.fogColor=new BABYLON.Color3(1,1,1);var f=new BABYLON.ReflectionProbe("main",64,this.scene);f.renderList.push(this.scene.getMeshByName("default")),f.renderList.push(this.scene.getMeshByName("skySphere")),f.refreshRate=BABYLON.RenderTargetTexture.REFRESHRATE_RENDER_ONCE,f.attachToMesh(this.display.cameraBox),this.scene.environmentTexture=o.AssetsManager.ins.resourceObject.cubeTextures.gameScene.skybox,this.scene.getMeshByName("__root__").getChildMeshes(!1,function(t){console.log(t),console.log(t.name),t.isPickable=!1,e.display.shadowGenerator.getShadowMap().renderList.push(t),t.receiveShadows=!0,t.material&&(t.material.backFaceCulling=!1,console.log("mesh.material"),console.log(t.material),t.material.usePhysicalLightFalloff=!1)}),this.scene.getMeshByName("__root__").parent=this.display.cameraBox,this.scene.getMeshByName("__root__").rotation.y=1*-Math.PI,this.scene.getMeshByName("__root__").position.y=-0,this.display.cameraBox.scaling=new BABYLON.Vector3(10,10,10),this.scene.getMeshByName("default").isPickable=!0,this.scene.getMeshByName("default").scaling=new BABYLON.Vector3(10,10,10),this.display.cameraBox.position.y=-10,this.display.camera.target=this.display.cameraBox.position,console.log("this.scene"),console.log(this.scene);var d=this.display.cameraBox.position,m=new BABYLON.Vector3(0,0,1),g=(m=this.vecToLocal(m,this.display.cameraBox)).subtract(d);g=BABYLON.Vector3.Normalize(g),this.ray=new BABYLON.Ray(d,g,1e3)},t.prototype.addEvent=function(){var e=this;this.freeState=!1,this.doEvents.BeforeRender=o.SceneManager.ins.scene.onBeforeRenderObservable.add(function(){e.beforeRender()}),document.addEventListener("keydown",function(t){t.keyCode,32==t.keyCode&&(e.freeView=!0)}),document.addEventListener("keyup",function(t){32==t.keyCode&&(e.freeView=!1)}),this.keyevent(),setInterval(function(){if(e.freeState){var t=Math.random()/50;e.j<=e.frees.length-1?(e.frees[e.j].position=new BABYLON.Vector3(e.display.cameraBox.absolutePosition.x+t,e.display.cameraBox.absolutePosition.y+t,e.display.cameraBox.absolutePosition.z),e.frees[e.j].rotation=new BABYLON.Vector3(e.display.cameraBox.rotation.x+t,e.display.cameraBox.rotation.y+t,e.display.cameraBox.rotation.z),e.frees[e.j].lifeState=!0,e.j++):(e.j=0,e.frees[e.j].position=new BABYLON.Vector3(e.display.cameraBox.absolutePosition.x,e.display.cameraBox.absolutePosition.y,e.display.cameraBox.absolutePosition.z),e.frees[e.j].rotation=new BABYLON.Vector3(e.display.cameraBox.rotation.x,e.display.cameraBox.rotation.y,e.display.cameraBox.rotation.z),e.frees[e.j].lifeState=!0)}},50)},t.prototype.beforeRender=function(){this.times=60/o.SceneManager.ins.engine.getFps(),this.movePlayer(),this.freeUpdate(),this._s=this.moveX},t.prototype.vecToLocal=function(e,t){var n=t.getWorldMatrix();return BABYLON.Vector3.TransformCoordinates(e,n)},t.prototype.freeUpdate=function(){var e=this,t=this.display.cameraBox.position,n=new BABYLON.Vector3(0,0,1),i=(n=this.vecToLocal(n,this.display.cameraBox)).subtract(t);i=BABYLON.Vector3.Normalize(i),this.ray.origin=t,this.ray.direction=i,this.hit=this.scene.pickWithRay(this.ray),Math.random,this.hit.pickedMesh?(this.rect1.moveToVector3(this.hit.pickedPoint,this.scene),this.rect1.isVisible=!0,this.rect2.color="#ffc107"):(this.rect1.isVisible=!1,this.rect2.color="#009855"),this.frees.forEach(function(t,n){if(1==t.lifeState){var i=new BABYLON.Vector3(10*t.forward.x*e.times,10*t.forward.y*e.times,10*t.forward.z*e.times);t.moveWithCollisions(i),t.isVisible=!0,e.hit.pickedMesh&&(t.boomPosition||(t.boomPosition=new BABYLON.Vector3(e.hit.pickedPoint.x,e.hit.pickedPoint.y,e.hit.pickedPoint.z))),t.boomPosition&&e.getDistance(t.position.x,t.position.y,t.position.z,t.boomPosition.x,t.boomPosition.y,t.boomPosition.z)<=50&&(t.lifeState=!1,e.booms[n].position=new BABYLON.Vector3(t.boomPosition.x,t.boomPosition.y,t.boomPosition.z),t.boomPosition=null),e.getDistance(t.position.x,t.position.y,t.position.z,e.display.cameraBox.position.x,e.display.cameraBox.position.y,e.display.cameraBox.position.z)>=600&&(t.lifeState=!1,t.boomPosition=null)}else t.isVisible=!1})},t.prototype.movePlayer=function(){0==this.freeView?(this.display.cameraBox.rotation.z=.001*-this.moveX,this.display.camera2.rotation=new BABYLON.Vector3(.3,2*-Math.PI,0),(this.moveY>=50||this.moveY<=-50)&&(this.display.cameraBox.rotation.x-=this.moveY/8e4*this.times),this.display.cameraBox.rotation.x>2*Math.PI&&(this.display.cameraBox.rotation.x=0),this.display.cameraBox.rotation.x<=2*-Math.PI&&(this.display.cameraBox.rotation.x=0),this.display.camera2.detachControl(o.SceneManager.ins.canvas)):this.display.camera2.attachControl(o.SceneManager.ins.canvas),this.character=this.display.cameraBox,this.canardUpdate(),this.empennageUpdate(),this.wingsUpdate(),this.airflowUpdate(),this.rect2.rotation=-this.display.cameraBox.rotation.z,this.display.cameraBox.rotation.y-=this.display.cameraBox.rotation.z/50*this.times,this.rect3.top=1800*this.display.cameraBox.rotation.x/(2*Math.PI)-1460+"px",this.display.cameraBox.rotation.z;var e=new BABYLON.Vector3(2*this.character.forward.x*this.times,2*this.character.forward.y*this.times,2*this.character.forward.z*this.times);this.character.moveWithCollisions(e)},t.prototype.keyevent=function(){var e=this;if(document.addEventListener("click",function(t){2==t.button&&(e.viewCtrl(),console.log(4566588))}),document.addEventListener("mousedown",function(t){0==t.button&&(e.freeState=!0)}),document.addEventListener("mouseup",function(t){0==t.button&&(e.freeState=!1)}),this.eleImage=document.getElementById("renderCanvas"),this.eleImage){var t=function(t){0==e.freeView&&(e.moveX=e.moveX+t.movementX,e.moveY=e.moveY+t.movementY,.001*e.moveX>2*Math.PI&&(e.moveX=0),.001*e.moveX<=2*-Math.PI&&(e.moveX=0))};this.eleImage.addEventListener("click",function(t){e.eleImage.requestPointerLock()}),document.addEventListener("pointerlockchange",function(){document.pointerLockElement==e.eleImage?document.addEventListener("mousemove",t,!1):document.removeEventListener("mousemove",t,!1)},!1)}},t.prototype.setMeshVal=function(e,t,n){var i=[];i["up-go"+e.name]=this.scene.beginWeightedAnimation(e,0,.7916666865348816*n,0,!1),i["up-back"+e.name]=this.scene.beginWeightedAnimation(e,.7916666865348816,1.625*n,0,!1),i["down-go"+e.name]=this.scene.beginWeightedAnimation(e,1.625,2.4583332538604736*n,0,!1),i["down-back"+e.name]=this.scene.beginWeightedAnimation(e,2.4583332538604736,3.2916667461395264*n,0,!1),i["back"+e.name]=this.scene.beginWeightedAnimation(e,3*n,3.2916667461395264*n,0,!1),this.flayState[e.name]=t,"up-go"==t&&(i["up-go"+e.name].weight=1,i["up-back"+e.name].weight=0,i["down-go"+e.name].weight=0,i["down-go"+e.name].weight=0,i["back"+e.name].weight=0),"up-back"==t&&(i["up-go"+e.name].weight=0,i["up-back"+e.name].weight=1,i["down-go"+e.name].weight=0,i["down-go"+e.name].weight=0,i["back"+e.name].weight=0),"down-go"==t&&(i["up-go"+e.name].weight=0,i["up-back"+e.name].weight=0,i["down-go"+e.name].weight=1,i["down-back"+e.name].weight=0,i["back"+e.name].weight=0),"down-back"==t&&(i["up-go"+e.name].weight=0,i["up-back"+e.name].weight=0,i["down-go"+e.name].weight=0,i["down-back"+e.name].weight=1,i["back"+e.name].weight=0),"back"==t&&(i["up-go"+e.name].weight=0,i["up-back"+e.name].weight=0,i["down-go"+e.name].weight=0,i["down-back"+e.name].weight=0,i["back"+e.name].weight=1,console.log("中"))},t.prototype.canardUpdate=function(){this.display.cameraBox.rotation.x>.1&&("up-go"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"up-go",1),"up-go"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"up-go",1)),this.display.cameraBox.rotation.x<-.1&&("down-go"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"down-go",1),"down-go"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"down-go",1)),this.display.cameraBox.rotation.x>=-.1&&this.display.cameraBox.rotation.x<=.1&&("down-go"==this.flayState["鸭翼左"]&&"down-back"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"down-back",1),"up-go"==this.flayState["鸭翼左"]&&"up-back"!=this.flayState["鸭翼左"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼左"),"up-back",1),"down-go"==this.flayState["鸭翼右"]&&"down-back"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"down-back",1),"up-go"==this.flayState["鸭翼右"]&&"up-back"!=this.flayState["鸭翼右"]&&this.setMeshVal(this.scene.getMeshByName("鸭翼右"),"up-back",1))},t.prototype.empennageUpdate=function(){this.display.cameraBox.rotation.z>.3&&"up-go"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"up-go",1),this.display.cameraBox.rotation.z<-.3&&"down-go"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"down-go",1),this.display.cameraBox.rotation.z>=-.3&&this.display.cameraBox.rotation.z<=.3&&("down-go"==this.flayState["尾翼"]&&"down-back"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"down-back",1),"up-go"==this.flayState["尾翼"]&&"up-back"!=this.flayState["尾翼"]&&this.setMeshVal(this.scene.getMeshByName("尾翼"),"up-back",1))},t.prototype.wingsUpdate=function(){this._s>this.moveX&&("up-go"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"up-go",1),"down-go"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"down-go",1)),this._s<this.moveX&&("down-go"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"down-go",1),"up-go"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"up-go",1)),this._s==this.moveX&&("down-go"==this.flayState["右翼"]&&"down-back"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"down-back",1),"up-go"==this.flayState["右翼"]&&"up-back"!=this.flayState["右翼"]&&this.setMeshVal(this.scene.getMeshByName("右翼"),"up-back",1),"down-go"==this.flayState["左翼"]&&"down-back"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"down-back",1),"up-go"==this.flayState["左翼"]&&"up-back"!=this.flayState["左翼"]&&this.setMeshVal(this.scene.getMeshByName("左翼"),"up-back",1))},t.prototype.getDistance=function(e,t,n,i,o,a){var s=Math.abs(e-i),r=Math.abs(t-o),c=Math.abs(n-a);return Math.sqrt(s*s+r*r+c*c)},t.prototype.airflowUpdate=function(){this.display.cameraBox.rotation.x>.1&&this.airflowCon(!1),this.display.cameraBox.rotation.x<-.1&&this.airflowCon(!0),this.display.cameraBox.rotation.x>=-.1&&this.display.cameraBox.rotation.x<=.1&&this.airflowCon(!1)},t.prototype.airflowCon=function(e){var t=this;this.airflowConState!=e&&(console.log("airflowCon"),clearInterval(this.airflowConTime),e?this.airflowConTime=setInterval(function(){t.scene.getMeshByName("气流1").isVisible=!t.scene.getMeshByName("气流1").isVisible,t.scene.getMeshByName("气流2").isVisible=!t.scene.getMeshByName("气流2").isVisible},30):(this.scene.getMeshByName("气流1").isVisible=!1,this.scene.getMeshByName("气流2").isVisible=!1),this.airflowConState=e)},t.prototype.viewCtrl=function(){this.viewState=!this.viewState,1==this.viewState?(this.scene.activeCamera=this.display.camera3,this.scene.getMeshByName("驾驶员头").isVisible=!0):(this.scene.activeCamera=this.display.camera2,this.scene.getMeshByName("驾驶员头").isVisible=!1)},t}(n(0).GameScenes);t.ExGameSceneCon=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10);window.addEventListener("load",function(){var e=navigator.userAgent,t=!e.match(/(iPad).*OS\s([\d_]+)/)&&e.match(/(iPhone\sOS)\s([\d_]+)/),n=e.match(/(Android)\s+([\d.]+)/);t||n?document.body.innerHTML='\n    <style>\n        body{\n        text-align: center;\n        font-size: 1rem;\n        color: #349ccd;\n        }\n\n    h1{\n    margin-top: 10rem;\n    }\n    </style> \n    <h1>Hi!</h1>\n    Please access through PC, mobile phone temporarily not supported!" <br>(请通过PC访问，手机暂时不支持！)':i.Before.ins.update()})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(12),a=n(0),s=n(0),r=n(0),c=n(0),l=n(0),u=n(8),h=n(24),p=n(26),f=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.update=function(){localStorage.map="1",localStorage.car_x=0,localStorage.car_y=151,localStorage.car_z=226,a.AssetsManager.ins.resourceData=i.ResourceCon.ins.resource,a.AssetsManager.ins.loadFile(["gameScene"],s.SceneManager.ins.scene,function(){this.initModule(),console.log(c.DisplayPool.ins.displayPool),r.GlobalManager.ins.openModule(l.ModuleName.GAME_START_GUI),o.SceneBeforeCall.ins.musicLoop()}.bind(this),function(e){console.log(e.loadCount)}.bind(this))},e.prototype.addEvent=function(){},e.prototype.initModule=function(){u.ExGameSceneCon.ins.init(),p.ExStartGuiCon.ins.init(),h.ExGameSceneGuiCon.ins.init()},e}();t.Before=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e;this.pathFirst=window.resPath,e={binarys:[{name:"rain",filePath:this.pathFirst+"src/Resource/gameScene/binarys/",fileName:"rain.mp4"}],images:[{name:"Bphl4qj",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"Bphl4qj.png"},{name:"HRsf4I5",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"HRsf4I5.png"},{name:"IIyZhcg",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"IIyZhcg.png"},{name:"it5c3Vr",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"it5c3Vr.png"},{name:"ty",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"ty.png"},{name:"XaJRD9j",filePath:this.pathFirst+"src/Resource/gameScene/textures/light/",fileName:"XaJRD9j.png"},{name:"after",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"after.jpg"},{name:"night",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"night.jpg"},{name:"rain",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"rain.jpg"},{name:"sun",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"sun.jpg"},{name:"map1",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_1.jpg"},{name:"map2",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_2.jpg"},{name:"map3",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"map_3.jpg"},{name:"logo",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"logo.png"},{name:"jiantou",filePath:this.pathFirst+"src/Resource/gameScene/images/ui/",fileName:"jiantou.png"}],models:[{name:"map3",filePath:this.pathFirst+"src/Resource/gameScene/models/height_m2/",fileName:"height_m22.babylon"},{name:"sm14",filePath:this.pathFirst+"src/Resource/gameScene/models/sm14/",fileName:"sm97.glb"}],textures:[{name:"grass",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"grass.png"},{name:"grass2",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"grass.jpg"},{name:"skybox13",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"skybox13.png"},{name:"ground",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"ground.jpg"},{name:"maptr",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"maptr.jpg"},{name:"maptr2",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"maptr5.jpg"},{name:"stainedGlass",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"stainedGlass.png"},{name:"waterbump",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"waterbump.png"},{name:"yu",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"yu.png"},{name:"lighting",filePath:this.pathFirst+"src/Resource/gameScene/textures/",fileName:"lighting4.png"}],cubeTextures:[{name:"skybox",filePath:this.pathFirst+"src/Resource/gameScene/cubeTextures/skybox/",fileName:"skybox"}]},this._resource={gameScene:e}}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resource",{get:function(){return this._resource},enumerable:!0,configurable:!0}),e}();t.ResourceCon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.musicLoop=function(){},e}();t.SceneBeforeCall=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(2),s=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.dispose=function(){var e;for(e in this.display)console.log(this.display[e]),this.display[e]&&this.display[e].dispose()},t.prototype.show=function(e){this.resetGame(),a.SceneManager.ins.change(this.display),this.addEvent()},t.prototype.resetGame=function(){},t.prototype.gameOver=function(){this.removeEvent()},t}(o.Module);t.GameScenes=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SUNNY_DAY=0]="SUNNY_DAY",e[e.RAIN_DAY=1]="RAIN_DAY",e[e.AFTERNOON_DAY=2]="AFTERNOON_DAY",e[e.NIGHT_DAY=3]="NIGHT_DAY"}(t.WeatherState||(t.WeatherState={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._resourceObject={binarys:{},images:{},models:{},textures:{},cubeTextures:{}},BABYLON.SceneLoader.OnPluginActivatedObservable.add(function(e){"gltf"===e.name&&e instanceof BABYLON.GLTFFileLoader&&(e.animationStartMode=BABYLON.GLTFLoaderAnimationStartMode.NONE,e.compileMaterials=!0)})}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resourceData",{set:function(e){this._resourceData=e},enumerable:!0,configurable:!0}),e.prototype.loadFile=function(e,t,n,i){var o=new BABYLON.AssetsManager(t);e.forEach(function(e){var t={};this._resourceData[e].models.forEach(function(n,i){o.addMeshTask("skull task","",n.filePath,n.fileName).onSuccess=function(i){console.log("meshTask"),console.log(i);var o=i;t[n.name]=o,this._resourceObject.models[e]=t}.bind(this)}.bind(this));var n={};this._resourceData[e].images.forEach(function(t){o.addImageTask("image task",t.filePath+t.fileName).onSuccess=function(i){n[t.name]=i.image,this._resourceObject.images[e]=n}.bind(this)}.bind(this));var i={};this._resourceData[e].textures.forEach(function(t){o.addTextureTask("texture task",t.filePath+t.fileName).onSuccess=function(n){i[t.name]=n.texture,this._resourceObject.textures[e]=i}.bind(this)}.bind(this));var a={};this._resourceData[e].binarys.forEach(function(t){o.addBinaryFileTask("binary task",t.filePath+t.fileName).onSuccess=function(n){console.log(6666677),a[t.name]=n.data,a[t.name].url=n.url,a[t.name].rootUrl=t.filePath,a[t.name].sceneFilename=t.fileName,this._resourceObject.binarys[e]=a,console.log(a[t.name])}.bind(this)}.bind(this));var s={};this._resourceData[e].cubeTextures.forEach(function(t){o.addCubeTextureTask("cubeTexture task",t.filePath+t.fileName).onSuccess=function(n){s[t.name]=n.texture,this._resourceObject.cubeTextures[e]=s}.bind(this)}.bind(this))}.bind(this)),o.load(),o.onProgress=function(e){var t={totalTasksCount:o._totalTasksCount,waitingTasksCount:o._waitingTasksCount,loadCount:(o._totalTasksCount-o._waitingTasksCount)/o._totalTasksCount};i(t)}.bind(this),o.onFinish=function(e){n()}.bind(this)},Object.defineProperty(e.prototype,"resourceObject",{get:function(){return this._resourceObject},enumerable:!0,configurable:!0}),e}();t.AssetsManager=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.animationBody=function(e,t){var n,i,o,a,s,r,c,l;n=null!=e.endattr?e.endattr:BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE,null!=e.mesh?i=e.mesh:(i=null,console.error("动画对象不能为空！")),null!=e.attr?o=e.attr:(o=null,console.error("动画对象属性不能为空！")),a=null!=e.speed?e.speed:10,s=null!=e.keys?e.keys:[],r=null!=e.endCall?e.endCall:function(){},c=null!=e.typeData?e.typedata:BABYLON.Animation.ANIMATIONTYPE_FLOAT,l=null!=e.loop&&e.loop;var u,h=new BABYLON.Animation("myAnimation",o,a,c,n);u=s,h.setKeys(u),i.animations.push(h),this.setbeginAnimation=t.beginAnimation(i,0,s[s.length-1].frame,l),this.setbeginAnimation.onAnimationEnd=function(){r()}},e.prototype.Pause=function(){this.setbeginAnimation.pause()},e.prototype.Reset=function(){this.setbeginAnimation.reset()},e.prototype.Speed=function(e){this.setbeginAnimation.speedRatio=e},e}();t.AnimationCon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.fountain=BABYLON.Mesh.CreateBox("fountain",1,t),this.fountain.isPickable=!1,this.fountain.visibility=0,this.fountain.rotation.x=.9*Math.PI,this.particleSystem=n,this.particleSystem.emitter=this.fountain,this.particleSystem.stop(),this.fountain.position=e}return e.prototype.start=function(){this.particleSystem.start()},e.prototype.stop=function(){this.particleSystem.stop()},e.prototype.Position=function(e){this.fountain.position=e},e.prototype.Parent=function(e){this.fountain.parent=e},e}();t.particleCon=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(){function e(){this.panelOut=new BABYLON.GUI.StackPanel}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.createList=function(e,t,n){var i,o=this,a=new BABYLON.GUI.Rectangle;for(var s in a.thickness=0,a.isPointerBlocker=!0,a.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP,a.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT,t)a[s]&&(a[s]=t[s]);return t&&t.isVertical?(this.panelOut.horizontalAlignment=2,this.panelOut.verticalAlignment=0,this.panelOut.isVertical=!0,(i={up:0,down:0}).up=parseInt(this.panelOut.top.toString()),a.onPointerDownObservable.add(function(e){i.down=e.y}),a.onPointerUpObservable.add(function(e){var t=parseInt(o.panelOut.top.toString());if(i.up=t,t>0)o.panelOut.top="0px",i.up=0;else if(parseInt(o.panelOut.top.toString())<parseInt(a.height.toString())-parseInt(o.panelOut.height.toString())){var s=(parseInt(a.height.toString())-parseInt(o.panelOut.height.toString()))*n;o.panelOut.top=s.toString()+"px",i.up=parseInt(o.panelOut.top)}}),a.onPointerMoveObservable.add(function(e){var t=e.y-i.down,a=(i.up+t)*n;o.panelOut.top=a.toString()+"px"})):(this.panelOut.horizontalAlignment=0,this.panelOut.verticalAlignment=2,this.panelOut.isVertical=!1,(i={up:0,down:0}).up=parseInt(this.panelOut.left.toString()),a.onPointerDownObservable.add(function(e){i.down=e.x}),a.onPointerUpObservable.add(function(e){var t=parseInt(o.panelOut.left.toString());if(i.up=t,t>0)o.panelOut.left="0px",i.up=0;else if(parseInt(o.panelOut.left.toString())<parseInt(a.width.toString())-parseInt(o.panelOut.width.toString())){var s=(parseInt(a.width.toString())-parseInt(o.panelOut.width.toString()))*n;o.panelOut.left=s.toString()+"px",i.up=parseInt(o.panelOut.left)}}),a.onPointerMoveObservable.add(function(e){var t=e.x-i.down,o=(i.up+t)*n;this.panelOut.left=o.toString()+"px"})),a.addControl(this.panelOut),a},e.prototype.optionsListCon=function(e,t,n){var o=this,a=i.GuiManager.ins.fullscreenUI.idealWidth/document.getElementById("renderCanvas").offsetWidth,s=this.createList("list",{width:e.bodyWidth,height:e.bodyHeight,top:e.bodyTop,left:e.bodyLeft,isVertical:e.isVertical},a),r=this.panelOut.children.length;if(r>0)for(var c=0;c<r;c++)this.panelOut.removeControl(this.panelOut.children[0]);return t.optionList.forEach(function(t){var i=n(e,t);o.panelOut.addControl(i)}),s},e}();t.GuiCreate=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=n(3),s=n(1),r=n(6),c=function(e){function t(){var t=e.call(this)||this;return t.panelsAn=new r.AnimationGui(o.SceneManager.ins.scene,a.GuiManager.ins.fullscreenUI),t}return i(t,e),t.prototype.show=function(e,t){this.addEvent(),this.panelsAn.show(this.view,e,t)},t.prototype.hide=function(e,t){this.removeEvent(),this.panelsAn.hide(this.view,e,t)},t}(s.Module);t.Panels=c},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return e.call(this)||this}return i(t,e),t}(n(1).Module);t.Guis=o},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(6),s=n(2),r=n(3),c=n(5),l=n(4),u=n(7),h=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.panelsAn=new a.AnimationGui(s.SceneManager.ins.scene,r.GuiManager.ins.fullscreenUI),t.initUI(),t}return i(t,e),t.prototype.show=function(e){this.removeEvent(),this.updateData(),this.addEvent(),r.GuiManager.ins.changeGui(this.parent)},t.prototype.hide=function(){var e=this;this.removeEvent(),this.panelsAn.hide(this.view,function(){e.onClose()},function(){e.onClosed()})},t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onOpened=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){c.DisplayPool.ins.displayPool[l.ModuleName.GAME_START_GUI]=this},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.onClick_ruleBtn=function(){},t.prototype.onClick_optionBtn=function(){},t.prototype.onClick_startBtn=function(){u.GlobalManager.ins.openModule(l.ModuleName.GAME_PLAY_GUI)},t.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.isInit||(this.initUI(),this.isInit=!0)},t.prototype.onClose=function(){this.removeHtml()},t.prototype.removeHtml=function(){this.section&&document.body.removeChild(this.section)},t.prototype.onClosed=function(){this.removeEvent()},t}(o.Module);t.StartGui=h},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=n(6),s=n(2),r=n(3),c=n(4),l=n(5),u=function(e){function t(){var t=e.call(this)||this;return t.doEvents=[],t.panelsAn=new a.AnimationGui(s.SceneManager.ins.scene,r.GuiManager.ins.fullscreenUI),t.initUI(),t}return i(t,e),t.prototype.show=function(e){this.updateData(),this.addEvent(),r.GuiManager.ins.changeGui(this.parent)},t.prototype.hide=function(){},t.prototype.onOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onOpened=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){l.DisplayPool.ins.displayPool[c.ModuleName.GAME_PLAY_GUI]=this},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.updateData=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvent(),this.isInit||(this.initUI(),this.isInit=!0)},t.prototype.onClose=function(){},t.prototype.onClosed=function(){this.removeEvent()},t}(o.Module);t.GameSceneGui=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(0),a=function(){function e(){}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatScene=function(){this.scene=o.SceneManager.ins.scene,this.scene.clearColor=new BABYLON.Color4(52/255,156/255,1);var e=new BABYLON.ArcRotateCamera("ArcRotateCamera",1,.8,10,new BABYLON.Vector3(0,200,0),this.scene);e.alpha=1*-Math.PI,e.beta=1.260483446598473,e.attachControl(o.SceneManager.ins.canvas,!1),e.upperRadiusLimit=27,e.lowerRadiusLimit=-27;var t=BABYLON.MeshBuilder.CreateBox("camera2Box",{height:.5,width:.5,depth:.5},this.scene);t.isVisible=!1,t.rotation=new BABYLON.Vector3(0,0,0);var n=BABYLON.MeshBuilder.CreateBox("camera2Box",{height:.5,width:.5,depth:.5},this.scene);n.position=new BABYLON.Vector3(0,.5,-3),n.isVisible=!1,n.rotation=new BABYLON.Vector3(0,0,0),n.parent=t;var a=BABYLON.MeshBuilder.CreateBox("steering",{height:2e3,width:2e3,depth:2e3},this.scene);a.visibility=0,a.scaling=new BABYLON.Vector3(.001,.001,.001),a.rotation=new BABYLON.Vector3(0,.3,.5*Math.PI);var s=new BABYLON.UniversalCamera("UniversalCamera",new BABYLON.Vector3(0,.112,.31),this.scene);s.speed=40,s.inertia=0,s.rotation.y=2*-Math.PI,s.fov=1.6,s.attachControl(o.SceneManager.ins.canvas),s.detachControl(o.SceneManager.ins.canvas),this.scene.activeCamera=s,s.minZ=-5,s.maxZ=1e4,s.parent=t;var r=new BABYLON.StandardMaterial("skyBox",this.scene);r.backFaceCulling=!1,r.diffuseTexture=i.AssetsManager.ins.resourceObject.textures.gameScene.skybox13.clone(),r.emissiveTexture=i.AssetsManager.ins.resourceObject.textures.gameScene.skybox13.clone(),r.specularColor=new BABYLON.Color3(0,0,0),r.disableLighting=!1;var c=BABYLON.MeshBuilder.CreateSphere("skySphere",{diameter:1e4},this.scene);c.rotation.x=Math.PI,c.material=r;var l=new BABYLON.FollowCamera("FollowCam",new BABYLON.Vector3(200,-300,150),this.scene);l.radius=-10,console.log("camera"),console.log(e),l.heightOffset=3,l.rotationOffset=0,l.cameraAcceleration=.6,l.maxCameraSpeed=300,l.noRotationConstraint=!1,l.fov=1.3,l.detachControl(o.SceneManager.ins.canvas),l.update(),this.scene.activeCamera=l,l.lockedTarget=t;var u=new BABYLON.StandardMaterial("free",this.scene);console.log("freeMateial"),console.log(u),u.emissiveColor=new BABYLON.Color3(254/255,82/255,22/255),u.diffuseColor=new BABYLON.Color3(1,1,1);var h=new BABYLON.StandardMaterial("boom",this.scene);console.log("boomMateial"),console.log(h),h.disableLighting=!0,h.emissiveColor=new BABYLON.Color3(1,100/255,0);var p=new BABYLON.HemisphericLight("HemiLight",new BABYLON.Vector3(0,10,0),this.scene);p.intensity=.4,p.diffuse=new BABYLON.Color3(1,1,1),p.groundColor=new BABYLON.Color3(1,1,1);var f=new BABYLON.DirectionalLight("DirectionalLight",new BABYLON.Vector3(.2,-.3,.2),this.scene);f.intensity=1,f.shadowFrustumSize=200,f.shadowMinZ=-100,f.shadowMaxZ=100,setInterval(function(){f.position=new BABYLON.Vector3(t.position.x,t.position.y+1,t.position.z-0)},100);var d=new BABYLON.ShadowGenerator(1024,f);d.bias=4e-4,d.usePercentageCloserFiltering=!0,d.filteringQuality=.1,d.forceBackFacesOnly=!0;var m=new BABYLON.TerrainMaterial("terrainMaterial",this.scene);m.mixTexture=i.AssetsManager.ins.resourceObject.textures.gameScene.maptr2.clone(),new BABYLON.GlowLayer("glow",this.scene).intensity=1,m.diffuseTexture1=i.AssetsManager.ins.resourceObject.textures.gameScene.grass.clone(),m.diffuseTexture1.uScale=20,m.diffuseTexture1.vScale=20,m.diffuseTexture2=i.AssetsManager.ins.resourceObject.textures.gameScene.grass.clone(),m.diffuseTexture2.uScale=20,m.diffuseTexture2.vScale=20,m.diffuseTexture3=i.AssetsManager.ins.resourceObject.textures.gameScene.ground.clone(),m.diffuseTexture3.uScale=20,m.diffuseTexture3.vScale=20;var g=BABYLON.Mesh.CreateSphere("centerHidenPick",16,.1,this.scene);g.visibility=0,g.position=new BABYLON.Vector3(1350.799,1000.817,-3e3);var y=new BABYLON.LensFlareSystem("lensFlareSystem",g,this.scene);new BABYLON.LensFlare(.4,1.3,new BABYLON.Color3(1,1,1),i.AssetsManager.ins.resourceObject.images.gameScene.ty.src,y),new BABYLON.LensFlare(.13,1,new BABYLON.Color3(0,1,0),i.AssetsManager.ins.resourceObject.images.gameScene.Bphl4qj.src,y),new BABYLON.LensFlare(.2,1,new BABYLON.Color3(0,0,1),i.AssetsManager.ins.resourceObject.images.gameScene.Bphl4qj.src,y),new BABYLON.LensFlare(.1,.8,new BABYLON.Color3(.5,.7,1),i.AssetsManager.ins.resourceObject.images.gameScene.IIyZhcg.src,y),new BABYLON.LensFlare(.2,.6,new BABYLON.Color3(.5,.5,1),i.AssetsManager.ins.resourceObject.images.gameScene.HRsf4I5.src,y),new BABYLON.LensFlare(.1,.5,new BABYLON.Color3(.4,.6,.9),i.AssetsManager.ins.resourceObject.images.gameScene.XaJRD9j.src,y),new BABYLON.LensFlare(.1,.35,new BABYLON.Color3(.5,.5,.9),i.AssetsManager.ins.resourceObject.images.gameScene.it5c3Vr.src,y),new BABYLON.LensFlare(.12,-.5,new BABYLON.Color3(.9,.75,.5),i.AssetsManager.ins.resourceObject.images.gameScene.XaJRD9j.src,y),new BABYLON.LensFlare(.25,-.25,new BABYLON.Color3(1,.85,.5),i.AssetsManager.ins.resourceObject.images.gameScene.IIyZhcg.src,y),this.display={camera:e,camera2:s,camera3:l,light:p,light3:f,cameraBox:t,camera2Box:n,steering:a,terrainMaterial:m,shadowGenerator:d,freeMateial:u,boomMateial:h,lensFlareSystem3:y},console.log(this.display)},e}();t.ExGameScene=a},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(25),a=function(e){function t(){var t=e.call(this)||this;return t.scene=o.ExGameSceneGui.ins.guiObject.sceneChild,t.parent=o.ExGameSceneGui.ins.guiObject,t}return i(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){console.log("按键事件"),console.log(this.scene.btnLeft),document.body.appendChild(this.scene.viewNode),this.doEvents.viewReset=document.getElementById("button_reset").addEventListener("click",function(){location.reload()})},t.prototype.removeEvent=function(){if(document.getElementById("viewNode"))try{document.body.removeChild(this.scene.viewNode)}catch(e){console.log(e)}},t}(n(0).GameSceneGui);t.ExGameSceneGuiCon=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.creatUI()}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatUI=function(){this.parent=new BABYLON.GUI.Rectangle;var e='\n            <style>\n            .button-view{\n                position: fixed;\n                top: 20px;\n                left:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .button-view:active{\n              transform: scale(0.8);\n            }\n            .button-reset{\n                position: fixed;\n                top: 20px;\n                right:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .about-btn{\n                position: fixed;\n                bottom: 20px;\n                right:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            button:active{\n              transform: scale(0.8);\n            }\n            </style>\n            <button class="button-reset" id="button_reset">Back</button>\n            <div>\n            <button class="about-btn" onclick="window.location.href=\'https://github.com/renjianfeng/flightSimulator\'">About The Author And Github</button>\n            </div>\n        ',t=document.createElement("div");t.id="viewNode",t.innerHTML=e,this.parent.sceneChild={viewHtml:e,viewNode:t}},Object.defineProperty(e.prototype,"guiObject",{get:function(){return this.parent},enumerable:!0,configurable:!0}),e}();t.ExGameSceneGui=i},function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=n(27),a=n(0),s=n(0),r=n(8),c=n(4),l=n(7),u=function(e){function t(){var t=e.call(this)||this;return t.scene=o.ExStartGui.ins.guiObject.sceneChild,t.parent=o.ExStartGui.ins.guiObject,t.gameSceneObject=r.ExGameSceneCon.ins,t}return i(t,e),Object.defineProperty(t,"ins",{get:function(){return this.instance||(this.instance=new t),this.instance},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(){localStorage.weatherState=s.WeatherState.RAIN_DAY,document.body.appendChild(this.scene.viewNode),this.doEvents.viewPlay=document.getElementById("button_play").addEventListener("click",this.onClick_startBtn.bind(this)),this.mapReset()},t.prototype.mapReset=function(){console.log(localStorage)},t.prototype.onClick_startBtn=function(){e.prototype.onClick_startBtn.call(this),l.GlobalManager.ins.openModule(c.ModuleName.GAME_PLAY_SCENE),this.removeEvent()},t.prototype.removeEvent=function(){if(e.prototype.removeEvent.call(this),document.getElementById("startNode"))try{document.body.removeChild(this.scene.viewNode)}catch(e){console.log(e)}},t}(a.StartGui);t.ExStartGuiCon=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this.creatUI()}return Object.defineProperty(e,"ins",{get:function(){return this.instance||(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.creatUI=function(){this.parent=new BABYLON.GUI.Rectangle;var e='\n            <style>\n            .button-play{\n                position: fixed;\n                top: 50%;\n                left:50%;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 42px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n                width: 200px;\n                height: 80px;\n                margin-left: -100px;\n                margin-top: 200px;\n            }\n            .button-play:active{\n              transform: scale(0.8);\n            }\n            .weather-config{\n                position: fixed;\n                top: 50%;\n                left:50%;\n                display: block;\n                background: #ffffff;\n                color: #82bab3;\n                border: 0px solid ;\n                font-size: 24px;\n                border-radius: 5px;\n                transform: scale(1);\n                width: 1000px;\n                height: 260px;\n                margin-left: -500px;\n                margin-top: -200px;\n                text-align: center;\n               \n            }\n            .weather-config ul li{\n                display: inline-block;\n                height: 200px;\n                width: 200px;\n                margin: 0px 5px;\n                border: 1px solid #cccccc;\n                cursor: pointer;\n                background-size: 100% 100%;\n                text-shadow: 0px 0px 5px #444;\n            }\n            \n            .weather-config ul li:hover{\n                border: 1px solid royalblue;\n            }\n            .we-active{\n                border: 3px solid #000 !important;\n                opacity: 0.8;\n            }\n            .yw-text{\n              font-size: 14px;\n            }\n            .box-tip{\n            margin-top: 60px;\n            }\n            \n            .map-list{\n                margin-top:-30px;\n                position: relative;\n                top: -30px;\n            }\n            .map-list select{\n                background: transparent;\n                padding: 7px;\n                color: #82bab3;\n                position: relative;\n                top: -2px;\n                font-size: 18px;\n                border-radius: 5px;\n                border: 1px solid #82bab3;\n            }\n            .box-tip{\n                background: rgba(0,0,0,0.2);\n                color: #ffffff;\n                padding: 10px;\n                font-size: 16px;\n                letter-spacing: 3px;\n                position: fixed;\n                bottom: 30px;\n                width:100%;\n                padding-left:20px;\n                text-align: center;\n            }\n\n            .about-btn{\n                position: fixed;\n                top: 20px;\n                left:20px;\n                background: #349ccd;\n                color: #ffffff;\n                border: 0px solid ;\n                font-size: 18px;\n                padding: 8px 20px;\n                border-radius: 5px;\n                cursor: pointer;\n                transform: scale(1);\n            }\n            .game-bg{\n                position: fixed;\n                top: 0;\n                left:0;\n                width:100%;\n                height:100%;\n               // background-color: #349ccd;\n                background-size:100% 100%;\n            }\n            .logo{\n                position: fixed;\n                top: 5%;\n                left:50%;\n                width:500px;\n                height:160px;\n                margin-left:-250px;\n               \n                background-size:100% 100%;\n            }\n\n            </style>\n        \n            <div class="game-bg" id="GAME_BG">\n            <div>\n            <button class="about-btn" onclick="window.location.href=\'https://github.com/renjianfeng/flightSimulator\'">About The Author And Github</button>\n            </div>\n            \n            <button class="button-play" id="button_play">Play</button>\n           \n            </div>\n           \n        ',t=document.createElement("div");t.id="startNode",t.innerHTML=e,document.title="FlightSimulator(台风战机模拟驾驶)",this.parent.sceneChild={viewHtml:e,viewNode:t}},Object.defineProperty(e.prototype,"guiObject",{get:function(){return this.parent},enumerable:!0,configurable:!0}),e}();t.ExStartGui=i}]);
//# sourceMappingURL=hi.js.map