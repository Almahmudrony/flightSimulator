{"version":3,"sources":["webpack://Hi/webpack/bootstrap","webpack://Hi/./src/public/index.ts","webpack://Hi/./src/public/components/Module.ts","webpack://Hi/./src/public/manager/SceneManager.ts","webpack://Hi/./src/public/manager/GuiManager.ts","webpack://Hi/./src/public/enum/ModuleName.ts","webpack://Hi/./src/public/others/DisplayPool.ts","webpack://Hi/./src/public/others/AnimationGui.ts","webpack://Hi/./src/public/manager/GlobalManager.ts","webpack://Hi/./src/Scene/GameScene/ExGameSceneCon.ts","webpack://Hi/./src/other/EventCon.ts","webpack://Hi/./src/Main.ts","webpack://Hi/./src/Before.ts","webpack://Hi/./src/other/ResourceCon.ts","webpack://Hi/./src/other/SceneBeforeCall.ts","webpack://Hi/./src/public/components/game/GameScenes.ts","webpack://Hi/./src/public/enum/WeatherState.ts","webpack://Hi/./src/public/manager/AssetsManager.ts","webpack://Hi/./src/public/others/AnimationCon.ts","webpack://Hi/./src/public/others/particleCon.ts","webpack://Hi/./src/public/others/GuiCreate.ts","webpack://Hi/./src/public/components/game/Panels.ts","webpack://Hi/./src/public/components/game/Guis.ts","webpack://Hi/./src/public/components/game/StartGui.ts","webpack://Hi/./src/public/components/game/GameSceneGui.ts","webpack://Hi/./src/Scene/GameScene/ExGameScene.ts","webpack://Hi/./src/Gui/GameSceneGui/ExGameSceneGuiCon.ts","webpack://Hi/./src/Gui/GameSceneGui/ExGameSceneGui.ts","webpack://Hi/./src/Gui/StartGui/ExStartGuiCon.ts","webpack://Hi/./src/Gui/StartGui/ExStartGui.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","GameScenes_1","GameScenes","ModuleName_1","ModuleName","WeatherState_1","WeatherState","AssetsManager_1","AssetsManager","GuiManager_1","GuiManager","SceneManager_1","SceneManager","GlobalManager_1","GlobalManager","AnimationCon_1","AnimationCon","AnimationGui_1","AnimationGui","particleCon_1","particleCon","GuiCreate_1","GuiCreate","Panels_1","Panels","Module_1","Module","Guis_1","Guis","StartGui_1","StartGui","GameSceneGui_1","GameSceneGui","DisplayPool_1","DisplayPool","initUI","show","args","_i","arguments","length","this","addEvent","hide","removeEvent","updateData","isInit","addClick","display","callback","onPointerUpObservable","add","removeClick","event","remove","delayEnable","delay","mouseEnable","mouseChildren","timeoutId","clearTimeout","setTimeout","dispose","_canvas","document","querySelector","_engine","BABYLON","Engine","deterministicLockstep","lockstepMaxSteps","createScene","scene","Scene","_onPointerUp","_onPointerDown","_onPointerMove","a","Tools","GetPointerPrefix","removeEventListener","window","pointerId","addEventListener","FreeCamera","Vector3","_scene","runRenderLoop","render","TWEEN","update","resize","instance","change","guiPoll","_lastGui","_fullscreenUI","GUI","AdvancedDynamicTexture","CreateFullscreenUI","changeGui","gui","_length","rootContainer","children","removeControl","addControl","appendGui","removeGui","removeAll","openPanel","closePanel","LOADING_GUI","WAITING_PANEL","MSG_PANEL","RULE_PANEL","LOSE_PANEL","GAME_START_GUI","GAME_PLAY_SCENE","GAME_PLAY_GUI","displayPool","advancedTexture","open","opened","keys","push","frame","animationX","Animation","ANIMATIONTYPE_FLOAT","ANIMATIONLOOPMODE_CYCLE","setKeys","animationY","animations","beginAnimation","close","closed","_this","openModule","moduleName","_a","ins","apply","index_1","index_2","index_3","EventCon_1","ExGameScene_1","ExGameSceneCon","_super","doEvents","importMeshes","frees","booms","viewState","moveForward","moveBackward","moveLeft","moveRight","canJump","speedCharacter","_s","_s_y","moveX","moveY","flayState","__extends","init","resetGame","ExGameScene","creatScene","engine","displayLoadingUI","loadingUIText","hideLoadingUI","console","log","getMaterialByName","l_state","setInterval","emissiveColor","Color3","image","alpha","getMeshByName","getChildMeshes","mesh","isVisible","rect1","Rectangle","width","height","thickness","rect2","color","rect3","verticalAlignment","Control","VERTICAL_ALIGNMENT_TOP","top","left","horizontalAlignment","HORIZONTAL_ALIGNMENT_CENTER","Image","resourceObject","images","gameScene","jiantou","src","HORIZONTAL_ALIGNMENT_LEFT","b5","b6","label","countB","TextBlock","text","textHorizontalAlignment","fontSize","background","b1","b2","b3","material","backFaceCulling","collisionsEnabled","MeshBuilder","CreateBox","depth","lifeState","isPickable","freeMateial","checkCollisions","CreateSphere","diameter","boomMateial","meshes","forEach","createDefaultSkybox","cubeTextures","skybox","parent","cameraBox","rotation","y","Math","PI","position","scaling","terrainMaterial","camera","target","origin","forward","direction","vecToLocal","subtract","Normalize","ray","Ray","freeState","BeforeRender","onBeforeRenderObservable","beforeRender","keyCode","viewCtrl","EventCon","keyevent","ram","random","j","absolutePosition","x","z","times","getFps","movePlayer","freeUpdate","vector","getWorldMatrix","TransformCoordinates","hit","pickWithRay","pickedMesh","moveToVector3","pickedPoint","free","forword","moveWithCollisions","boomPosition","getDistance","character","canardUpdate","empennageUpdate","wingsUpdate","airflowUpdate","eleImage","getElementById","rotate3D","movementX","movementY","requestPointerLock","pointerLockElement","setMeshVal","state","val","_sd","beginWeightedAnimation","weight","x1","y1","z1","x2","y2","z2","_x","abs","_y","_z","sqrt","airflowCon","airflowConState","clearInterval","airflowConTime","activeCamera","camera3","camera2","gold","Observable","Before_1","ua","navigator","userAgent","isIphone","match","isAndroid","body","innerHTML","Before","ResourceCon_1","SceneBeforeCall_1","index_4","index_5","ExGameSceneCon_1","ExGameSceneGuiCon_1","ExStartGuiCon_1","localStorage","map","car_x","car_y","car_z","resourceData","ResourceCon","resource","loadFile","initModule","SceneBeforeCall","musicLoop","loadCount","ExStartGuiCon","ExGameSceneGuiCon","pathFirst","resPath","binarys","filePath","fileName","models","textures","_resource","data","gameOver","SUNNY_DAY","RAIN_DAY","AFTERNOON_DAY","NIGHT_DAY","_resourceObject","SceneLoader","OnPluginActivatedObservable","plugin","GLTFFileLoader","animationStartMode","GLTFLoaderAnimationStartMode","NONE","compileMaterials","set","_resourceData","sceneNames","progress","assetsManager","sceneName","_thisModel","model","addMeshTask","onSuccess","task","_thisMesh","_thisImage","addImageTask","_thisTexture","texture","addTextureTask","_thisBinary","binary","addBinaryFileTask","url","rootUrl","sceneFilename","_thisCubeTexture","cubeTexture","addCubeTextureTask","load","onProgress","totalTasksCount","_totalTasksCount","waitingTasksCount","_waitingTasksCount","onFinish","animationBody","_endattr","_mesh","_attr","_speed","_keys","_endCall","_typeData","_loop","endattr","error","attr","speed","endCall","typeData","typedata","loop","animationBox","setbeginAnimation","onAnimationEnd","Pause","pause","Reset","reset","Speed","speedRatio","particle","fountain","Mesh","visibility","particleSystem","emitter","stop","start","Position","Parent","panelOut","StackPanel","createList","options","scaleUi","mouse","rectOut","isPointerBlocker","isVertical","up","down","parseInt","toString","onPointerDownObservable","topY","onPointerMoveObservable","mul","leftY","optionsListCon","config","listTemplate","fullscreenUI","idealWidth","offsetWidth","prizeDatalist","bodyWidth","bodyHeight","bodyTop","bodyLeft","optionList","_list","list","panelsAn","view","onClose","onClosed","onOpen","onOpened","onClick_ruleBtn","onClick_optionBtn","onClick_startBtn","removeHtml","section","removeChild","clearColor","Color4","ArcRotateCamera","beta","attachControl","canvas","upperRadiusLimit","lowerRadiusLimit","camera2Box","steering","UniversalCamera","fov","detachControl","minZ","FollowCamera","radius","heightOffset","rotationOffset","cameraAcceleration","maxCameraSpeed","noRotationConstraint","lockedTarget","StandardMaterial","disableLighting","light","HemisphericLight","intensity","light2","light3","DirectionalLight","shadowFrustumSize","shadowMinZ","shadowMaxZ","TerrainMaterial","mixTexture","maptr2","clone","GlowLayer","diffuseTexture1","grass","uScale","vScale","diffuseTexture2","diffuseTexture3","ground","ExGameSceneGui_1","ExGameSceneGui","guiObject","sceneChild","_btnState","btnLeft","appendChild","viewNode","viewButton","notifyObservers","viewReset","location","reload","creatUI","viewHtml","createElement","id","ExStartGui_1","ExStartGui","gameSceneObject","weatherState","viewPlay","mapReset","title"],"mappings":"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","file":"hi.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","\r\nimport {GameScenes} from \"./components/game/GameScenes\";\r\nimport {ResourceData} from \"./interface/ResourceData\";\r\nimport {fileData} from \"./interface/fileData\";\r\nimport {ModuleName} from \"./enum/ModuleName\";\r\nimport {WeatherState} from \"./enum/WeatherState\";\r\nimport {AssetsManager} from \"./manager/AssetsManager\";\r\nimport {GuiManager} from \"./manager/GuiManager\";\r\nimport {SceneManager} from \"./manager/SceneManager\";\r\nimport {GlobalManager} from \"./manager/GlobalManager\";\r\nimport {AnimationCon} from \"./others/AnimationCon\";\r\nimport {AnimationGui} from \"./others/AnimationGui\";\r\nimport {particleCon} from \"./others/particleCon\";\r\nimport {GuiCreate} from \"./others/GuiCreate\";\r\nimport {Panels} from \"./components/game/Panels\";\r\nimport {Module} from \"./components/Module\";\r\nimport {Guis} from \"./components/game/Guis\";\r\nimport {StartGui} from \"./components/game/StartGui\";\r\nimport {GameSceneGui} from \"./components/game/GameSceneGui\";\r\nimport {DisplayPool} from \"./others/DisplayPool\";\r\n\r\n\r\n\r\nexport {\r\n    //UI创建和scene创建\r\n    GameScenes,Panels,Module,Guis,DisplayPool,GameSceneGui,StartGui,\r\n    //other\r\n    AnimationCon,AnimationGui,particleCon,GuiCreate,\r\n    //接口\r\n    ResourceData,fileData,\r\n    //枚举\r\n     ModuleName,WeatherState,\r\n    //管理器\r\n    AssetsManager,GuiManager,SceneManager,GlobalManager,\r\n}","\r\n/**\r\n *Created by cuiliqiang on 2018/3/1\r\n * 组件基类\r\n */\r\n\r\n\r\nexport class Module {\r\n    private timeoutId;\r\n\r\n    /**\r\n     * 显示对象（皮肤）\r\n     */\r\n    protected display: any;\r\n    /**\r\n     * 是否初始化完成\r\n     */\r\n    protected isInit: boolean;\r\n    /**\r\n     * 点击事件回调池\r\n     */\r\n    private clickCallbackPool: any;\r\n\r\n    constructor() {\r\n      //  var skinClass: any = eval(this.module.skinName);\r\n       // this.display = new skinClass();\r\n       // this.clickCallbackPool = {};\r\n    }\r\n\r\n    /**\r\n     * 初始化UI\r\n     */\r\n    protected initUI(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    protected show(...args): void {\r\n        this.addEvent();\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(...args): void {\r\n        this.removeEvent();\r\n    }\r\n\r\n    /**\r\n     * 添加事件\r\n     */\r\n    protected addEvent(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 移除事件\r\n     */\r\n    protected removeEvent(): void {\r\n\r\n    }\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 添加点击事件\r\n     * @param display\r\n     *\r\n     * @param callback\r\n     */\r\n    protected addClick(display: any, callback: Function) {\r\n        var _this= display.onPointerUpObservable.add(callback);\r\n        return _this;\r\n    }\r\n\r\n    /**\r\n     * 移除点击事件\r\n     * @param display\r\n     * @param callback\r\n     */\r\n    protected removeClick(display: any, event): void {\r\n        display.onPointerUpObservable.remove(event);\r\n      //  delete this.clickCallbackPool[display.instanceId];\r\n    }\r\n\r\n    /**\r\n     * 延时启用点击事件\r\n     * @param display 显示对象\r\n     * @param {number} delay 延时事件\r\n     */\r\n    protected delayEnable(display: any, delay?: number): void {\r\n        display.mouseEnable = display.mouseChildren = false;\r\n        //如果已经禁用事件重新计算\r\n        if (this.timeoutId) {\r\n            clearTimeout(this.timeoutId);\r\n        }\r\n\r\n        this.timeoutId = setTimeout(function () {\r\n            this.timeoutId = 0;\r\n            display.mouseEnable = display.mouseChildren = true;\r\n        }, delay ? delay : 500);\r\n    }\r\n\r\n\r\n    public dispose(): void {\r\n\r\n    }\r\n}","\r\n/**\r\n *Created by renjianfeng\r\n */\r\nimport Scene = BABYLON.Scene;\r\n\r\n\r\nexport class SceneManager{\r\n\r\n    public stage;\r\n    private _scene:Scene;\r\n    private _canvas;\r\n    private _engine;\r\n\r\n    private static instance: SceneManager;\r\n\r\n    public static get ins(): SceneManager {\r\n        if (!this.instance) {\r\n            this.instance = new SceneManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n\r\n    this._canvas = document.querySelector(\"#renderCanvas\");\r\n  //  this._engine = new BABYLON.Engine(this._canvas, true);\r\n    this._engine = new BABYLON.Engine(this._canvas, true, {\r\n        deterministicLockstep: true,\r\n        lockstepMaxSteps: 4\r\n      });\r\n        var createScene=function(){\r\n            {\r\n\r\n\r\n                var scene = new BABYLON.Scene(this._engine);\r\n\r\n                //下面的代码是为了设置微信上面的touch事件兼容\r\n\r\n                var n = scene._onPointerUp\r\n                    , o = scene._onPointerDown\r\n                    , r = scene._onPointerMove\r\n                    , a = BABYLON.Tools.GetPointerPrefix();\r\n                    this._canvas.removeEventListener(a + \"move\", r),\r\n                    this._canvas.removeEventListener(a + \"down\", o),\r\n                    window.removeEventListener(a + \"up\", n),\r\n                    scene._onPointerUp = function(e) {\r\n                        void 0 !== e.pointerId && n(e)\r\n                    }\r\n                    ,\r\n                    scene._onPointerDown = function(e) {\r\n                        void 0 !== e.pointerId && o(e)\r\n                    }\r\n                    ,\r\n                    scene._onPointerMove = function(e) {\r\n                        void 0 !== e.pointerId && r(e)\r\n                    }\r\n                    ,\r\n                    this._canvas.addEventListener(a + \"move\", scene._onPointerMove, !1),\r\n                    this._canvas.addEventListener(a + \"down\", scene._onPointerDown, !1),\r\n                    window.addEventListener(a + \"up\", scene._onPointerUp, !1);\r\n\r\n\r\n                //下面的代码是为了设置微信上面的touch事件兼容\r\n                var camera = new BABYLON.FreeCamera(\"baseCamera\", new BABYLON.Vector3(0, 0, 0), scene);\r\n\r\n              //  var sceneCall=new SceneCall(scene)\r\n\r\n             /*   this.stage = BABYLON.MeshBuilder.CreateBox(\"stage\", {}, scene);\r\n\r\n                this.stage.isVisible = false;*/\r\n\r\n                return scene;\r\n            }\r\n        }.bind(this)\r\n\r\n        this._scene = createScene();\r\n\r\n        this._engine.runRenderLoop(function () {\r\n            this._scene.render();\r\n            TWEEN.update();\r\n        }.bind(this));\r\n\r\n        window.addEventListener(\"resize\", function() {\r\n            this._engine.resize();\r\n        }.bind(this));\r\n    }\r\n\r\n   /* public get stage(): any {\r\n        return this._stage;\r\n    }*/\r\n\r\n    public get scene(): Scene {\r\n        return this._scene;\r\n    }\r\n\r\n    public get canvas(): any {\r\n        return this._canvas;\r\n    }\r\n\r\n    public get engine(): any {\r\n        return this._engine;\r\n    }\r\n\r\n    public change(display){\r\n       /* console.log(display)\r\n        var i;\r\n        for(i in display){\r\n            console.log(display[i])\r\n        }*/\r\n/* \r\n        for(var l of SceneManager.ins.scene.meshes){\r\n            l.dispose()\r\n        } */\r\n\r\n        /*var j;\r\n        for(j in SceneManager.ins.stage){\r\n            console.log(SceneManager.ins.stage[j])\r\n            if( SceneManager.ins.stage[j]){\r\n                if(SceneManager.ins.stage[j].getChildMeshes){\r\n                    SceneManager.ins.stage[j].getChildMeshes(false,(child)=>{\r\n                        child.dispose();\r\n                    });\r\n                }\r\n                if( SceneManager.ins.stage[j].dispose){\r\n                    SceneManager.ins.stage[j].dispose()\r\n                }\r\n            }\r\n        }*/\r\n      //  SceneManager.ins.stage=display;\r\n    }\r\n\r\n  /*  public change(module){\r\n      //  console.log(this._stage._children)\r\n        if(this.stage._children){\r\n            this.stage._children.forEach(function (child) {\r\n                this.stage.removeChild(child)\r\n                child.dispose()\r\n            }.bind(this))\r\n        }\r\n        this.stage.addChild(module)\r\n      //  console.log( this._scene)\r\n    }*/\r\n}","/**\r\n *Created by renjianfeng\r\n */\r\nexport class GuiManager {\r\n\r\n\r\n    private _fullscreenUI:any;\r\n\r\n    private _lastGui:any;\r\n\r\n    private guiPoll:any={};\r\n\r\n    private static instance: GuiManager;\r\n    public static get ins(): GuiManager {\r\n        if (!this.instance) {\r\n            this.instance = new GuiManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    constructor(){\r\n        this._lastGui=null;\r\n        this._fullscreenUI=BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI(\"GUI\");\r\n      //  this._fullscreenUI.idealWidth=750;\r\n    }\r\n\r\n    public changeGui(gui,...args){\r\n        var _length=this._fullscreenUI.rootContainer.children.length\r\n        for(var i=0;i<_length;i++){\r\n            this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])\r\n        }\r\n        this._fullscreenUI.addControl(gui)\r\n        this._lastGui=gui\r\n    }\r\n\r\n\r\n    public appendGui(gui,...args){\r\n        this._fullscreenUI.addControl(gui)\r\n        this._lastGui=gui\r\n    }\r\n\r\n\r\n    public removeGui(gui,...args){\r\n        this._fullscreenUI.removeControl(this._lastGui)\r\n    }\r\n\r\n    public removeAll(gui,...args){\r\n        var _length=this._fullscreenUI.rootContainer.children.length\r\n        for(var i=0;i<_length;i++){\r\n            this._fullscreenUI.removeControl(this._fullscreenUI.rootContainer.children[0])\r\n        }\r\n    }\r\n\r\n    public openPanel(gui){\r\n\r\n    }\r\n    public closePanel(gui){\r\n\r\n    }\r\n\r\n\r\n    public get fullscreenUI(){\r\n        return this._fullscreenUI;\r\n    }\r\n\r\n    public get lastGui(){\r\n        return this._lastGui;\r\n    }\r\n}\r\n","export enum ModuleName {\r\n    //加载场景\r\n    LOADING_GUI = 'LoadingScene',\r\n    //等待面板\r\n    WAITING_PANEL = 'WaitingPanel',\r\n    //提示信息面板\r\n    MSG_PANEL = 'MsgPanel',\r\n    //游戏规则面板\r\n    RULE_PANEL = 'RulePanel',\r\n    //未中奖面板\r\n    LOSE_PANEL = 'LosePanel',\r\n    //开始场景\r\n    GAME_START_GUI = 'GameStartScene',\r\n    //游戏玩法场景\r\n    GAME_PLAY_SCENE = 'GamePlayScene',\r\n    //游戏玩法场景GUI\r\n    GAME_PLAY_GUI = 'GamePlayGui',\r\n\r\n}\r\n","export class DisplayPool{\r\n    private static instance: DisplayPool;\r\n\r\n    public static get ins(): DisplayPool {\r\n        if (!this.instance) {\r\n            this.instance = new DisplayPool();\r\n        }\r\n        return this.instance;\r\n    }\r\n    //场景名称\r\n    public displayPool: any = {};\r\n}","/**\r\n * Created by renjianfeng\r\n * 弹框动画UI控制器\r\n */\r\n\r\nexport class AnimationGui {\r\n    private static instance: AnimationGui;\r\n\r\n    protected scene;\r\n    protected advancedTexture;\r\n\r\n    constructor(scene,advancedTexture){\r\n        this.scene=scene;\r\n        this.advancedTexture=advancedTexture\r\n    }\r\n\r\n    public show = function (gui,open?,opened?) {\r\n        var keys = [];\r\n        keys.push({\r\n            frame: 0,\r\n            value: 0.1\r\n        });\r\n        keys.push({\r\n            frame: 10,\r\n            value: 1\r\n        });\r\n        var animationX = new BABYLON.Animation(\"\", \"scaleX\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationX.setKeys(keys);\r\n        var animationY = new BABYLON.Animation(\"\", \"scaleY\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationY.setKeys(keys);\r\n        gui.animations = [];\r\n        gui.animations.push(animationX,animationY);\r\n        this.advancedTexture.addControl(gui);\r\n        if(open){\r\n            open()\r\n        }\r\n        this.scene.beginAnimation(gui, 0, 10, false,2,()=>{\r\n            if(opened){\r\n                opened()\r\n            }\r\n        });\r\n    };\r\n\r\n    public hide = function(gui,close?,closed?){\r\n        var keys = [];\r\n        keys.push({\r\n            frame: 0,\r\n            value: 1\r\n        });\r\n        keys.push({\r\n            frame: 10,\r\n            value: 0.1\r\n        });\r\n        var animationX = new BABYLON.Animation(\"\", \"scaleX\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationX.setKeys(keys);\r\n        var animationY = new BABYLON.Animation(\"\", \"scaleY\", 30, BABYLON.Animation.ANIMATIONTYPE_FLOAT, BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE);\r\n        animationY.setKeys(keys);\r\n        gui.animations = [];\r\n        gui.animations.push(animationX,animationY);\r\n        if(close){\r\n            close()\r\n        }\r\n        this.scene.beginAnimation(gui, 0, 10, false,2,()=>{\r\n            this.advancedTexture.removeControl(gui);\r\n            //this.advancedTexture.dispose();\r\n            if(closed){\r\n                closed()\r\n            }\r\n        });\r\n    };\r\n\r\n}\r\n\r\n","\r\n/**\r\n *Created by renjianfeng\r\n */\r\nimport {ModuleName} from \"../enum/ModuleName\";\r\nimport {DisplayPool} from \"../others/DisplayPool\";\r\nexport class GlobalManager {\r\n\r\n    //管理器单例\r\n    private static instance: GlobalManager;\r\n\r\n    public static get ins(): GlobalManager {\r\n        if (!this.instance) {\r\n            this.instance = new GlobalManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    /**\r\n     * 打开一个模块\r\n     * @param {ModuleName} moduleName\r\n     */\r\n    public openModule(moduleName:string, ...args): void {\r\n        DisplayPool.ins.displayPool[moduleName].show(...args)\r\n    }\r\n}","\r\nimport {AssetsManager, SceneManager} from \"../../public/index\";\r\nimport {DisplayPool} from \"../../public/index\";\r\nimport {ModuleName} from \"../../public/index\";\r\nimport {EventCon} from \"../../other/EventCon\";\r\nimport {ExGameScene} from \"./ExGameScene\";\r\nimport {GameScenes} from \"../../public/index\";\r\nimport {particleCon} from \"../../public/index\";\r\nimport {WeatherState} from \"../../public/index\";\r\n\r\n\r\nexport class ExGameSceneCon extends GameScenes{\r\n    private _gold;\r\n    private static instance: ExGameSceneCon;\r\n\r\n    public static get ins(): ExGameSceneCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    protected display;\r\n\r\n    protected scene;\r\n\r\n    protected doEvents=[];\r\n\r\n    private gameDeState;\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    protected importMeshes=[]\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_PLAY_SCENE]=this;\r\n    }\r\n\r\n    private frees=[]\r\n    private booms=[]\r\n\r\n\r\n    private probe;\r\n\r\n    private ray\r\n    private hit\r\n\r\n    private rect1;\r\n    private rect2;\r\n    private rect3;\r\n    private image;\r\n\r\n    protected resetGame(){\r\n        ExGameScene.ins.creatScene()\r\n        var scene=SceneManager.ins.scene;\r\n        this.scene=SceneManager.ins.scene;\r\n        this.display=ExGameScene.ins.display;\r\n        SceneManager.ins.engine.displayLoadingUI();\r\n        SceneManager.ins.engine.loadingUIText = \"Initializing...\";\r\n        SceneManager.ins.engine.hideLoadingUI();\r\n\r\n\r\n\r\n\r\n        console.log(\"Pilot Head\")\r\n        console.log(this.scene.getMaterialByName(\"Pilot Head\"))\r\n\r\n\r\n        var l_state=true;\r\n       setInterval(()=>{\r\n          l_state=!l_state\r\n          if(l_state){\r\n            this.scene.getMaterialByName(\"Pilot Head\").emissiveColor=new BABYLON.Color3(0.2,0.2,0.2);\r\n            this.image.alpha=0;\r\n          }else{\r\n            this.scene.getMaterialByName(\"Pilot Head\").emissiveColor=new BABYLON.Color3(0.3,0.3,0.3);\r\n            this.image.alpha=1;\r\n          }\r\n       },10)\r\n\r\n       setInterval(()=>{\r\n           //  this.scene.getMeshByName(\"灯\").isVisible=true;\r\n             this.scene.getMeshByName(\"灯\").getChildMeshes(false,(mesh)=>{\r\n                mesh.isVisible=true;\r\n            })\r\n            setTimeout(()=>{\r\n                this.scene.getMeshByName(\"灯\").getChildMeshes(false,(mesh)=>{\r\n                    mesh.isVisible=false;\r\n                })\r\n            },50)\r\n       },1000)\r\n      //  this.scene.getMaterialByName(\"Pilot Head\").emissiveIntensity=0.1;\r\n\r\n         // GUI\r\n    var advancedTexture = BABYLON.GUI.AdvancedDynamicTexture.CreateFullscreenUI(\"UI\");\r\n\r\n    this.rect1 = new BABYLON.GUI.Rectangle();\r\n    this.rect1.width = \"90px\";\r\n    this.rect1.height = \"90px\";\r\n    this.rect1.alpha=0.4;\r\n    //this.rect1.cornerRadius = 5;\r\n   // this.rect1.color = \"#009855\";\r\n    this.rect1.thickness = 0;\r\n   // this.rect1.background = new BABYLON.Color4(0,0,0,0);\r\n    advancedTexture.addControl( this.rect1);\r\n\r\n\r\n\r\n    this.rect2 = new BABYLON.GUI.Rectangle();\r\n    this.rect2.alpha=0.8;\r\n    this.rect2.width = \"700px\";\r\n    this.rect2.height = \"400px\";\r\n   // this.rect1.cornerRadius = 5;\r\n    this.rect2.color = \"#009855\";\r\n    this.rect2.thickness = 0;\r\n\r\n    console.log(this.rect2)\r\n    console.log(\"this.rect2\")\r\n\r\n\r\n\r\n    this.rect3 = new BABYLON.GUI.Rectangle();\r\n\r\n    this.rect3.width = \"300px\";\r\n    this.rect3.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;\r\n    this.rect3.height = \"10800px\";\r\n    this.rect3.top=\"0\";\r\n    this.rect3.left=\"10px\";\r\n    this.rect3.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_CENTER;\r\n    //this.rect1.cornerRadius = 5;\r\n    //this.rect3.background = \"#009855\";\r\n    this.rect3.thickness = 0;\r\n    this.rect2.addControl(this.rect3);\r\n\r\n\r\n   // AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"jiantou\"].clone()\r\n\r\n    this.image = new BABYLON.GUI.Image(\"but\", AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"jiantou\"].src);\r\n    this.image.width = \"30px\";\r\n    this.image.height = \"15px\";\r\n    this.image.top=\"192px\";\r\n    this.image.left=\"110px\";\r\n    this.image.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;\r\n    this.image.horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n    this.rect2.addControl(this.image);  \r\n\r\n    \r\n\r\n\r\n    var b5=[]\r\n    var b6=[]\r\n    var label=[]\r\n    var countB=0;\r\n    for(var i=0;i<=36;i++){\r\n        console.log(i)\r\n        countB+=30\r\n        if(countB>=360){\r\n            countB=0;\r\n        }\r\n        b5[i]= new BABYLON.GUI.Rectangle();\r\n        b5[i].verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;\r\n        b5[i].horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        b5[i].top=50*i*3;\r\n        b5[i].width = \"300px\";\r\n        b5[i].height = \"20px\";\r\n        //this.rect1.cornerRadius = 5;\r\n       // b5[i].background = \"#009855\";\r\n        b5[i].thickness = 0;\r\n        this.rect3.addControl( b5[i]);\r\n        label[i] = new BABYLON.GUI.TextBlock();\r\n        if(countB==0){\r\n            label[i].text = \"水平：\"+countB+\"°\";\r\n        }else{\r\n            label[i].text = \"\"+countB+\"°\";\r\n        }\r\n        \r\n        label[i].color=\"#86a5ff\"\r\n        label[i].textHorizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        label[i].fontSize=\"14px\"\r\n\r\n        b5[i].addControl(label[i]);\r\n\r\n        b6[i]= new BABYLON.GUI.Rectangle();\r\n        b6[i].horizontalAlignment = BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n     //   b6[i].verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_BOTTOM;\r\n       // b6[i].left=\"50px\";\r\n        if(countB==0){\r\n            b6[i].left=\"80px\";\r\n            b6[i].width = \"50px\";\r\n        }else{\r\n            b6[i].left=\"50px\";\r\n            b6[i].width = \"30px\";\r\n        }\r\n        \r\n        b6[i].height = \"3px\";\r\n        //this.rect1.cornerRadius = 5;\r\n        b6[i].background = \"#86a5ff\";\r\n        b6[i].thickness = 0;\r\n        b5[i].addControl(b6[i]);\r\n    }\r\n\r\n\r\n  /*   console.log( \"this.rect2\")\r\n    console.log( this.rect2) */\r\n   // this.rect1.background = new BABYLON.Color4(0,0,0,0);\r\n    advancedTexture.addControl( this.rect2);\r\n\r\n    /* var label = new BABYLON.GUI.TextBlock();\r\n    label.text = \"Sphere\";\r\n    this.rect1.addControl(label); */\r\n\r\n    var b1 = new BABYLON.GUI.Rectangle();\r\n    b1.width = \"90px\";\r\n    b1.height = \"2px\";\r\n    //this.rect1.cornerRadius = 5;\r\n    b1.background = \"#009855\";\r\n    b1.thickness = 0;\r\n    this.rect1.addControl(b1);\r\n\r\n    var b2 = new BABYLON.GUI.Rectangle();\r\n    b2.width = \"2px\";\r\n    b2.height = \"90px\";\r\n    //this.rect1.cornerRadius = 5;\r\n    b2.background = \"#009855\";\r\n    b2.thickness = 0;\r\n    this.rect1.addControl(b2);\r\n\r\n    var b3 = new BABYLON.GUI.Rectangle();\r\n    b3.width = \"40px\";\r\n    b3.height = \"40px\";\r\n    //this.rect1.cornerRadius = 5;\r\n    b3.color = \"#009855\";\r\n    b3.thickness = 2;\r\n    this.rect1.addControl(b3);\r\n\r\n    //this.rect1.linkWithMesh(sphere);   \r\n   // this.rect1.linkOffsetY = -50;\r\n      \r\n\r\n     /*    var hit = scene.pickWithRay(ray);\r\n\r\n        if (hit.pickedMesh){\r\n\t\t   hit.pickedMesh.scaling.y += 0.01;\r\n\t    } */\r\n\r\n\r\n        this.scene.getMeshByName(\"气流1\").material.backFaceCulling=false;\r\n        this.scene.getMeshByName(\"气流2\").material.backFaceCulling=false;\r\n       // this.scene.getMeshByName(\"锥体.003\").material.backFaceCulling=false;\r\n\r\n\r\n      /*   this.probe = new BABYLON.ReflectionProbe(\"main\", 64, this.scene);\r\n        this.probe.renderList.push( this.scene.getMeshByName(\"default\"));\r\n        this.probe.attachToMesh(this.display.cameraBox); */\r\n\r\n        this.scene.collisionsEnabled = false;\r\n        for(var i=0;i<=60;i++){\r\n            this.frees[i]= BABYLON.MeshBuilder.CreateBox(\"frees\", {height:  0.2, width: 0.2, depth: 5}, this.scene);\r\n            this.frees[i].lifeState=false;\r\n            this.frees[i].isPickable=false;\r\n            this.frees[i].material=this.display.freeMateial;\r\n            this.frees[i].checkCollisions = false;;\r\n           // this.frees[i].scaling=new BABYLON.Vector3(1,0.001,0.001)\r\n           // this.frees[i].rotation=new BABYLON.Vector3(0,0.3,Math.PI*0.5)\r\n        }\r\n\r\n        for(var i=0;i<=60;i++){\r\n            this.booms[i]= BABYLON.MeshBuilder.CreateSphere(\"boom\", {diameter: 10}, this.scene);\r\n            this.booms[i].lifeState=false;\r\n            this.booms[i].isPickable=false;\r\n            this.booms[i].material=this.display.boomMateial;\r\n            this.frees[i].checkCollisions = false;;\r\n           // this.frees[i].scaling=new BABYLON.Vector3(1,0.001,0.001)\r\n           // this.frees[i].rotation=new BABYLON.Vector3(0,0.3,Math.PI*0.5)\r\n        }\r\n\r\n       // alert()\r\n\r\n\r\n       this.scene.meshes.forEach((mesh)=>{\r\n           mesh.checkCollisions = false;;\r\n       })\r\n\r\n    \r\n\r\n       /*  console.log(\"this.scene\")\r\n        console.log(this.scene) */\r\n        this.scene.createDefaultSkybox(AssetsManager.ins.resourceObject[\"cubeTextures\"][\"gameScene\"][\"skybox\"], true, 10000);\r\n\r\n\r\n      //  this.scene.environmentTexture=this.probe.cubeTexture;\r\n\r\n        /* var backgroundMaterial = new BABYLON.BackgroundMaterial(\"backgroundMaterial\", scene);\r\n        backgroundMaterial.reflectionTexture=this.probe.cubeTexture */\r\n\r\n        this.scene.getMeshByName(\"__root__\").getChildMeshes(false,(mesh)=>{\r\n            console.log(mesh)\r\n            console.log(mesh.name)\r\n            mesh.isPickable=false;\r\n            if(mesh.material){\r\n                mesh.material.backFaceCulling=false;\r\n            }\r\n           \r\n        })\r\n\r\n        this.scene.getMeshByName(\"__root__\").parent=this.display.cameraBox\r\n        this.scene.getMeshByName(\"__root__\").rotation.y=-Math.PI*1\r\n      //  this.scene.getMeshByName(\"__root__\").position.x=-0.1;\r\n        this.scene.getMeshByName(\"__root__\").position.y=-0;\r\n        this.display.cameraBox.scaling=new BABYLON.Vector3(10,10,10)\r\n        this.scene.getMeshByName(\"default\").material=this.display.terrainMaterial\r\n        this.scene.getMeshByName(\"default\").isPickable=true;\r\n        this.display.cameraBox.position.y=-10;\r\n        this.display.camera.target=this.display.cameraBox.position;\r\n       // this.scene.beginAnimation(this.scene.skeletons[0],6,6.001, false);\r\n       /*  setTimeout(()=>{\r\n            this.scene.beginAnimation(this.scene.skeletons[0], 1, 1.0001, false);\r\n        },2000) */\r\n       \r\n        console.log( \"this.scene\")\r\n        console.log( this.scene)\r\n\r\n\r\n      //  panel.position=this.display.cameraBox.position;\r\n\r\n\r\n\r\n        var origin = this.display.cameraBox.position;\r\n\t\r\n\t    var forward = new BABYLON.Vector3(0,0,1);\t\t\r\n\t    forward = this.vecToLocal(forward, this.display.cameraBox);\r\n\t\r\n\t    var direction = forward.subtract(origin);\r\n\t    direction = BABYLON.Vector3.Normalize(direction);\r\n\t\r\n\t    //var length = 100;\r\n\t\r\n\t    this.ray = new BABYLON.Ray(origin, direction, 1000);\r\n\r\n        \r\n        \r\n       // ray.parent=this.display.cameraBox\r\n       \r\n    }\r\n\r\n\r\n    private j;\r\n\r\n\r\n    private freeState;\r\n\r\n    private viewState=true;\r\n\r\n    protected addEvent(){\r\n\r\n        this.freeState=false;\r\n        this.doEvents[\"BeforeRender\"]=SceneManager.ins.scene.onBeforeRenderObservable.add(()=>{\r\n            this.beforeRender()\r\n        })\r\n\r\n\r\n        document.addEventListener(\"keydown\",(e)=>{\r\n            　if (e.keyCode == 86) {\r\n                this.viewCtrl(e)\r\n    　　      }\r\n        })\r\n\r\n        EventCon.ins.key.add((e)=>{\r\n           // this.gameDeState=e\r\n           // console.log(e)\r\n           \r\n            this.viewCtrl(e)\r\n        });\r\n        this.keyevent()\r\n\r\n\r\n        setInterval(()=>{\r\n\r\n            if(this.freeState){\r\n                var ram=Math.random()/50;\r\n\r\n                if(this.j<=this.frees.length-1){\r\n               \r\n                  /*   for(let i=this.j;i<this.frees.length;i++){\r\n                        console.log(i)\r\n                        console.log(this.frees[i])\r\n                        if(this.frees[i].lifeState==false){\r\n                            this.frees[i].position=this.display.cameraBox.position;\r\n                            this.frees[i].forword=this.display.cameraBox.forword;\r\n                            this.j++;\r\n                            break;\r\n                        }else{\r\n                            this.j++;\r\n                        }\r\n                    } */\r\n                    \r\n                    this.frees[this.j].position=new BABYLON.Vector3(this.display.cameraBox.absolutePosition.x+ram,this.display.cameraBox.absolutePosition.y+ram,this.display.cameraBox.absolutePosition.z) ;\r\n                    this.frees[this.j].rotation=new BABYLON.Vector3(this.display.cameraBox.rotation.x+ram,this.display.cameraBox.rotation.y+ram,this.display.cameraBox.rotation.z);\r\n                    this.frees[this.j].lifeState=true;\r\n                    this.j++;\r\n                  //  this.timerNpc.start();\r\n                }else{\r\n                    this.j=0;\r\n                  \r\n                    this.frees[this.j].position=new BABYLON.Vector3(this.display.cameraBox.absolutePosition.x,this.display.cameraBox.absolutePosition.y,this.display.cameraBox.absolutePosition.z) ;\r\n                    this.frees[this.j].rotation=new BABYLON.Vector3(this.display.cameraBox.rotation.x,this.display.cameraBox.rotation.y,this.display.cameraBox.rotation.z);\r\n                    this.frees[this.j].lifeState=true;\r\n                   // console.log(\"归零\")\r\n                  //  this.creatNpc()\r\n                   // this.timerNpc.start();\r\n                }\r\n            }\r\n           \r\n        },50)\r\n\r\n       /*  this.scene.meshes.forEach((mesh)=>{\r\n            console.log(mesh.name)\r\n        }) */\r\n    }\r\n\r\n    private lastSystemTime;\r\n    private times\r\n    private times2\r\n\r\n    protected beforeRender(){\r\n      /*   var useTime;\r\n        if(this.lastSystemTime) {\r\n             useTime =new Date().getTime() - this.lastSystemTime;\r\n        }else{\r\n             useTime = 1000 / 60;\r\n        }\r\n         //本次消耗的时间 / 正常每帧应该消耗的时间 算出倍率\r\n        this.times = useTime / (1000/ 60);\r\n        this.lastSystemTime=new Date().getTime(); */\r\n\r\n        this.times= 60/SceneManager.ins.engine.getFps();\r\n        console.log(this.times)\r\n        this.movePlayer()\r\n        this.freeUpdate()\r\n        this._s=this.moveX;\r\n    }\r\n\r\n    //前进状态\r\n    private moveForward = false;\r\n    //后退状态\r\n    private moveBackward = false;\r\n    //左转状态\r\n    private moveLeft = false;\r\n    //右转状态\r\n    private moveRight = false;\r\n\r\n       //空格状态\r\n    private canJump = false;\r\n       //速度状态\r\n    private speedCharacter=-0.5;\r\n\r\n    private character\r\n\r\n\r\n\r\n    \r\n    private vecToLocal(vector, mesh){\r\n        var m = mesh.getWorldMatrix();\r\n        var v = BABYLON.Vector3.TransformCoordinates(vector, m);\r\n\t\treturn v;\t\t \r\n    }\r\n\r\n   /*  private castRay(){       \r\n        var origin = box.position;\r\n\t\r\n\t    var forward = new BABYLON.Vector3(0,0,1);\t\t\r\n\t    forward = vecToLocal(forward, box);\r\n\t\r\n\t    var direction = forward.subtract(origin);\r\n\t    direction = BABYLON.Vector3.Normalize(direction);\r\n\t\r\n\t    var length = 100;\r\n\t\r\n\t    var ray = new BABYLON.Ray(origin, direction, length);\r\n\r\n\t\tlet rayHelper = new BABYLON.RayHelper(ray);\t\t\r\n\t\trayHelper.show(scene);\t\t\r\n\r\n        var hit = scene.pickWithRay(ray);\r\n\r\n        if (hit.pickedMesh){\r\n\t\t   hit.pickedMesh.scaling.y += 0.01;\r\n\t    }\r\n    } */\r\n\r\n    private freeUpdate() {\r\n\r\n       /*  if(!this.freeState){\r\n            return;\r\n        } */\r\n        var origin = this.display.cameraBox.position;\r\n\t\r\n    \r\n\r\n          var forward = new BABYLON.Vector3(0,0,1);\t\t\r\n          forward = this.vecToLocal(forward, this.display.cameraBox);\r\n      \r\n          var direction = forward.subtract(origin);\r\n          direction = BABYLON.Vector3.Normalize(direction);\r\n\r\n      \r\n          this.ray.origin = origin;\r\n          this.ray.direction =direction;\r\n\r\n       /*    let rayHelper = new BABYLON.RayHelper(this.ray);\t\t\r\n          rayHelper.show(this.scene,new BABYLON.Color3(1,1,1));\t */\r\n          this.hit = this.scene.pickWithRay(this.ray);\r\n\r\n        var ram=Math.random;\r\n\r\n        \r\n\r\n\r\n       // this.rect2.linkWithMesh(this.display.cameraBox)\r\n\r\n        if (this.hit.pickedMesh){\r\n           this.rect1.moveToVector3(this.hit.pickedPoint,this.scene)\r\n           this.rect1.isVisible = true;\r\n           this.rect2.color = \"#ffc107\";\r\n\r\n\t    }else{\r\n            this.rect1.isVisible = false;\r\n            this.rect2.color = \"#009855\";\r\n        }\r\n\r\n        this.frees.forEach((free,i)=>{\r\n            if(free.lifeState==true){\r\n                var forword=new BABYLON.Vector3(free.forward.x*10*this.times,free.forward.y*10*this.times,free.forward.z*10*this.times)\r\n                free.moveWithCollisions(forword);\r\n                free.isVisible=true;\r\n\r\n                if (this.hit.pickedMesh){\r\n                    /* console.log(\"hit.pickedMesh.name\")\r\n                    console.log(hit.pickedMesh.name)\r\n                    console.log(hit.pickedPoint) */\r\n                    if(!free.boomPosition){\r\n                        free.boomPosition=new BABYLON.Vector3(this.hit.pickedPoint.x,this.hit.pickedPoint.y,this.hit.pickedPoint.z)\r\n                    }\r\n                   \r\n                    //this.booms[i].position=hit.pickedPoint;\r\n                 }\r\n\r\n                 if(free.boomPosition){\r\n                    var jl2=this.getDistance(\r\n                        free.position.x,\r\n                        free.position.y, \r\n                        free.position.z, \r\n                        free.boomPosition.x,\r\n                        free.boomPosition.y, \r\n                        free.boomPosition.z, \r\n                        )\r\n    \r\n                     if(jl2<=50){\r\n                        free.lifeState=false;\r\n                        this.booms[i].position=new BABYLON.Vector3(free.boomPosition.x,free.boomPosition.y,free.boomPosition.z);\r\n                        free.boomPosition=null;\r\n                     }\r\n                 }\r\n                 \r\n               \r\n\r\n /*                var pointToIntersect = new BABYLON.Vector3(10, -5, 0);\r\nif (balloon3.intersectsPoint(pointToIntersect)){\r\n  balloon3.material.emissiveColor = new BABYLON.Color4(1, 0, 0, 1);\r\n} */\r\n              /*   if (this.scene.getMeshByName(\"default\").intersectsPoint(free.position)) {\r\n                    //free.material.emissiveColor = new BABYLON.Color4(1, 0, 0, 1);\r\n                    this.booms[i].position=new BABYLON.Vector3(free.position.x,free.position.y,free.position.z);\r\n                    free.lifeState=false\r\n                  } else {\r\n                    //free.material.emissiveColor = new BABYLON.Color4(1, 1, 1, 1);\r\n                } */\r\n\r\n               /*  this.rayEventCon(\r\n                    \"frontPick\",\r\n                    new BABYLON.Vector3(0, 0, -1),\r\n                    new BABYLON.Vector3(0, 0, 0),\r\n                    this.scene.getMeshByName(\"default\"),\r\n                    free,\r\n                    5,\r\n                    (e)=>{\r\n                        //console.log(e)\r\n                        if(e){\r\n                            //console.log(\"撞到前面\")\r\n                            this.booms[i].position=new BABYLON.Vector3(free.position.x,free.position.y,free.position.z);\r\n                            free.lifeState=false\r\n                        }\r\n                    }\r\n                )\r\n */\r\n                var jl=this.getDistance(\r\n                    free.position.x,\r\n                    free.position.y, \r\n                    free.position.z, \r\n                    this.display.cameraBox.position.x, \r\n                    this.display.cameraBox.position.y, \r\n                    this.display.cameraBox.position.z\r\n                    )\r\n\r\n                if(jl>=600){\r\n                    free.lifeState=false;\r\n                    free.boomPosition=null;\r\n                /*     free.position=new BABYLON.Vector3(this.display.cameraBox.absolutePosition.x,this.display.cameraBox.absolutePosition.y,this.display.cameraBox.absolutePosition.z) ;\r\n                    free.rotation=new BABYLON.Vector3(this.display.cameraBox.rotation.x,this.display.cameraBox.rotation.y,this.display.cameraBox.rotation.z);    \r\n          */       }\r\n            }else{\r\n               /*  free.position=new BABYLON.Vector3(this.display.cameraBox.absolutePosition.x,this.display.cameraBox.absolutePosition.y,this.display.cameraBox.absolutePosition.z) ;\r\n                free.rotation=new BABYLON.Vector3(this.display.cameraBox.rotation.x,this.display.cameraBox.rotation.y,this.display.cameraBox.rotation.z);    \r\n              */   free.isVisible=false;\r\n            }\r\n        })\r\n\r\n        \r\n    }\r\n\r\n\r\n    \r\n   \r\n\r\n    private movePlayer():void{\r\n\r\n      \r\n       // this.scene.getMeshByName(\"尾翼\").rotation=new BABYLON.Vector3(0,1,0);\r\n        var gravity = 0;\r\n        this.character = this.display.cameraBox;\r\n       /*  this.character.ellipsoid = new BABYLON.Vector3(3,6, 3);\r\n        this.character.ellipsoidOffset = new BABYLON.Vector3(0, 3.2, 0); */\r\n        var forwards\r\n\r\n       /*  console.log(\"this.display.cameraBox\")\r\n        console.log(this.display.cameraBox) */\r\n        //if(this.moveForward){\r\n          /*   if(this.moveLeft){\r\n                this.character.rotation.y-=0.04\r\n              //  console.log(\"asdasdasd\")\r\n              //  console.log(this.display.cameraBox.rotation.y)\r\n               // this.display.cameraBox.rotation.z+=0.03\r\n            } */\r\n\r\n\r\n           // console.log(this.display.cameraBox.rotation.z)\r\n\r\n        //   console.log(this.scene.meshes)\r\n           //this.barrierCon(true)\r\n\r\n           this.canardUpdate()\r\n           this.empennageUpdate()\r\n           this.wingsUpdate()\r\n           this.airflowUpdate()\r\n\r\n              \r\n          // this.display.camera3.cameraAcceleration=0.18*Math.sqrt(this.times)\r\n         //  this.display.camera3.maxCameraSpeed=30*this.times\r\n         // this.display.camera3.speed=2*this.times;\r\n           this.rect2.rotation=-this.display.cameraBox.rotation.z;\r\n\r\n          \r\n\r\n            this.display.cameraBox.rotation.y-=this.display.cameraBox.rotation.z/50*this.times;\r\n\r\n            if(this.moveY>=50||this.moveY<=-50){\r\n                this.display.cameraBox.rotation.x-=this.moveY/40000*this.times\r\n            }\r\n\r\n            if(this.display.cameraBox.rotation.x>Math.PI*2){\r\n                this.display.cameraBox.rotation.x=0\r\n             }\r\n  \r\n             if(this.display.cameraBox.rotation.x<=-Math.PI*2){\r\n                this.display.cameraBox.rotation.x=0\r\n             }\r\n\r\n\r\n             ;\r\n\r\n         //    console.log((3600*this.display.cameraBox.rotation.x/(Math.PI*2))+\"px\");\r\n\r\n             this.rect3.top=(-1460+1800*this.display.cameraBox.rotation.x/(Math.PI*2))+\"px\";\r\n             //this.rect3.top=\"-100%\";\r\n           \r\n           // console.log(40+this.display.cameraBox.rotation.z*10)\r\n\r\n\r\n           // this.setMeshVal(this.scene.getMeshByName(\"右翼\"),this.display.cameraBox.rotation.z)\r\n\r\n            if(this.display.cameraBox.rotation.z>0){\r\n               // console.log(\"2223355\")\r\n            }\r\n    \r\n            var forword=new BABYLON.Vector3(this.character.forward.x*2*this.times,this.character.forward.y*2*this.times,this.character.forward.z*2*this.times)\r\n     \r\n            this.character.moveWithCollisions(forword);\r\n\r\n\r\n           /*  this.display.camera2.setTarget( this.display.cameraBox.position);\r\n            this.display.camera2.position= new BABYLON.Vector3(this.display.camera2Box.absolutePosition.x,this.display.camera2Box.absolutePosition.y,this.display.camera2Box.absolutePosition.z) ;\r\n */    \r\n    }\r\n\r\n\r\n    private  _s=0;\r\n    private  _s_y=0;\r\n    private  moveX=0;\r\n    private  moveY=0;\r\n\r\n    private keyevent():void{\r\n      \r\n        var eleImage = document.getElementById('renderCanvas');\r\n            if (eleImage) {\r\n                // 起始值\r\n              //  var moveX = 0, moveY = 0;\r\n                // 图片无限变换的方法\r\n                var rotate3D =  (event)=> {\r\n                    this.moveX = this.moveX + event.movementX;\r\n                    this.moveY = this.moveY + event.movementY;\r\n\r\n                   // console.log(event)\r\n\r\n                  //  console.log(this.moveY)\r\n\r\n                 // if(-this.moveX*0.001)\r\n\r\n                if(this.moveX*0.001>Math.PI*2){\r\n                    this.moveX=0\r\n                 }\r\n      \r\n                 if(this.moveX*0.001<=-Math.PI*2){\r\n                    this.moveX=0\r\n                 }\r\n\r\n                this.display.cameraBox.rotation.z=-this.moveX*0.001;\r\n                };\r\n\r\n                // 触发鼠标锁定\r\n                eleImage.addEventListener('click',  ()=> {\r\n                    eleImage.requestPointerLock();\r\n                });\r\n\r\n                // 再次点击页面，取消鼠标锁定处理\r\n              /*   document.addEventListener('click', ()=> {\r\n                    if (document.pointerLockElement == eleImage) {\r\n                        document.exitPointerLock();\r\n                    }\r\n                }); */\r\n\r\n\r\n\r\n                // 检测鼠标锁定状态变化\r\n                document.addEventListener('pointerlockchange', ()=> {\r\n                    if (document.pointerLockElement == eleImage) {\r\n                        document.addEventListener(\"mousemove\", rotate3D, false);\r\n\r\n                        document.addEventListener(\"mousedown\",()=>{\r\n                            this.freeState=true;\r\n                        })\r\n\r\n                        document.addEventListener(\"mouseup\",()=>{\r\n                            this.freeState=false;\r\n                        })\r\n                    } else {\r\n                        document.removeEventListener(\"mousemove\", rotate3D, false);\r\n\r\n                        document.addEventListener(\"mousedown\",()=>{\r\n                            this.freeState=true;\r\n                        })\r\n\r\n                        document.addEventListener(\"mouseup\",()=>{\r\n                            this.freeState=false;\r\n                        })\r\n                    }\r\n                }, false);\r\n            }\r\n\r\n           \r\n    }\r\n\r\n    private flayState=[];\r\n\r\n    private setMeshVal(mesh,state,val){\r\n\r\n\r\n        var _sd=[];\r\n        _sd[\"up-go\"+mesh.name]=this.scene.beginWeightedAnimation(mesh, 0, 0.7916666865348816*val,0, false);\r\n        _sd[\"up-back\"+mesh.name]=this.scene.beginWeightedAnimation(mesh, 0.7916666865348816, 1.625*val,0, false);\r\n        _sd[\"down-go\"+mesh.name]=this.scene.beginWeightedAnimation(mesh, 1.625, 2.4583332538604736*val,0, false);\r\n        _sd[\"down-back\"+mesh.name]=this.scene.beginWeightedAnimation(mesh, 2.4583332538604736, 3.2916667461395264*val,0, false);\r\n        _sd[\"back\"+mesh.name]=this.scene.beginWeightedAnimation(mesh, 3.0*val, 3.2916667461395264*val,0, false);\r\n\r\n        this.flayState[mesh.name]=state;\r\n\r\n       if(state==\"up-go\"){\r\n           //console.log(\"4455\")\r\n           _sd[\"up-go\"+mesh.name].weight = 1\r\n           _sd[\"up-back\"+mesh.name].weight = 0\r\n           _sd[\"down-go\"+mesh.name].weight = 0\r\n           _sd[\"down-go\"+mesh.name].weight = 0\r\n           _sd[\"back\"+mesh.name].weight = 0\r\n          /*  _sd.forEach((sd,i)=>{\r\n               console.log(\"sd\")\r\n               console.log(sd)\r\n               console.log(i)\r\n           \r\n           }) */\r\n           \r\n       }\r\n\r\n       if(state==\"up-back\"){\r\n        _sd[\"up-go\"+mesh.name].weight = 0\r\n        _sd[\"up-back\"+mesh.name].weight = 1\r\n        _sd[\"down-go\"+mesh.name].weight = 0\r\n        _sd[\"down-go\"+mesh.name].weight = 0\r\n        _sd[\"back\"+mesh.name].weight = 0\r\n           // this.scene.beginAnimation(mesh, 0.7916666865348816, 1.625*val, false);\r\n       }\r\n\r\n       if(state==\"down-go\"){\r\n        _sd[\"up-go\"+mesh.name].weight = 0\r\n        _sd[\"up-back\"+mesh.name].weight = 0\r\n        _sd[\"down-go\"+mesh.name].weight = 1\r\n        _sd[\"down-back\"+mesh.name].weight = 0\r\n        _sd[\"back\"+mesh.name].weight = 0\r\n           // this.scene.beginAnimation(mesh, 1.625, 2.4583332538604736*val, false);\r\n       }\r\n\r\n       if(state==\"down-back\"){\r\n        _sd[\"up-go\"+mesh.name].weight = 0\r\n        _sd[\"up-back\"+mesh.name].weight = 0\r\n        _sd[\"down-go\"+mesh.name].weight = 0\r\n        _sd[\"down-back\"+mesh.name].weight = 1\r\n        _sd[\"back\"+mesh.name].weight = 0\r\n           // this.scene.beginAnimation(mesh, 2.4583332538604736, 3.2916667461395264*val, false);\r\n       }\r\n       if(state==\"back\"){\r\n        _sd[\"up-go\"+mesh.name].weight = 0\r\n        _sd[\"up-back\"+mesh.name].weight = 0\r\n        _sd[\"down-go\"+mesh.name].weight = 0\r\n        _sd[\"down-back\"+mesh.name].weight = 0\r\n        _sd[\"back\"+mesh.name].weight = 1\r\n        console.log(\"中\")\r\n           // this.scene.beginAnimation(mesh, 2.4583332538604736, 3.2916667461395264*val, false);\r\n       }\r\n    }\r\n\r\n    private  canardUpdate(){\r\n        if(this.display.cameraBox.rotation.x>0.1){\r\n          //  console.log(\"大\")\r\n            if(this.flayState[\"鸭翼左\"]!=\"up-go\"){\r\n                this.setMeshVal(this.scene.getMeshByName(\"鸭翼左\"),\"up-go\",1)\r\n            }\r\n\r\n            if(this.flayState[\"鸭翼右\"]!=\"up-go\"){\r\n                //this.airflowCon(true)\r\n                this.setMeshVal(this.scene.getMeshByName(\"鸭翼右\"),\"up-go\",1)\r\n            }\r\n        }\r\n\r\n        if(this.display.cameraBox.rotation.x<-0.1){\r\n           // console.log(\"大\")\r\n            if(this.flayState[\"鸭翼左\"]!=\"down-go\"){\r\n               \r\n                this.setMeshVal(this.scene.getMeshByName(\"鸭翼左\"),\"down-go\",1)\r\n            }\r\n            if(this.flayState[\"鸭翼右\"]!=\"down-go\"){\r\n                this.setMeshVal(this.scene.getMeshByName(\"鸭翼右\"),\"down-go\",1)\r\n            }\r\n           \r\n        }\r\n\r\n\r\n        if(this.display.cameraBox.rotation.x>=-0.1&&this.display.cameraBox.rotation.x<=0.1){\r\n\r\n       \r\n            if(this.flayState[\"鸭翼左\"]==\"down-go\"){\r\n                if(this.flayState[\"鸭翼左\"]!=\"down-back\"){\r\n                  \r\n\r\n                  //  console.log(\"中2\")\r\n                    this.setMeshVal(this.scene.getMeshByName(\"鸭翼左\"),\"down-back\",1)\r\n                }\r\n            }\r\n\r\n            if(this.flayState[\"鸭翼左\"]==\"up-go\"){\r\n                if(this.flayState[\"鸭翼左\"]!=\"up-back\"){\r\n                    \r\n\r\n                  //  console.log(\"中2\")\r\n                    this.setMeshVal(this.scene.getMeshByName(\"鸭翼左\"),\"up-back\",1)\r\n                }\r\n            }\r\n\r\n            if(this.flayState[\"鸭翼右\"]==\"down-go\"){\r\n                if(this.flayState[\"鸭翼右\"]!=\"down-back\"){\r\n                \r\n                   // console.log(\"中2\")\r\n                    this.setMeshVal(this.scene.getMeshByName(\"鸭翼右\"),\"down-back\",1)\r\n                }\r\n            }\r\n\r\n            if(this.flayState[\"鸭翼右\"]==\"up-go\"){\r\n                if(this.flayState[\"鸭翼右\"]!=\"up-back\"){\r\n             \r\n\r\n                  //  console.log(\"中2\")\r\n                    this.setMeshVal(this.scene.getMeshByName(\"鸭翼右\"),\"up-back\",1)\r\n                }\r\n            }\r\n\r\n           \r\n        }\r\n    }\r\n\r\n\r\n\r\n    private empennageUpdate(){\r\n        if(this.display.cameraBox.rotation.z>0.3){\r\n            //console.log(\"大\")\r\n            if(this.flayState[\"尾翼\"]!=\"up-go\"){\r\n                this.setMeshVal(this.scene.getMeshByName(\"尾翼\"),\"up-go\",1)\r\n            }\r\n        }\r\n\r\n        if(this.display.cameraBox.rotation.z<-0.3){\r\n           // console.log(\"大\")\r\n            if(this.flayState[\"尾翼\"]!=\"down-go\"){\r\n                this.setMeshVal(this.scene.getMeshByName(\"尾翼\"),\"down-go\",1)\r\n            }\r\n        }\r\n\r\n\r\n        if(this.display.cameraBox.rotation.z>=-0.3&&this.display.cameraBox.rotation.z<=0.3){\r\n       \r\n            if(this.flayState[\"尾翼\"]==\"down-go\"){\r\n                if(this.flayState[\"尾翼\"]!=\"down-back\"){\r\n                   // console.log(\"中2\")\r\n                    this.setMeshVal(this.scene.getMeshByName(\"尾翼\"),\"down-back\",1)\r\n                }\r\n            }\r\n\r\n            if(this.flayState[\"尾翼\"]==\"up-go\"){\r\n                if(this.flayState[\"尾翼\"]!=\"up-back\"){\r\n                    //console.log(\"中2\")\r\n                    this.setMeshVal(this.scene.getMeshByName(\"尾翼\"),\"up-back\",1)\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private wingsUpdate(){\r\n             //  this.character.rotation.y=\r\n             if(this._s>this.moveX){\r\n             //   console.log(\"大\")\r\n                if(this.flayState[\"右翼\"]!=\"up-go\"){\r\n                    this.setMeshVal(this.scene.getMeshByName(\"右翼\"),\"up-go\",1)\r\n                }\r\n    \r\n                if(this.flayState[\"左翼\"]!=\"down-go\"){\r\n                    this.setMeshVal(this.scene.getMeshByName(\"左翼\"),\"down-go\",1)\r\n                }\r\n            }\r\n    \r\n            if(this._s<this.moveX){\r\n                if(this.flayState[\"右翼\"]!=\"down-go\"){\r\n                    this.setMeshVal(this.scene.getMeshByName(\"右翼\"),\"down-go\",1)\r\n                }\r\n              //  console.log(\"小\")\r\n                if(this.flayState[\"左翼\"]!=\"up-go\"){\r\n                    this.setMeshVal(this.scene.getMeshByName(\"左翼\"),\"up-go\",1)\r\n                }\r\n            }\r\n    \r\n            if(this._s==this.moveX){\r\n               \r\n                if(this.flayState[\"右翼\"]==\"down-go\"){\r\n                    if(this.flayState[\"右翼\"]!=\"down-back\"){\r\n                     //   console.log(\"中2\")\r\n                        this.setMeshVal(this.scene.getMeshByName(\"右翼\"),\"down-back\",1)\r\n                    }\r\n                }\r\n    \r\n                if(this.flayState[\"右翼\"]==\"up-go\"){\r\n                    if(this.flayState[\"右翼\"]!=\"up-back\"){\r\n                      //  console.log(\"中2\")\r\n                        this.setMeshVal(this.scene.getMeshByName(\"右翼\"),\"up-back\",1)\r\n                    }\r\n                }\r\n               \r\n               // console.log(\"小\")\r\n               if(this.flayState[\"左翼\"]==\"down-go\"){\r\n                    if(this.flayState[\"左翼\"]!=\"down-back\"){\r\n                      //  console.log(\"中2\")\r\n                        this.setMeshVal(this.scene.getMeshByName(\"左翼\"),\"down-back\",1)\r\n                    }\r\n               }\r\n    \r\n               if(this.flayState[\"左翼\"]==\"up-go\"){\r\n                    if(this.flayState[\"左翼\"]!=\"up-back\"){\r\n                     //   console.log(\"中2\")\r\n                        this.setMeshVal(this.scene.getMeshByName(\"左翼\"),\"up-back\",1)\r\n                    }\r\n                }\r\n                \r\n            }\r\n    }\r\n\r\n\r\n      /** * 求两点距离 */ \r\n      public getDistance(x1: number, y1: number, z1: number, x2: number, y2: number,z2: number) \r\n      {   var _x: number = Math.abs(x1 - x2); \r\n          var _y: number = Math.abs(y1 - y2); \r\n          var _z: number = Math.abs(z1 - z2); \r\n          return Math.sqrt(_x * _x + _y * _y+ _z * _z); \r\n      }\r\n\r\n\r\n      private airflowUpdate(){\r\n        if(this.display.cameraBox.rotation.x>0.1){\r\n             \r\n                 this.airflowCon(false)\r\n              \r\n          }\r\n  \r\n          if(this.display.cameraBox.rotation.x<-0.1){\r\n             \r\n                this.airflowCon(true)\r\n            \r\n          }\r\n  \r\n          if(this.display.cameraBox.rotation.x>=-0.1&&this.display.cameraBox.rotation.x<=0.1){\r\n           \r\n                this.airflowCon(false)\r\n            \r\n          }\r\n      }\r\n\r\n\r\n      private airflowConTime;\r\n      private airflowConState;\r\n\r\n      private airflowCon(airflowConState){\r\n\r\n        if(this.airflowConState==airflowConState){\r\n            return;\r\n        }\r\n\r\n        console.log(\"airflowCon\")\r\n        clearInterval(this.airflowConTime);\r\n        \r\n        if(airflowConState){\r\n            this.airflowConTime=setInterval(()=>{ \r\n                this.scene.getMeshByName(\"气流1\").isVisible=!this.scene.getMeshByName(\"气流1\").isVisible;\r\n                this.scene.getMeshByName(\"气流2\").isVisible=!this.scene.getMeshByName(\"气流2\").isVisible;\r\n            },30)\r\n        }else{\r\n            this.scene.getMeshByName(\"气流1\").isVisible=false;\r\n            this.scene.getMeshByName(\"气流2\").isVisible=false;\r\n        }\r\n\r\n        this.airflowConState=airflowConState\r\n      }\r\n\r\n\r\n   \r\n /**\r\n     * 页面UI控制\r\n     * */\r\n    private viewCtrl(e):void{\r\n        this.viewState=!this.viewState;\r\n        if(this.viewState==true){\r\n         //   this.display.camera2.detachControl(SceneManager.ins.canvas,false);\r\n            this.scene.activeCamera=this.display.camera3\r\n            this.scene.getMeshByName(\"驾驶员头\").isVisible=true;\r\n           // this.display.camera3.alpha=-Math.PI*1;\r\n           // this.display.camera3.beta=1.260483446598473\r\n          //  this.display.camera.attachControl(SceneManager.ins.canvas,true);\r\n\r\n        }else{\r\n          //  this.display.camera.detachControl(SceneManager.ins.canvas,false);\r\n            this.scene.activeCamera=this.display.camera2\r\n            this.scene.getMeshByName(\"驾驶员头\").isVisible=false;\r\n          //  this.display.camera2.rotation=new BABYLON.Vector3(0.1,Math.PI*0.5,0)\r\n          //  this.display.camera2.attachControl(SceneManager.ins.canvas,true);\r\n        }\r\n    }\r\n\r\n    /*   private barrierConTime;\r\n      private barrierConState;\r\n\r\n      private barrierCon(barrierConState){\r\n\r\n        if(this.barrierConState==barrierConState){\r\n            return;\r\n        }\r\n\r\n        console.log(\"airflowCon\")\r\n        clearInterval(this.barrierConTime);\r\n        \r\n        if(barrierConState){\r\n            this.barrierConTime=setInterval(()=>{ \r\n\r\n                this.scene.getMeshByName(\"气流3\").isVisible=!this.scene.getMeshByName(\"气流3\").isVisible;\r\n             //   this.scene.getMeshByName(\"气流2\").isVisible=!this.scene.getMeshByName(\"气流2\").isVisible;\r\n            },30)\r\n        }else{\r\n            this.scene.getMeshByName(\"气流3\").isVisible=false;\r\n            //this.scene.getMeshByName(\"气流2\").isVisible=false;\r\n        }\r\n\r\n        this.barrierConState=barrierConState\r\n      } */\r\n}\r\n","\r\n/**\r\n * 全局事件传递\r\n * */\r\n\r\nexport class EventCon {\r\n\r\n    private static instance: EventCon;\r\n    public static get ins(): EventCon {\r\n        if (!this.instance) {\r\n            this.instance = new EventCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    //分数显示  从游戏场景到游戏GUI\r\n    public gold;\r\n\r\n    //控制车的方向按键  从游戏GUI到游戏场景\r\n    public key;\r\n\r\n    constructor(){\r\n        this.gold = new BABYLON.Observable();\r\n        this.key = new BABYLON.Observable();\r\n    }\r\n}","\r\nimport {Before} from \"./Before\";\r\n\r\nwindow.addEventListener(\"load\",()=>{\r\n\r\n    var ua = navigator.userAgent;\r\n\r\n    var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/),\r\n\r\n        isIphone =!ipad && ua.match(/(iPhone\\sOS)\\s([\\d_]+)/),\r\n\r\n        isAndroid = ua.match(/(Android)\\s+([\\d.]+)/),\r\n\r\n        isMobile = isIphone || isAndroid;\r\n\r\n//判断\r\n\r\n    if(isMobile){\r\ndocument.body.innerHTML= `\r\n    <style>\r\n        body{\r\n        text-align: center;\r\n        font-size: 1rem;\r\n        color: #349ccd;\r\n        }\r\n\r\n    h1{\r\n    margin-top: 10rem;\r\n    }\r\n    </style> \r\n    <h1>Hi!</h1>\r\n    Please access through PC, mobile phone temporarily not supported!\" <br>(请通过PC访问，手机暂时不支持！)`;\r\n    }else{\r\n        Before.ins.update();\r\n    }\r\n\r\n\r\n})\r\n","\r\nimport {ResourceCon} from \"./other/ResourceCon\";\r\nimport {SceneBeforeCall} from \"./other/SceneBeforeCall\";\r\nimport {AssetsManager} from \"./public/index\"\r\nimport {SceneManager} from \"./public/index\";\r\nimport {GlobalManager} from \"./public/index\";\r\nimport {DisplayPool} from \"./public/index\";\r\nimport {ModuleName} from \"./public/index\"\r\nimport {ExGameSceneCon} from \"./Scene/GameScene/ExGameSceneCon\";\r\nimport {ExGameSceneGuiCon} from \"./Gui/GameSceneGui/ExGameSceneGuiCon\";\r\nimport {ExStartGuiCon} from \"./Gui/StartGui/ExStartGuiCon\";\r\n\r\n\r\n\r\nexport class Before{\r\n\r\n\r\n    private static instance: Before;\r\n\r\n    public static get ins(): Before {\r\n        if (!this.instance) {\r\n            this.instance = new Before();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n\r\n    public update(){\r\n        localStorage.map=\"1\"\r\n        localStorage.car_x=0;\r\n        localStorage.car_y=151;\r\n        localStorage.car_z=226;\r\n        AssetsManager.ins.resourceData=ResourceCon.ins.resource;\r\n        AssetsManager.ins.loadFile([\"gameScene\"],SceneManager.ins.scene,function(){\r\n            this.initModule()\r\n            console.log(DisplayPool.ins.displayPool)\r\n            GlobalManager.ins.openModule(ModuleName.GAME_START_GUI);\r\n            SceneBeforeCall.ins.musicLoop();\r\n        }.bind(this),function(e){\r\n            console.log(e.loadCount)\r\n        }.bind(this))\r\n    }\r\n\r\n    protected addEvent(): void {\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 安装GUI/3D场景模块\r\n     * */\r\n\r\n    public initModule(){\r\n        //游戏3D场景\r\n        ExGameSceneCon.ins.init();\r\n        ExStartGuiCon.ins.init();\r\n        ExGameSceneGuiCon.ins.init();\r\n    }\r\n\r\n}\r\n","import {ResourceData} from \"../public/index\"\r\n\r\nexport class ResourceCon {\r\n\r\n    private _resource;\r\n\r\n    private static instance: ResourceCon;\r\n\r\n    public static get ins(): ResourceCon {\r\n        if (!this.instance) {\r\n            this.instance = new ResourceCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    private pathFirst=window[\"resPath\"]\r\n\r\n    constructor(){\r\n        let gameScene:ResourceData;\r\n\r\n        gameScene={\r\n            binarys:[\r\n                {name:\"rain\", filePath:this.pathFirst+\"src/Resource/gameScene/binarys/\", fileName:\"rain.mp4\"},\r\n               // {name:\"sm14\", filePath:this.pathFirst+\"src/Resource/gameScene/binarys/\", fileName:\"sm14.glb\"},\r\n            ],\r\n            images:[\r\n               /*  {name:\"test\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"cursor_default.png\",},\r\n                {name:\"beginBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"beginBtn.png\",},\r\n                {name:\"bg\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"bg.jpg\",},\r\n                {name:\"close\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"close.png\",},\r\n                {name:\"win_m\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"win_m.png\",},\r\n                {name:\"bg_modle\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"bg_modle.png\",},\r\n                {name:\"btn_left\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_left.png\",},\r\n                {name:\"btn_right\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_right.png\",},\r\n                {name:\"btn_py\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_py.png\",},\r\n                {name:\"btn_dq\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"btn_dq.png\",},\r\n                {name:\"prizeBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"prizeBtn.png\",},\r\n                {name:\"ruleBtn\", filePath:this.pathFirst+\"src/Resource/gameScene/images/\", fileName:\"ruleBtn.png\",}, */\r\n\r\n                //光晕\r\n                {name:\"Bphl4qj\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"Bphl4qj.png\"},\r\n                {name:\"HRsf4I5\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"HRsf4I5.png\"},\r\n                {name:\"IIyZhcg\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"IIyZhcg.png\"},\r\n                {name:\"it5c3Vr\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"it5c3Vr.png\"},\r\n                {name:\"ty\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"ty.png\"},\r\n                {name:\"XaJRD9j\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/light/\", fileName:\"XaJRD9j.png\"},\r\n\r\n                //ui\r\n\r\n                {name:\"after\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"after.jpg\"},\r\n                {name:\"night\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"night.jpg\"},\r\n                {name:\"rain\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"rain.jpg\"},\r\n                {name:\"sun\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"sun.jpg\"},\r\n                {name:\"map1\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"map_1.jpg\"},\r\n                {name:\"map2\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"map_2.jpg\"},\r\n                {name:\"map3\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"map_3.jpg\"},\r\n                {name:\"logo\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"logo.png\"},\r\n                {name:\"jiantou\", filePath:this.pathFirst+\"src/Resource/gameScene/images/ui/\", fileName:\"jiantou.png\"},\r\n            ],\r\n            models:[\r\n               \r\n              /*   {name:\"wheel\", filePath:this.pathFirst+\"src/Resource/gameScene/models/car2/\", fileName:\"wheel.babylon\"},\r\n                {name:\"map1\", filePath:this.pathFirst+\"src/Resource/gameScene/models/height_m2/\", fileName:\"height_m18.babylon\"},\r\n                {name:\"map2\", filePath:this.pathFirst+\"src/Resource/gameScene/models/height_m2/\", fileName:\"height_m15.babylon\"},*/\r\n                {name:\"map3\", filePath:this.pathFirst+\"src/Resource/gameScene/models/height_m2/\", fileName:\"height_m18.babylon\"}, \r\n                {name:\"sm14\", filePath:this.pathFirst+\"src/Resource/gameScene/models/sm14/\", fileName:\"sm97.glb\"},\r\n            ],\r\n            textures:[\r\n                {name:\"grass\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"grass.png\"},\r\n                {name:\"grass2\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"grass.jpg\"},\r\n                {name:\"ground\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"ground.jpg\"},\r\n                {name:\"maptr\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"maptr.jpg\"},\r\n                {name:\"maptr2\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"maptr5.jpg\"},\r\n                {name:\"stainedGlass\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"stainedGlass.png\"},\r\n                {name:\"waterbump\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"waterbump.png\"},\r\n                {name:\"yu\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"yu.png\"},\r\n                {name:\"lighting\", filePath:this.pathFirst+\"src/Resource/gameScene/textures/\", fileName:\"lighting4.png\"},\r\n\r\n            ],\r\n            cubeTextures:[\r\n                {name:\"skybox\", filePath:this.pathFirst+\"src/Resource/gameScene/cubeTextures/skybox/\", fileName:\"skybox\",}\r\n            ]\r\n        };\r\n\r\n\r\n\r\n        this._resource={\r\n            gameScene:gameScene,\r\n        }\r\n    }\r\n\r\n    public get resource(): object {\r\n        return this._resource;\r\n    }\r\n}","import {SceneManager} from \"../public/index\"\r\nimport {AssetsManager} from \"../public/index\"\r\n\r\n\r\n/**\r\n * 全局执行函数\r\n *\r\n *\r\n* */\r\nexport class SceneBeforeCall {\r\n    private static instance: SceneBeforeCall;\r\n\r\n    public static get ins(): SceneBeforeCall {\r\n        if (!this.instance) {\r\n            this.instance = new SceneBeforeCall();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    public game_bg:any;\r\n\r\n    constructor(){}\r\n\r\n    public musicLoop(){\r\n      /*  this.game_bg = new BABYLON.Sound(\"Cello\",AssetsManager.ins.resourceObject[\"binarys\"][\"gameScene\"][\"game_bg\"][\"url\"], SceneManager.ins.scene,()=>{\r\n            this.game_bg.play()\r\n            this.game_bg.setVolume(0.5)\r\n        },{loop:true});*/\r\n    }\r\n}","import {Module} from \"../Module\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GlobalManager} from \"../../manager/GlobalManager\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\n\r\nexport class GameScenes extends Module{\r\n\r\n    //场景名称\r\n    protected sceneName:string;\r\n\r\n    protected isInit:boolean;\r\n\r\n    /**\r\n     * 是否校验积分\r\n     */\r\n    protected checkScore: boolean;\r\n\r\n    /**\r\n     * 开始游戏数据\r\n     */\r\n  //  protected doStartData: DoStartData;\r\n\r\n    /**\r\n     * 扩展数据\r\n     * */\r\n    protected other: any;\r\n\r\n\r\n    protected score;\r\n\r\n    // protected display:any;\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    //销毁\r\n    public dispose(){\r\n        var j;\r\n        for(j in this.display){\r\n            console.log(this.display[j])\r\n            if( this.display[j]){\r\n                this.display[j].dispose()\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    public show(data){\r\n        this.resetGame()\r\n        SceneManager.ins.change(this.display);\r\n        this.addEvent()\r\n    }\r\n\r\n    protected resetGame(){\r\n\r\n    }\r\n\r\n    protected gameOver(): void {\r\n        this.removeEvent();\r\n        //将最高纪录缓存\r\n    }\r\n}","export enum WeatherState {\r\n    //晴天\r\n    SUNNY_DAY = 0,\r\n    //雨天\r\n    RAIN_DAY = 1,\r\n    //下午\r\n    AFTERNOON_DAY = 2,\r\n    //晚上\r\n    NIGHT_DAY = 3,\r\n}\r\n","/**\r\n *Created by renjianfeng\r\n */\r\nexport class AssetsManager {\r\n    private _resourceData;\r\n    private _resourceObject:object;\r\n\r\n\r\n    private static instance: AssetsManager;\r\n\r\n    public static get ins(): AssetsManager {\r\n        if (!this.instance) {\r\n            this.instance = new AssetsManager();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        //this._resourceData=ResourceCon.ins.resource;\r\n        this._resourceObject={\r\n            binarys:{},\r\n            images:{},\r\n            models:{},\r\n            textures:{},\r\n            cubeTextures:{}\r\n        }\r\n\r\n        BABYLON.SceneLoader.OnPluginActivatedObservable.add(function (plugin) {\r\n            // currentPluginName = plugin.name;\r\n                 if (plugin.name === \"gltf\" && plugin instanceof BABYLON.GLTFFileLoader) {\r\n                     plugin.animationStartMode = BABYLON.GLTFLoaderAnimationStartMode.NONE;\r\n                     plugin.compileMaterials = true;\r\n                 }\r\n        });\r\n    }\r\n\r\n    public set resourceData(resource){\r\n        this._resourceData=resource;\r\n    }\r\n\r\n    public loadFile(sceneNames:Array<string>,scene,callback,progress){\r\n\r\n        let assetsManager = new BABYLON.AssetsManager(scene);\r\n\r\n        sceneNames.forEach(function(sceneName){\r\n            //加载模型\r\n            var _thisModel={}\r\n            this._resourceData[sceneName].models.forEach(function(model,plugin){\r\n                let meshTask = assetsManager.addMeshTask(\r\n                    \"skull task\",\r\n                    \"\",\r\n                    model.filePath,\r\n                    model.fileName\r\n                );\r\n              \r\n                meshTask.onSuccess = function (task) {\r\n\r\n                    console.log(\"meshTask\")\r\n                    console.log(task)\r\n                  /*  let _thisMesh = BABYLON.MeshBuilder.CreateBox(\"\", {}, scene);\r\n                    _thisMesh.isVisible=false;\r\n                    _thisMesh.position=new BABYLON.Vector3(0,0,0);\r\n                    task.loadedMeshes.forEach(function(mesh){\r\n                        mesh.isVisible=false;\r\n                       // mesh.position=new BABYLON.Vector3(0,0,0);\r\n                        mesh.parent=_thisMesh;\r\n                     /!*   mesh.getChildMeshes(false,function(child){\r\n                            child.parent=_thisMesh;\r\n                        })*!/\r\n                        //_thisMesh.addChild(mesh)\r\n                    }.bind(this))*/\r\n\r\n                  /*   task.loadedMeshes.forEach(function(mesh){\r\n                        mesh.isVisible=false;\r\n                        mesh.name=\"noneisVisible_\"+mesh;\r\n                    })\r\n */\r\n                    let _thisMesh=task;\r\n\r\n                   // this._resourceObject.models[model.name]=_thisMesh;\r\n                    _thisModel[model.name]=_thisMesh\r\n                    this._resourceObject.models[sceneName]=_thisModel;\r\n\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载图片\r\n            var _thisImage={}\r\n            this._resourceData[sceneName].images.forEach(function(image){\r\n                let imageTask = assetsManager.addImageTask(\r\n                    \"image task\",\r\n                    image.filePath+image.fileName,\r\n                );\r\n                imageTask.onSuccess = function (task) {\r\n                    _thisImage[image.name]=task.image\r\n                    this._resourceObject.images[sceneName]=_thisImage;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n\r\n\r\n            //加载贴图\r\n            var _thisTexture={}\r\n            this._resourceData[sceneName].textures.forEach(function(texture){\r\n                let textureTask = assetsManager.addTextureTask(\r\n                    \"texture task\",\r\n                    texture.filePath+texture.fileName,\r\n                );\r\n                textureTask.onSuccess = function (task) {\r\n                    _thisTexture[texture.name]=task.texture\r\n                    this._resourceObject.textures[sceneName]=_thisTexture;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载二进制文件\r\n            var _thisBinary={}\r\n            this._resourceData[sceneName].binarys.forEach(function(binary){\r\n                let binaryTask = assetsManager.addBinaryFileTask(\r\n                    \"binary task\",\r\n                    binary.filePath+binary.fileName,\r\n                );\r\n                binaryTask.onSuccess = function (task) {\r\n                    console.log(6666677)\r\n\r\n                    _thisBinary[binary.name]=task.data\r\n                    _thisBinary[binary.name][\"url\"]=task.url\r\n                    _thisBinary[binary.name][\"rootUrl\"]=binary.filePath\r\n                    _thisBinary[binary.name][\"sceneFilename\"]=binary.fileName\r\n                    this._resourceObject.binarys[sceneName]=_thisBinary;\r\n\r\n                    console.log(_thisBinary[binary.name])\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n\r\n            //加载天空盒子/环境贴图\r\n            var _thisCubeTexture={}\r\n            this._resourceData[sceneName].cubeTextures.forEach(function(cubeTexture){\r\n                let cubeTextureTask = assetsManager.addCubeTextureTask(\r\n                    \"cubeTexture task\",\r\n                    cubeTexture.filePath+cubeTexture.fileName,\r\n                );\r\n                cubeTextureTask.onSuccess = function (task) {\r\n                    _thisCubeTexture[cubeTexture.name]=task.texture\r\n                    this._resourceObject.cubeTextures[sceneName]=_thisCubeTexture;\r\n                }.bind(this)\r\n            }.bind(this))\r\n\r\n        }.bind(this))\r\n\r\n        assetsManager.load();\r\n\r\n\r\n        //加载成功一个子元素调用\r\n        assetsManager.onProgress=function(task) {\r\n            var _this={\r\n                totalTasksCount:assetsManager._totalTasksCount,\r\n                waitingTasksCount:assetsManager._waitingTasksCount,\r\n                loadCount:(assetsManager._totalTasksCount-assetsManager._waitingTasksCount)/assetsManager._totalTasksCount\r\n            }\r\n            progress(_this)\r\n\r\n        }.bind(this);\r\n\r\n        //全部加载成功调用\r\n        assetsManager.onFinish=function(task) {\r\n            callback()\r\n        }.bind(this);\r\n\r\n    }\r\n\r\n    public get resourceObject(){\r\n        return this._resourceObject;\r\n    }\r\n\r\n}","import {GuiCreate} from \"./GuiCreate\";\r\n\r\n/**\r\n * Created by renjianfeng\r\n *动画控制器\r\n */\r\nexport class AnimationCon {\r\n    private static instance: AnimationCon;\r\n    private setbeginAnimation;\r\n\r\n    public static  get  ins():AnimationCon{\r\n        if(!this.instance){\r\n            this.instance=new AnimationCon()\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){}\r\n\r\n    public animationBody(object,scene){\r\n        //动画模式\r\n        var _endattr;\r\n\r\n        //动画对象\r\n        var _mesh;\r\n\r\n        //动画属性\r\n        var _attr;\r\n\r\n        //动画速度\r\n        var _speed;\r\n\r\n        //动画帧\r\n        var _keys;\r\n\r\n        //动画结束回调函数\r\n        var _endCall;\r\n\r\n        //动画数据类型\r\n        var _typeData\r\n\r\n        //动画数据类型\r\n        var _loop;\r\n\r\n        if(object.endattr!=null){\r\n            _endattr=object.endattr;\r\n        }else{\r\n            _endattr=BABYLON.Animation.ANIMATIONLOOPMODE_CYCLE;\r\n        }\r\n\r\n        if(object.mesh!=null){\r\n            _mesh=object.mesh;\r\n        }else {\r\n            _mesh=null;\r\n            console.error(\"动画对象不能为空！\")\r\n        }\r\n\r\n        if(object.attr!=null){\r\n            _attr=object.attr;\r\n        }else {\r\n            _attr=null;\r\n            console.error(\"动画对象属性不能为空！\")\r\n        }\r\n\r\n        if(object.speed!=null){\r\n            _speed=object.speed;\r\n        }else {\r\n            _speed=10;\r\n        }\r\n\r\n        if(object.keys!=null){\r\n            _keys=object.keys;\r\n        }else {\r\n            _keys=[];\r\n        }\r\n\r\n        if(object.endCall!=null){\r\n            _endCall=object.endCall\r\n        }else{\r\n            _endCall=function(){}\r\n        }\r\n\r\n\r\n        if(object.typeData!=null){\r\n            _typeData=object.typedata\r\n        }else{\r\n            _typeData=BABYLON.Animation.ANIMATIONTYPE_FLOAT\r\n        }\r\n\r\n\r\n        if(object.loop!=null){\r\n            _loop=object.loop\r\n        }else{\r\n            _loop=false;\r\n        }\r\n\r\n        var animationBox = new BABYLON.Animation(\"myAnimation\", _attr, _speed, _typeData, _endattr);\r\n        var keys = [];\r\n        keys=_keys\r\n        animationBox.setKeys(keys);\r\n        _mesh.animations.push(animationBox);\r\n        this.setbeginAnimation=scene.beginAnimation(_mesh, 0, _keys[_keys.length-1].frame, _loop);\r\n        this.setbeginAnimation.onAnimationEnd=function(){\r\n            _endCall()\r\n        }\r\n    }\r\n\r\n    public Pause(){\r\n        this.setbeginAnimation.pause()\r\n    }\r\n    public Reset(){\r\n        this.setbeginAnimation.reset()\r\n    }\r\n    public Speed(i){\r\n        this.setbeginAnimation.speedRatio=i\r\n    }\r\n\r\n}\r\n\r\n","/**\r\n * Created by rjf on 2017/10/10.\r\n * 粒子控制器\r\n */\r\n\r\nexport class particleCon {\r\n    private static instance: particleCon;\r\n    constructor(position,scene,particle){\r\n        this.fountain = BABYLON.Mesh.CreateBox(\"fountain\", 1.0, scene);\r\n        this.fountain.isPickable=false\r\n        this.fountain.visibility=0;\r\n        this.fountain.rotation.x=Math.PI*0.9;\r\n        this.particleSystem=particle;\r\n        //定义发射器\r\n        this.particleSystem.emitter = this.fountain; // the starting object, the emitter, a box in this case.\r\n        this.particleSystem.stop();\r\n        this.fountain.position=position;\r\n    }\r\n\r\n    private particleSystem;\r\n\r\n    private fountain;\r\n\r\n    public start(){\r\n        this.particleSystem.start();\r\n    }\r\n\r\n    public stop(){\r\n        this.particleSystem.stop();\r\n    }\r\n    public Position(position){\r\n        this.fountain.position=position;\r\n    }\r\n\r\n    public Parent(parent){\r\n        this.fountain.parent=parent;\r\n    }\r\n}\r\n\r\n","/**\r\n * GUI控制器\r\n * */\r\nimport {GuiManager} from \"../manager/GuiManager\";\r\n\r\nexport class GuiCreate{\r\n\r\n\r\n    private panelOut=new BABYLON.GUI.StackPanel();\r\n\r\n    private static  instance: GuiCreate;\r\n\r\n    public static  get  ins():GuiCreate{\r\n        if(!this.instance){\r\n            this.instance=new GuiCreate()\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){}\r\n\r\n\r\n    public createList(name,options,scaleUi){\r\n        var rectOut=new BABYLON.GUI.Rectangle();\r\n        rectOut.thickness=0;\r\n        rectOut.isPointerBlocker=true;\r\n        rectOut.verticalAlignment=BABYLON.GUI.Control.VERTICAL_ALIGNMENT_TOP;\r\n        rectOut.horizontalAlignment=BABYLON.GUI.Control.HORIZONTAL_ALIGNMENT_LEFT;\r\n        for (var key in options) {\r\n            if(rectOut[key]){\r\n                rectOut[key] = options[key];\r\n            }\r\n        }\r\n//            panelOut.height=1;\r\n        if(options&&options.isVertical){\r\n            this.panelOut.horizontalAlignment=2;\r\n            this.panelOut.verticalAlignment=0;\r\n            this.panelOut.isVertical  =true;\r\n            var mouse={\r\n                up:0,\r\n                down:0,\r\n            };\r\n            mouse.up=parseInt(this.panelOut.top.toString());\r\n            rectOut.onPointerDownObservable.add(function(e){\r\n                mouse.down= e.y;\r\n            });\r\n            rectOut.onPointerUpObservable.add((e)=>{\r\n                var topY=parseInt(this.panelOut.top.toString());\r\n                mouse.up=topY;\r\n                if(topY>0){\r\n                    this.panelOut.top=\"0px\";\r\n                    mouse.up= 0;\r\n                }\r\n                else if(parseInt(this.panelOut.top.toString())<parseInt(rectOut.height.toString())-parseInt(this.panelOut.height.toString())){\r\n                    var l=(parseInt(rectOut.height.toString())-parseInt(this.panelOut.height.toString()))*scaleUi;\r\n                    this.panelOut.top=l.toString()+\"px\";\r\n                    mouse.up= parseInt(this.panelOut.top);\r\n                }\r\n            });\r\n            rectOut.onPointerMoveObservable.add((e)=>{\r\n                var m=e.y-mouse.down;\r\n                var mul=(mouse.up+m)*scaleUi;\r\n                this.panelOut.top= mul.toString()+\"px\";\r\n            });\r\n        }else {\r\n            this.panelOut.horizontalAlignment=0;\r\n            this.panelOut.verticalAlignment=2;\r\n            this.panelOut.isVertical  =false;\r\n            var mouse={\r\n                up:0,\r\n                down:0\r\n            };\r\n            mouse.up=parseInt(this.panelOut.left.toString());\r\n            rectOut.onPointerDownObservable.add((e)=>{\r\n                mouse.down= e.x;\r\n            });\r\n            rectOut.onPointerUpObservable.add((e)=>{\r\n                var leftY=parseInt(this.panelOut.left.toString());\r\n                mouse.up=leftY;\r\n                if(leftY>0){\r\n                    this.panelOut.left=\"0px\";\r\n                    mouse.up= 0;\r\n                }\r\n                else if(parseInt(this.panelOut.left.toString())<parseInt(rectOut.width.toString())-parseInt(this.panelOut.width.toString())){\r\n                    var l=(parseInt(rectOut.width.toString())-parseInt(this.panelOut.width.toString()))*scaleUi;\r\n                    this.panelOut.left=l.toString()+\"px\";\r\n                    mouse.up= parseInt(this.panelOut.left);\r\n                }\r\n            });\r\n            rectOut.onPointerMoveObservable.add(function(e){\r\n                var m=e.x-mouse.down;\r\n                var mul=(mouse.up+m)*scaleUi;\r\n                this.panelOut.left= mul.toString()+\"px\";\r\n            });\r\n        }\r\n        rectOut.addControl(this.panelOut);\r\n        return rectOut\r\n    }\r\n\r\n\r\n    /**\r\n     * 横向滚动的奖品列表\r\n     * @example\r\n     *  this.optionsList({\r\n                    itemWidth:\"130px\",\r\n                    itemHeight:\"170px\",\r\n                    itemPaddingRight:\"30px\",\r\n                    logoWidth:\"100px\",\r\n                    logoHeight:\"100px\",\r\n                    logoTop:\"0px\",\r\n                    textWidth:\"100px\",\r\n                    textHeight:\"30px\",\r\n                    textTop:\"140px\",\r\n                    isVertical:false,\r\n                },data,this.guiObject)\r\n     *\r\n     * */\r\n    public optionsListCon(config,data,listTemplate){\r\n        var scaleUi=GuiManager.ins.fullscreenUI.idealWidth/document.getElementById(\"renderCanvas\").offsetWidth;\r\n        var prizeDatalist=this.createList(\"list\",{width:config.bodyWidth,height:config.bodyHeight,top:config.bodyTop,left:config.bodyLeft,isVertical:config.isVertical},scaleUi);\r\n        var _length=this.panelOut.children.length\r\n        if(_length>0){\r\n            for(var i=0;i<_length;i++){\r\n                this.panelOut.removeControl(this.panelOut.children[0])\r\n            }\r\n        }\r\n        data.optionList.forEach((_list)=>{\r\n            var list=listTemplate(config,_list)\r\n            this.panelOut.addControl(list)\r\n        })\r\n        return prizeDatalist\r\n    }\r\n\r\n}","import {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {Module} from \"../Module\";\r\n\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\n\r\nexport class Panels extends Module{\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    protected show(open?,opened?): void {\r\n        this.addEvent();\r\n        this.panelsAn.show(this.view,open,opened)\r\n    }\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(close?,closed?): void {\r\n        this.removeEvent();\r\n        this.panelsAn.hide(this.view,close,closed)\r\n    }\r\n\r\n    //销毁\r\n}","import {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {Module} from \"../Module\";\r\n\r\nexport class Guis extends Module{\r\n    constructor(){\r\n        super();\r\n    }\r\n    //销毁\r\n}","import {Module} from \"../Module\";\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {DisplayPool} from \"../../others/DisplayPool\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\nimport {GlobalManager} from \"../../manager/GlobalManager\";\r\n\r\n\r\nexport class StartGui extends Module {\r\n\r\n    //规则元素\r\n    protected section: any;\r\n\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //事件\r\n    protected doEvents=[];\r\n\r\n    //游戏场景对象\r\n\r\n    protected gameSceneObject:any;\r\n\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n        this.initUI();\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    public show(data): void {\r\n        this.removeEvent();\r\n        this.updateData()\r\n        this.addEvent();\r\n        GuiManager.ins.changeGui(this.parent);\r\n    }\r\n\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(): void {\r\n        this.removeEvent();\r\n        this.panelsAn.hide(this.view,()=>{\r\n            this.onClose()\r\n        },()=>{\r\n            this.onClosed()\r\n        })\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开前\r\n     * */\r\n    protected onOpen(...args){\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开后\r\n     * */\r\n    protected onOpened(...args){\r\n\r\n    }\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_START_GUI]=this;\r\n    }\r\n\r\n\r\n    /**\r\n     * 添加事件\r\n     * */\r\n    protected addEvent(){\r\n\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n    }\r\n\r\n\r\n    protected onClick_ruleBtn(): void {\r\n\r\n\r\n    }\r\n\r\n    protected onClick_optionBtn(): void {\r\n\r\n\r\n\r\n    }\r\n\r\n    protected onClick_startBtn(): void {\r\n        GlobalManager.ins.openModule(ModuleName.GAME_PLAY_GUI);\r\n    }\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭前\r\n     * */\r\n    protected onClose(){\r\n        this.removeHtml()\r\n        //NetManager.ins.getInfo(this, DataManager.ins.gameCfgData.game.gameId);\r\n       // this.view.removeControl(this.optionsList)\r\n    }\r\n\r\n    protected removeHtml(){\r\n     //   console.log(this.section)\r\n        if(this.section){\r\n            // alert()\r\n            document.body.removeChild(this.section);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭后\r\n     * */\r\n    protected onClosed(){\r\n        this.removeEvent()\r\n      //  GlobalManager.ins.openModule(\"StartGuiCon\");\r\n      //  GuiManager.ins.removeGui(this.parent);\r\n    }\r\n}","import {Module} from \"../Module\";\r\nimport {AnimationGui} from \"../../others/AnimationGui\";\r\nimport {SceneManager} from \"../../manager/SceneManager\";\r\nimport {GuiManager} from \"../../manager/GuiManager\";\r\nimport {ModuleName} from \"../../enum/ModuleName\";\r\nimport {DisplayPool} from \"../../others/DisplayPool\";\r\n\r\n\r\nexport class GameSceneGui extends Module{\r\n\r\n    //规则元素\r\n    protected section: any;\r\n\r\n    //元素对象集合\r\n    protected scene;\r\n\r\n    //舞台容器\r\n    protected parent;\r\n\r\n    //页面容器\r\n    protected view;\r\n\r\n    //事件\r\n    protected doEvents=[];\r\n\r\n\r\n    //面板隐藏显示实例\r\n    protected panelsAn=new AnimationGui(SceneManager.ins.scene,GuiManager.ins.fullscreenUI)\r\n\r\n    constructor(){\r\n        super()\r\n        this.initUI();\r\n    }\r\n\r\n    /**\r\n     * 显示\r\n     */\r\n    public show(data): void {\r\n        this.updateData()\r\n        this.addEvent();\r\n        GuiManager.ins.changeGui(this.parent);\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 隐藏\r\n     */\r\n    protected hide(): void {\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开前\r\n     * */\r\n    protected onOpen(...args){\r\n\r\n    }\r\n\r\n\r\n    /**\r\n     * 打开后\r\n     * */\r\n    protected onOpened(...args){\r\n\r\n    }\r\n\r\n\r\n    public init(){\r\n        DisplayPool.ins.displayPool[ModuleName.GAME_PLAY_GUI]=this;\r\n    }\r\n\r\n\r\n    /**\r\n     * 添加事件\r\n     * */\r\n    protected addEvent(){\r\n\r\n    }\r\n\r\n\r\n    protected removeEvent(){\r\n\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 更新页面\r\n     * @param args\r\n     */\r\n    public updateData(...args): void {\r\n        this.removeEvent()\r\n        if (!this.isInit) {\r\n            this.initUI();\r\n            this.isInit = true;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 关闭前\r\n     * */\r\n    protected onClose(){\r\n    }\r\n\r\n    /**\r\n     * 关闭后\r\n     * */\r\n    protected onClosed(){\r\n        this.removeEvent()\r\n       // NetManager.ins.getInfo(this, DataManager.ins.gameCfgData.game.gameId);\r\n    }\r\n}","\r\nimport {AssetsManager} from \"../../public/index\"\r\nimport {SceneManager} from \"../../public/index\"\r\nimport {WeatherState} from \"../../public/index\";\r\nimport Texture = BABYLON.Texture;\r\nimport Color3 = BABYLON.Color3;\r\n\r\nexport class ExGameScene{\r\n\r\n    private static instance: ExGameScene;\r\n\r\n    public static get ins(): ExGameScene {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameScene();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    public display;\r\n\r\n    protected scene;\r\n\r\n    constructor(){\r\n       // super()\r\n    }\r\n\r\n\r\n    public creatScene(){\r\n        this.scene=SceneManager.ins.scene\r\n        //设置背景色\r\n        this.scene.clearColor=new BABYLON.Color4(52/255,156/255,255/255)\r\n\r\n        /**\r\n         * 室外相机\r\n         * */\r\n        var  camera = new BABYLON.ArcRotateCamera(\"ArcRotateCamera\", 1, 0.8, 10, new BABYLON.Vector3(0, 200, 0), this.scene);\r\n        camera.alpha=-Math.PI*1\r\n        camera.beta=1.260483446598473\r\n        camera.attachControl(SceneManager.ins.canvas, false);\r\n        camera.upperRadiusLimit=27\r\n        camera.lowerRadiusLimit=-27\r\n       \r\n\r\n     \r\n\r\n\r\n        /**\r\n         * 室内相机校准模型\r\n         * */\r\n        var cameraBox = BABYLON.MeshBuilder.CreateBox(\"camera2Box\", {height:  0.5, width: 0.5, depth: 0.5}, this.scene);\r\n        cameraBox.isVisible=false;\r\n        cameraBox.rotation=new BABYLON.Vector3(0,0,0)\r\n\r\n         /**\r\n         * 室内相机校准模型\r\n         * */\r\n        var camera2Box = BABYLON.MeshBuilder.CreateBox(\"camera2Box\", {height:  0.5, width: 0.5, depth: 0.5}, this.scene);\r\n        camera2Box.position=new BABYLON.Vector3(0,0.5,-3);\r\n        camera2Box.isVisible=false;\r\n        camera2Box.rotation=new BABYLON.Vector3(0,0,0)\r\n\r\n        camera2Box.parent=cameraBox\r\n\r\n\r\n        var steering = BABYLON.MeshBuilder.CreateBox(\"steering\", {height:  2000, width: 2000, depth: 2000}, this.scene);\r\n        steering.visibility=0;\r\n        steering.scaling=new BABYLON.Vector3(0.001,0.001,0.001)\r\n        steering.rotation=new BABYLON.Vector3(0,0.3,Math.PI*0.5)\r\n\r\n\r\n             /**\r\n         * 室内相机\r\n         * */\r\n        var camera2 = new BABYLON.UniversalCamera(\"UniversalCamera\", new BABYLON.Vector3(0, 0.11, 0.30), this.scene);\r\n        camera2.rotation.y=-Math.PI*2\r\n        camera2.fov=1.7\r\n      /*   camera2.position.z=-3;\r\n        camera2.position.y=0.5; */\r\n        camera2.attachControl(SceneManager.ins.canvas);\r\n        camera2.detachControl(SceneManager.ins.canvas);\r\n        this.scene.activeCamera=camera2;\r\n        camera2.minZ=0;\r\n        camera2.parent=cameraBox;\r\n       \r\n\r\n\r\n        var camera3 = new BABYLON.FollowCamera(\"FollowCam\", new BABYLON.Vector3(200, -300, 150), this.scene);\r\n        camera3.radius = -10;\r\n        console.log(\"camera\")\r\n        console.log(camera)\r\n        camera3.heightOffset = 7;\r\n        camera3.rotationOffset = 0;\r\n        camera3.cameraAcceleration = 0.18;\r\n        camera3.maxCameraSpeed = 30;\r\n        //camera3.isStereoscopicSideBySide=false;\r\n        camera3.noRotationConstraint=false;\r\n        camera3.fov=1.3\r\n        camera3.detachControl(SceneManager.ins.canvas);\r\n        camera3.update()\r\n\r\n        this.scene.activeCamera=camera3;\r\n\r\n       // camera3.target = cameraBox;\r\n        camera3.lockedTarget = cameraBox;\r\n\r\n\r\n        var freeMateial=new BABYLON.StandardMaterial(\"free\",this.scene);\r\n        console.log(\"freeMateial\")\r\n        console.log(freeMateial)\r\n        freeMateial.disableLighting=true;\r\n        freeMateial[\"emissiveColor\"]=new BABYLON.Color3(1,1,1)\r\n\r\n\r\n        var boomMateial=new BABYLON.StandardMaterial(\"boom\",this.scene);\r\n        console.log(\"boomMateial\")\r\n        console.log(boomMateial)\r\n        boomMateial.disableLighting=true;\r\n        boomMateial[\"emissiveColor\"]=new BABYLON.Color3(255/255,100/255,0)\r\n\r\n\r\n       /*  var pipeline = new BABYLON.StandardRenderingPipeline(\r\n            \"standard\", // The name of the pipeline\r\n            this.scene, // The scene instance\r\n            1.0, // The rendering pipeline ratio\r\n            null, // The original post-process that the pipeline will be based on\r\n            [camera3] // The list of cameras to be attached to\r\n        );\r\n\r\n        pipeline.MotionBlurEnabled = true;\r\n      //  pipeline.BloomEnabled = true;\r\n\r\n        pipeline.motionStrength = 1.5;\r\n\r\n        pipeline.motionBlurSamples = 32.0;\r\n */\r\n       /*  var pipeline = new BABYLON.DefaultRenderingPipeline(\r\n            \"default\", // The name of the pipeline\r\n            true, // Do you want HDR textures ?\r\n            this.scene, // The scene instance\r\n            [ camera3] // The list of cameras to be attached to\r\n             );\r\n        \r\n        pipeline.bloomEnabled = true;\r\n        \r\n        pipeline.bloomThreshold = 0.2;\r\n        pipeline.bloomWeight = 0.5;\r\n        pipeline.bloomKernel = 64;\r\n        pipeline.bloomScale = 0.5; */\r\n\r\n\r\n\r\n      /*  this.scene.fogMode = BABYLON.Scene.FOGMODE_EXP;\r\n        this.scene.fogDensity = 0.001;\r\n        this.scene.fogColor = new BABYLON.Color3(1,1,1);*/\r\n\r\n\r\n        /**\r\n         * 环境光\r\n         * */\r\n        var light = new BABYLON.HemisphericLight(\"HemiLight\", new BABYLON.Vector3(0, 10, 0), this.scene);\r\n        light.intensity=0.1\r\n        var light2 = new BABYLON.HemisphericLight(\"HemiLight\", new BABYLON.Vector3(0, -10, 0), this.scene);\r\n        light2.intensity=0.1\r\n\r\n        /**\r\n         * 平行光\r\n         * */\r\n        var light3 = new BABYLON.DirectionalLight(\"DirectionalLight\", new BABYLON.Vector3(0.2, -0.3, 0.2), this.scene);\r\n        light3.intensity=0.7\r\n        //  light3.autoUpdateExtends=false;\r\n        light3.shadowFrustumSize=600\r\n        light3.shadowMinZ=-300\r\n        light3.shadowMaxZ=300\r\n\r\n\r\n        var terrainMaterial = new BABYLON[\"TerrainMaterial\"](\"terrainMaterial\", this.scene);\r\n\r\n    \r\n        terrainMaterial.mixTexture = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"maptr2\"].clone()\r\n\r\n\r\n        var gl = new BABYLON.GlowLayer(\"glow\", this.scene);\r\n        gl.intensity = 1;\r\n   \r\n\r\n        terrainMaterial.diffuseTexture1 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"grass\"].clone()\r\n        terrainMaterial.diffuseTexture1.uScale=20\r\n        terrainMaterial.diffuseTexture1.vScale=20\r\n        terrainMaterial.diffuseTexture2 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"grass\"].clone()\r\n        terrainMaterial.diffuseTexture2.uScale=20\r\n        terrainMaterial.diffuseTexture2.vScale=20\r\n        terrainMaterial.diffuseTexture3 = AssetsManager.ins.resourceObject[\"textures\"][\"gameScene\"][\"ground\"].clone()\r\n        terrainMaterial.diffuseTexture3.uScale=20\r\n        terrainMaterial.diffuseTexture3.vScale=20\r\n    \r\n        this.display={\r\n            camera:camera,\r\n            camera2:camera2,\r\n            camera3:camera3,\r\n            light:light,\r\n            light2:light2,\r\n            light3:light3,\r\n            cameraBox:cameraBox,\r\n            camera2Box:camera2Box,\r\n            steering:steering,\r\n            terrainMaterial:terrainMaterial,\r\n            freeMateial:freeMateial,\r\n            boomMateial:boomMateial,\r\n        }\r\n\r\n        console.log(this.display)\r\n\r\n      //  GameSceneCon.ins.resetGame(this.display);\r\n    }\r\n\r\n\r\n\r\n}\r\n\r\n\r\n","import {EventCon} from \"../../other/EventCon\";\r\nimport {ExGameSceneGui} from \"./ExGameSceneGui\";\r\nimport {GameSceneGui} from \"../../public/index\";\r\n\r\nexport class ExGameSceneGuiCon extends GameSceneGui{\r\n\r\n\r\n    private static instance: ExGameSceneGuiCon;\r\n\r\n    public static get ins(): ExGameSceneGuiCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneGuiCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        super()\r\n        this.scene=ExGameSceneGui.ins.guiObject.sceneChild\r\n        this.parent=ExGameSceneGui.ins.guiObject;\r\n    }\r\n\r\n\r\n    public addEvent(){\r\n        var _btnState=[]\r\n        _btnState[\"view\"]=true;\r\n        console.log(\"按键事件\")\r\n        console.log(this.scene.btnLeft)\r\n\r\n       // var viewNode=\r\n        document.body.appendChild(this.scene.viewNode)\r\n\r\n        this.doEvents[\"viewButton\"]=document.getElementById(\"button_view\").addEventListener(\"click\",()=>{\r\n            _btnState[\"view\"]=!_btnState[\"view\"];\r\n            EventCon.ins.key.notifyObservers(_btnState);\r\n        })\r\n\r\n\r\n        this.doEvents[\"viewReset\"]=document.getElementById(\"button_reset\").addEventListener(\"click\",()=>{\r\n            location.reload();\r\n        })\r\n       // document.getElementById(\"viewNode\").innerHTML=this.scene.viewHtml\r\n    }\r\n\r\n\r\n\r\n    public removeEvent(){\r\n        if(document.getElementById(\"viewNode\")){\r\n            try {\r\n                document.body.removeChild(this.scene.viewNode)\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n        //EventCon.ins.gold.remove( this.doEvents[\"gold\"]);\r\n    }\r\n}","\r\n\r\nimport {AssetsManager} from \"../../public/index\";\r\n\r\nexport class ExGameSceneGui{\r\n\r\n    private sceneCon:any;\r\n    private parent:any;\r\n\r\n    private static instance: ExGameSceneGui;\r\n\r\n    public static get ins(): ExGameSceneGui {\r\n        if (!this.instance) {\r\n            this.instance = new ExGameSceneGui();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n            this.creatUI()\r\n    }\r\n\r\n    public creatUI(){\r\n\r\n        this.parent=new BABYLON.GUI.Rectangle()\r\n\r\n        var viewHtml=`\r\n            <style>\r\n            .button-view{\r\n                position: fixed;\r\n                top: 20px;\r\n                left:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .button-view:active{\r\n              transform: scale(0.8);\r\n            }\r\n            .button-reset{\r\n                position: fixed;\r\n                top: 20px;\r\n                right:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .about-btn{\r\n                position: fixed;\r\n                bottom: 20px;\r\n                right:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            button:active{\r\n              transform: scale(0.8);\r\n            }\r\n            </style>\r\n            \r\n            <button class=\"button-view\" id=\"button_view\">View(TPP/FPP)</button>\r\n            <button class=\"button-reset\" id=\"button_reset\">Back</button>\r\n            <div>\r\n            <button class=\"about-btn\" onclick=\"window.location.href='https://github.com/renjianfeng/flightSimulator'\">About The Author And Github</button>\r\n            </div>\r\n        `;\r\n\r\n        var viewNode = document.createElement(\"div\");\r\n        viewNode.id = \"viewNode\";\r\n        viewNode.innerHTML = viewHtml;\r\n\r\n        //交給控制器做交互\r\n        this.parent.sceneChild={\r\n            viewHtml:viewHtml,\r\n            viewNode:viewNode,\r\n        }\r\n\r\n       // this.sceneCon=new GameSceneGuiCon(this.parent);\r\n    }\r\n\r\n    public get guiObject(){\r\n        return this.parent;\r\n    }\r\n\r\n  /*  public set guiObjectDo(obj){\r\n        this.parent=obj;\r\n    }*/\r\n}","import {ExStartGui} from \"./ExStartGui\";\r\nimport {AnimationCon} from \"../../public/index\";\r\nimport {StartGui} from \"../../public/index\";\r\nimport {WeatherState} from \"../../public/index\";\r\nimport {SceneManager} from \"../../public/index\";\r\nimport {ExGameSceneCon} from \"../../Scene/GameScene/ExGameSceneCon\";\r\nimport {EventCon} from \"../../other/EventCon\";\r\nimport {ModuleName} from \"../../public/enum/ModuleName\";\r\nimport {GlobalManager} from \"../../public/manager/GlobalManager\";\r\nimport {AssetsManager} from \"../../public\";\r\nexport class ExStartGuiCon extends StartGui{\r\n\r\n    /**\r\n     * 游戏业务基础数据\r\n     */\r\n\r\n\r\n    private static instance: ExStartGuiCon;\r\n\r\n    public static get ins(): ExStartGuiCon {\r\n        if (!this.instance) {\r\n            this.instance = new ExStartGuiCon();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        super()\r\n        this.scene=ExStartGui.ins.guiObject.sceneChild;\r\n        this.parent=ExStartGui.ins.guiObject;\r\n        this.gameSceneObject=ExGameSceneCon.ins;\r\n    }\r\n\r\n    public addEvent(){\r\n\r\n        localStorage.weatherState=WeatherState.RAIN_DAY;\r\n\r\n        document.body.appendChild(this.scene.viewNode)\r\n\r\n\r\n     \r\n\r\n        this.doEvents[\"viewPlay\"]=document.getElementById(\"button_play\").addEventListener(\"click\",this.onClick_startBtn.bind(this))\r\n\r\n\r\n        /* this.doEvents[\"SUNNY_DAY\"]=document.getElementById(\"SUNNY_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.SUNNY_DAY;\r\n            console.log(\"当前dom\")\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"RAIN_DAY\"]=document.getElementById(\"RAIN_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.RAIN_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"AFTERNOON_DAY\"]=document.getElementById(\"AFTERNOON_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.AFTERNOON_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n\r\n        this.doEvents[\"NIGHT_DAY\"]=document.getElementById(\"NIGHT_DAY\").addEventListener(\"click\",(e)=>{\r\n            localStorage.weatherState=WeatherState.NIGHT_DAY;\r\n            document.querySelectorAll(\".weather-config li\")[\"forEach\"]((list)=>{\r\n                list.setAttribute(\"class\",\"\")\r\n            })\r\n            e[\"path\"][0].setAttribute(\"class\",\"we-active\")\r\n        })\r\n */\r\n       // document.getElementById(\"GAME_BG\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"map1\"].src+\")\"\r\n        //document.getElementById(\"LOGO\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"logo\"].src+\")\"\r\n\r\n        this.mapReset()\r\n\r\n       /*  this.doEvents[\"MAP_LIST\"]==document.getElementById(\"MAP_LIST\").addEventListener(\"change\",(e)=>{\r\n            this.mapReset()\r\n        }) */\r\n\r\n/* \r\n        document.getElementById(\"RAIN_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"rain\"].src+\")\"\r\n        document.getElementById(\"SUNNY_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"sun\"].src+\")\"\r\n        document.getElementById(\"AFTERNOON_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"after\"].src+\")\"\r\n        document.getElementById(\"NIGHT_DAY\").style.backgroundImage=\"url(\"+AssetsManager.ins.resourceObject[\"images\"][\"gameScene\"][\"night\"].src+\")\"\r\n */\r\n    }\r\n\r\n\r\n\r\n    protected mapReset(){\r\n        console.log(localStorage)\r\n    }\r\n\r\n\r\n    protected onClick_startBtn() {\r\n        super.onClick_startBtn()\r\n        GlobalManager.ins.openModule(ModuleName.GAME_PLAY_SCENE);\r\n        this.removeEvent()\r\n    }\r\n\r\n\r\n    public removeEvent(){\r\n        super.removeEvent()\r\n        if(document.getElementById(\"startNode\")){\r\n            try {\r\n                document.body.removeChild(this.scene.viewNode)\r\n            }catch (e) {\r\n                console.log(e)\r\n            }\r\n        }\r\n    }\r\n}","\r\nimport {AssetsManager} from \"../../public/index\";\r\nimport {WeatherState} from \"../../public/index\";\r\n\r\n\r\n\r\nexport class ExStartGui{\r\n\r\n    private sceneCon:any;\r\n    private parent:any;\r\n\r\n    private static instance: ExStartGui;\r\n\r\n    public static get ins(): ExStartGui {\r\n        if (!this.instance) {\r\n            this.instance = new ExStartGui();\r\n        }\r\n        return this.instance;\r\n    }\r\n\r\n    constructor(){\r\n        this.creatUI()\r\n    }\r\n\r\n    public creatUI(){\r\n        this.parent=new BABYLON.GUI.Rectangle()\r\n\r\n\r\n\r\n      /*  var tween = new TWEEN.Tween(startBtn);\r\n        tween.to({ scaleX: 0.8 ,scaleY: 0.8}, 500);\r\n        tween.start();\r\n        tween.repeat(Infinity)\r\n        tween.yoyo(true)*/\r\n\r\n        var viewHtml=`\r\n            <style>\r\n            .button-play{\r\n                position: fixed;\r\n                top: 50%;\r\n                left:50%;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 42px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n                width: 200px;\r\n                height: 80px;\r\n                margin-left: -100px;\r\n                margin-top: 200px;\r\n            }\r\n            .button-play:active{\r\n              transform: scale(0.8);\r\n            }\r\n            .weather-config{\r\n                position: fixed;\r\n                top: 50%;\r\n                left:50%;\r\n                display: block;\r\n                background: #ffffff;\r\n                color: #82bab3;\r\n                border: 0px solid ;\r\n                font-size: 24px;\r\n                border-radius: 5px;\r\n                transform: scale(1);\r\n                width: 1000px;\r\n                height: 260px;\r\n                margin-left: -500px;\r\n                margin-top: -200px;\r\n                text-align: center;\r\n               \r\n            }\r\n            .weather-config ul li{\r\n                display: inline-block;\r\n                height: 200px;\r\n                width: 200px;\r\n                margin: 0px 5px;\r\n                border: 1px solid #cccccc;\r\n                cursor: pointer;\r\n                background-size: 100% 100%;\r\n                text-shadow: 0px 0px 5px #444;\r\n            }\r\n            \r\n            .weather-config ul li:hover{\r\n                border: 1px solid royalblue;\r\n            }\r\n            .we-active{\r\n                border: 3px solid #000 !important;\r\n                opacity: 0.8;\r\n            }\r\n            .yw-text{\r\n              font-size: 14px;\r\n            }\r\n            .box-tip{\r\n            margin-top: 60px;\r\n            }\r\n            \r\n            .map-list{\r\n                margin-top:-30px;\r\n                position: relative;\r\n                top: -30px;\r\n            }\r\n            .map-list select{\r\n                background: transparent;\r\n                padding: 7px;\r\n                color: #82bab3;\r\n                position: relative;\r\n                top: -2px;\r\n                font-size: 18px;\r\n                border-radius: 5px;\r\n                border: 1px solid #82bab3;\r\n            }\r\n            .box-tip{\r\n                background: rgba(0,0,0,0.2);\r\n                color: #ffffff;\r\n                padding: 10px;\r\n                font-size: 16px;\r\n                letter-spacing: 3px;\r\n                position: fixed;\r\n                bottom: 30px;\r\n                width:100%;\r\n                padding-left:20px;\r\n                text-align: center;\r\n            }\r\n\r\n            .about-btn{\r\n                position: fixed;\r\n                top: 20px;\r\n                left:20px;\r\n                background: #349ccd;\r\n                color: #ffffff;\r\n                border: 0px solid ;\r\n                font-size: 18px;\r\n                padding: 8px 20px;\r\n                border-radius: 5px;\r\n                cursor: pointer;\r\n                transform: scale(1);\r\n            }\r\n            .game-bg{\r\n                position: fixed;\r\n                top: 0;\r\n                left:0;\r\n                width:100%;\r\n                height:100%;\r\n               // background-color: #349ccd;\r\n                background-size:100% 100%;\r\n            }\r\n            .logo{\r\n                position: fixed;\r\n                top: 5%;\r\n                left:50%;\r\n                width:500px;\r\n                height:160px;\r\n                margin-left:-250px;\r\n               \r\n                background-size:100% 100%;\r\n            }\r\n\r\n            </style>\r\n        \r\n            <div class=\"game-bg\" id=\"GAME_BG\">\r\n            <div>\r\n            <button class=\"about-btn\" onclick=\"window.location.href='https://github.com/renjianfeng/flightSimulator'\">About The Author And Github</button>\r\n            </div>\r\n            \r\n            <button class=\"button-play\" id=\"button_play\">Play</button>\r\n           \r\n            </div>\r\n           \r\n        `;\r\n\r\n        var viewNode = document.createElement(\"div\");\r\n        viewNode.id = \"startNode\";\r\n        viewNode.innerHTML = viewHtml;\r\n\r\n        document.title=\"FlightSimulator(台风战机模拟驾驶)\"\r\n\r\n        //this.chassisBody.position.set(0, 151, 226);\r\n\r\n\r\n        //交給控制器做交互\r\n        this.parent.sceneChild={\r\n            viewHtml:viewHtml,\r\n            viewNode:viewNode,\r\n        }\r\n\r\n       // this.sceneCon=new StartGuiCon(this.parent);\r\n    }\r\n\r\n    public get guiObject(){\r\n        return this.parent;\r\n    }\r\n}"],"sourceRoot":""}